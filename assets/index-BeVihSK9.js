(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function T1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cd={exports:{}},xo={};var O0;function b1(){if(O0)return xo;O0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:a,key:f,ref:o!==void 0?o:null,props:c}}return xo.Fragment=t,xo.jsx=i,xo.jsxs=i,xo}var M0;function S1(){return M0||(M0=1,Cd.exports=b1()),Cd.exports}var E=S1(),Id={exports:{}},qt={};var V0;function A1(){if(V0)return qt;V0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),x=Symbol.iterator;function q(V){return V===null||typeof V!="object"?null:(V=x&&V[x]||V["@@iterator"],typeof V=="function"?V:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},at=Object.assign,nt={};function ct(V,$,dt){this.props=V,this.context=$,this.refs=nt,this.updater=dt||Y}ct.prototype.isReactComponent={},ct.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},ct.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function rt(){}rt.prototype=ct.prototype;function _t(V,$,dt){this.props=V,this.context=$,this.refs=nt,this.updater=dt||Y}var wt=_t.prototype=new rt;wt.constructor=_t,at(wt,ct.prototype),wt.isPureReactComponent=!0;var Qt=Array.isArray;function mt(){}var N={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(V,$,dt){var J=dt.ref;return{$$typeof:s,type:V,key:$,ref:J!==void 0?J:null,props:dt}}function D(V,$){return C(V.type,$,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function L(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(dt){return $[dt]})}var R=/\/+/g;function ue(V,$){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):$.toString(36)}function ze(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(mt,mt):(V.status="pending",V.then(function($){V.status==="pending"&&(V.status="fulfilled",V.value=$)},function($){V.status==="pending"&&(V.status="rejected",V.reason=$)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function F(V,$,dt,J,jt){var Vt=typeof V;(Vt==="undefined"||Vt==="boolean")&&(V=null);var $t=!1;if(V===null)$t=!0;else switch(Vt){case"bigint":case"string":case"number":$t=!0;break;case"object":switch(V.$$typeof){case s:case t:$t=!0;break;case S:return $t=V._init,F($t(V._payload),$,dt,J,jt)}}if($t)return jt=jt(V),$t=J===""?"."+ue(V,0):J,Qt(jt)?(dt="",$t!=null&&(dt=$t.replace(R,"$&/")+"/"),F(jt,$,dt,"",function(mn){return mn})):jt!=null&&(O(jt)&&(jt=D(jt,dt+(jt.key==null||V&&V.key===jt.key?"":(""+jt.key).replace(R,"$&/")+"/")+$t)),$.push(jt)),1;$t=0;var Le=J===""?".":J+":";if(Qt(V))for(var gt=0;gt<V.length;gt++)J=V[gt],Vt=Le+ue(J,gt),$t+=F(J,$,dt,Vt,jt);else if(gt=q(V),typeof gt=="function")for(V=gt.call(V),gt=0;!(J=V.next()).done;)J=J.value,Vt=Le+ue(J,gt++),$t+=F(J,$,dt,Vt,jt);else if(Vt==="object"){if(typeof V.then=="function")return F(ze(V),$,dt,J,jt);throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return $t}function ot(V,$,dt){if(V==null)return V;var J=[],jt=0;return F(V,J,"","",function(Vt){return $.call(dt,Vt,jt++)}),J}function xt(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(dt){(V._status===0||V._status===-1)&&(V._status=1,V._result=dt)},function(dt){(V._status===0||V._status===-1)&&(V._status=2,V._result=dt)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var Xt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},se={map:ot,forEach:function(V,$,dt){ot(V,function(){$.apply(this,arguments)},dt)},count:function(V){var $=0;return ot(V,function(){$++}),$},toArray:function(V){return ot(V,function($){return $})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return qt.Activity=A,qt.Children=se,qt.Component=ct,qt.Fragment=i,qt.Profiler=o,qt.PureComponent=_t,qt.StrictMode=a,qt.Suspense=_,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,qt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},qt.cache=function(V){return function(){return V.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(V,$,dt){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var J=at({},V.props),jt=V.key;if($!=null)for(Vt in $.key!==void 0&&(jt=""+$.key),$)!w.call($,Vt)||Vt==="key"||Vt==="__self"||Vt==="__source"||Vt==="ref"&&$.ref===void 0||(J[Vt]=$[Vt]);var Vt=arguments.length-2;if(Vt===1)J.children=dt;else if(1<Vt){for(var $t=Array(Vt),Le=0;Le<Vt;Le++)$t[Le]=arguments[Le+2];J.children=$t}return C(V.type,jt,J)},qt.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},qt.createElement=function(V,$,dt){var J,jt={},Vt=null;if($!=null)for(J in $.key!==void 0&&(Vt=""+$.key),$)w.call($,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(jt[J]=$[J]);var $t=arguments.length-2;if($t===1)jt.children=dt;else if(1<$t){for(var Le=Array($t),gt=0;gt<$t;gt++)Le[gt]=arguments[gt+2];jt.children=Le}if(V&&V.defaultProps)for(J in $t=V.defaultProps,$t)jt[J]===void 0&&(jt[J]=$t[J]);return C(V,Vt,jt)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(V){return{$$typeof:g,render:V}},qt.isValidElement=O,qt.lazy=function(V){return{$$typeof:S,_payload:{_status:-1,_result:V},_init:xt}},qt.memo=function(V,$){return{$$typeof:y,type:V,compare:$===void 0?null:$}},qt.startTransition=function(V){var $=N.T,dt={};N.T=dt;try{var J=V(),jt=N.S;jt!==null&&jt(dt,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(mt,Xt)}catch(Vt){Xt(Vt)}finally{$!==null&&dt.types!==null&&($.types=dt.types),N.T=$}},qt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},qt.use=function(V){return N.H.use(V)},qt.useActionState=function(V,$,dt){return N.H.useActionState(V,$,dt)},qt.useCallback=function(V,$){return N.H.useCallback(V,$)},qt.useContext=function(V){return N.H.useContext(V)},qt.useDebugValue=function(){},qt.useDeferredValue=function(V,$){return N.H.useDeferredValue(V,$)},qt.useEffect=function(V,$){return N.H.useEffect(V,$)},qt.useEffectEvent=function(V){return N.H.useEffectEvent(V)},qt.useId=function(){return N.H.useId()},qt.useImperativeHandle=function(V,$,dt){return N.H.useImperativeHandle(V,$,dt)},qt.useInsertionEffect=function(V,$){return N.H.useInsertionEffect(V,$)},qt.useLayoutEffect=function(V,$){return N.H.useLayoutEffect(V,$)},qt.useMemo=function(V,$){return N.H.useMemo(V,$)},qt.useOptimistic=function(V,$){return N.H.useOptimistic(V,$)},qt.useReducer=function(V,$,dt){return N.H.useReducer(V,$,dt)},qt.useRef=function(V){return N.H.useRef(V)},qt.useState=function(V){return N.H.useState(V)},qt.useSyncExternalStore=function(V,$,dt){return N.H.useSyncExternalStore(V,$,dt)},qt.useTransition=function(){return N.H.useTransition()},qt.version="19.2.0",qt}var k0;function bm(){return k0||(k0=1,Id.exports=A1()),Id.exports}var zt=bm();const cr=T1(zt);var Nd={exports:{}},Ro={},Dd={exports:{}},Od={};var L0;function w1(){return L0||(L0=1,(function(s){function t(F,ot){var xt=F.length;F.push(ot);t:for(;0<xt;){var Xt=xt-1>>>1,se=F[Xt];if(0<o(se,ot))F[Xt]=ot,F[xt]=se,xt=Xt;else break t}}function i(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var ot=F[0],xt=F.pop();if(xt!==ot){F[0]=xt;t:for(var Xt=0,se=F.length,V=se>>>1;Xt<V;){var $=2*(Xt+1)-1,dt=F[$],J=$+1,jt=F[J];if(0>o(dt,xt))J<se&&0>o(jt,dt)?(F[Xt]=jt,F[J]=xt,Xt=J):(F[Xt]=dt,F[$]=xt,Xt=$);else if(J<se&&0>o(jt,xt))F[Xt]=jt,F[J]=xt,Xt=J;else break t}}return ot}function o(F,ot){var xt=F.sortIndex-ot.sortIndex;return xt!==0?xt:F.id-ot.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var _=[],y=[],S=1,A=null,x=3,q=!1,Y=!1,at=!1,nt=!1,ct=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;function wt(F){for(var ot=i(y);ot!==null;){if(ot.callback===null)a(y);else if(ot.startTime<=F)a(y),ot.sortIndex=ot.expirationTime,t(_,ot);else break;ot=i(y)}}function Qt(F){if(at=!1,wt(F),!Y)if(i(_)!==null)Y=!0,mt||(mt=!0,L());else{var ot=i(y);ot!==null&&ze(Qt,ot.startTime-F)}}var mt=!1,N=-1,w=5,C=-1;function D(){return nt?!0:!(s.unstable_now()-C<w)}function O(){if(nt=!1,mt){var F=s.unstable_now();C=F;var ot=!0;try{t:{Y=!1,at&&(at=!1,rt(N),N=-1),q=!0;var xt=x;try{e:{for(wt(F),A=i(_);A!==null&&!(A.expirationTime>F&&D());){var Xt=A.callback;if(typeof Xt=="function"){A.callback=null,x=A.priorityLevel;var se=Xt(A.expirationTime<=F);if(F=s.unstable_now(),typeof se=="function"){A.callback=se,wt(F),ot=!0;break e}A===i(_)&&a(_),wt(F)}else a(_);A=i(_)}if(A!==null)ot=!0;else{var V=i(y);V!==null&&ze(Qt,V.startTime-F),ot=!1}}break t}finally{A=null,x=xt,q=!1}ot=void 0}}finally{ot?L():mt=!1}}}var L;if(typeof _t=="function")L=function(){_t(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ue=R.port2;R.port1.onmessage=O,L=function(){ue.postMessage(null)}}else L=function(){ct(O,0)};function ze(F,ot){N=ct(function(){F(s.unstable_now())},ot)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(F){switch(x){case 1:case 2:case 3:var ot=3;break;default:ot=x}var xt=x;x=ot;try{return F()}finally{x=xt}},s.unstable_requestPaint=function(){nt=!0},s.unstable_runWithPriority=function(F,ot){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var xt=x;x=F;try{return ot()}finally{x=xt}},s.unstable_scheduleCallback=function(F,ot,xt){var Xt=s.unstable_now();switch(typeof xt=="object"&&xt!==null?(xt=xt.delay,xt=typeof xt=="number"&&0<xt?Xt+xt:Xt):xt=Xt,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=xt+se,F={id:S++,callback:ot,priorityLevel:F,startTime:xt,expirationTime:se,sortIndex:-1},xt>Xt?(F.sortIndex=xt,t(y,F),i(_)===null&&F===i(y)&&(at?(rt(N),N=-1):at=!0,ze(Qt,xt-Xt))):(F.sortIndex=se,t(_,F),Y||q||(Y=!0,mt||(mt=!0,L()))),F},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(F){var ot=x;return function(){var xt=x;x=ot;try{return F.apply(this,arguments)}finally{x=xt}}}})(Od)),Od}var P0;function x1(){return P0||(P0=1,Dd.exports=w1()),Dd.exports}var Md={exports:{}},xn={};var j0;function R1(){if(j0)return xn;j0=1;var s=bm();function t(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(_,y,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:_,containerInfo:y,implementation:S}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,xn.createPortal=function(_,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(_,y,null,S)},xn.flushSync=function(_){var y=f.T,S=a.p;try{if(f.T=null,a.p=2,_)return _()}finally{f.T=y,a.p=S,a.d.f()}},xn.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(_,y))},xn.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},xn.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var S=y.as,A=g(S,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?a.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:x,fetchPriority:q}):S==="script"&&a.d.X(_,{crossOrigin:A,integrity:x,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},xn.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=g(y.as,y.crossOrigin);a.d.M(_,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(_)},xn.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,A=g(S,y.crossOrigin);a.d.L(_,S,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},xn.preloadModule=function(_,y){if(typeof _=="string")if(y){var S=g(y.as,y.crossOrigin);a.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(_)},xn.requestFormReset=function(_){a.d.r(_)},xn.unstable_batchedUpdates=function(_,y){return _(y)},xn.useFormState=function(_,y,S){return f.H.useFormState(_,y,S)},xn.useFormStatus=function(){return f.H.useHostTransitionStatus()},xn.version="19.2.0",xn}var U0;function C1(){if(U0)return Md.exports;U0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Md.exports=R1(),Md.exports}var z0;function I1(){if(z0)return Ro;z0=1;var s=x1(),t=bm(),i=C1();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(c(e)!==e)throw Error(a(188))}function y(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(a(188));return n!==e?null:e}for(var r=e,l=n;;){var h=r.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===r)return _(h),e;if(d===l)return _(h),n;d=d.sibling}throw Error(a(188))}if(r.return!==l.return)r=h,l=d;else{for(var p=!1,T=h.child;T;){if(T===r){p=!0,r=h,l=d;break}if(T===l){p=!0,l=h,r=d;break}T=T.sibling}if(!p){for(T=d.child;T;){if(T===r){p=!0,r=d,l=h;break}if(T===l){p=!0,l=d,r=h;break}T=T.sibling}if(!p)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?e:n}function S(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=S(e),n!==null)return n;e=e.sibling}return null}var A=Object.assign,x=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),at=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),ct=Symbol.for("react.profiler"),rt=Symbol.for("react.consumer"),_t=Symbol.for("react.context"),wt=Symbol.for("react.forward_ref"),Qt=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case at:return"Fragment";case ct:return"Profiler";case nt:return"StrictMode";case Qt:return"Suspense";case mt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case _t:return e.displayName||"Context";case rt:return(e._context.displayName||"Context")+".Consumer";case wt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return n=e.displayName||null,n!==null?n:ue(e.type)||"Memo";case w:n=e._payload,e=e._init;try{return ue(e(n))}catch{}}return null}var ze=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt={pending:!1,data:null,method:null,action:null},Xt=[],se=-1;function V(e){return{current:e}}function $(e){0>se||(e.current=Xt[se],Xt[se]=null,se--)}function dt(e,n){se++,Xt[se]=e.current,e.current=n}var J=V(null),jt=V(null),Vt=V(null),$t=V(null);function Le(e,n){switch(dt(Vt,n),dt(jt,e),dt(J,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?e0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=e0(n),e=n0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(J),dt(J,e)}function gt(){$(J),$(jt),$(Vt)}function mn(e){e.memoizedState!==null&&dt($t,e);var n=J.current,r=n0(n,e.type);n!==r&&(dt(jt,e),dt(J,r))}function Vn(e){jt.current===e&&($(J),$(jt)),$t.current===e&&($($t),bo._currentValue=xt)}var Is,Ns;function kn(e){if(Is===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Is=n&&n[1]||"",Ns=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Is+e+Ns}var Ii=!1;function ns(e,n){if(!e||Ii)return"";Ii=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var B=G}Reflect.construct(e,[],W)}else{try{W.call()}catch(G){B=G}e.call(W.prototype)}}else{try{throw Error()}catch(G){B=G}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&B&&typeof G.stack=="string")return[G.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),p=d[0],T=d[1];if(p&&T){var I=p.split(`
`),z=T.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===z.length)for(l=I.length-1,h=z.length-1;1<=l&&0<=h&&I[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==z[h]){var Q=`
`+I[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=h);break}}}finally{Ii=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?kn(r):""}function Or(e,n){switch(e.tag){case 26:case 27:case 5:return kn(e.type);case 16:return kn("Lazy");case 13:return e.child!==n&&n!==null?kn("Suspense Fallback"):kn("Suspense");case 19:return kn("SuspenseList");case 0:case 15:return ns(e.type,!1);case 11:return ns(e.type.render,!1);case 1:return ns(e.type,!0);case 31:return kn("Activity");default:return""}}function Ds(e){try{var n="",r=null;do n+=Or(e,r),r=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Pe=Object.prototype.hasOwnProperty,Be=s.unstable_scheduleCallback,Ni=s.unstable_cancelCallback,Rl=s.unstable_shouldYield,Mr=s.unstable_requestPaint,Xe=s.unstable_now,Yt=s.unstable_getCurrentPriorityLevel,P=s.unstable_ImmediatePriority,tt=s.unstable_UserBlockingPriority,lt=s.unstable_NormalPriority,pt=s.unstable_LowPriority,Nt=s.unstable_IdlePriority,At=s.log,it=s.unstable_setDisableYieldValue,ht=null,X=null;function xe(e){if(typeof At=="function"&&it(e),X&&typeof X.setStrictMode=="function")try{X.setStrictMode(ht,e)}catch{}}var yt=Math.clz32?Math.clz32:st,ft=Math.log,Tt=Math.LN2;function st(e){return e>>>=0,e===0?32:31-(ft(e)/Tt|0)|0}var Ut=256,vt=262144,St=4194304;function kt(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fe(e,n,r){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=kt(l):(p&=T,p!==0?h=kt(p):r||(r=T&~e,r!==0&&(h=kt(r))))):(T=l&~d,T!==0?h=kt(T):p!==0?h=kt(p):r||(r=l&~e,r!==0&&(h=kt(r)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,r=n&-n,d>=r||d===32&&(r&4194048)!==0)?n:h}function Oe(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Qn(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var e=St;return St<<=1,(St&62914560)===0&&(St=4194304),e}function an(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function An(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ve(e,n,r,l,h,d){var p=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var T=e.entanglements,I=e.expirationTimes,z=e.hiddenUpdates;for(r=p&~r;0<r;){var Q=31-yt(r),W=1<<Q;T[Q]=0,I[Q]=-1;var B=z[Q];if(B!==null)for(z[Q]=null,Q=0;Q<B.length;Q++){var G=B[Q];G!==null&&(G.lane&=-536870913)}r&=~W}l!==0&&Me(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(p&~n))}function Me(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-yt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Re(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var l=31-yt(r),h=1<<l;h&n|e[l]&n&&(e[l]|=n),r&=~h}}function Ot(e,n){var r=n&-n;return r=(r&42)!==0?1:de(r),(r&(e.suspendedLanes|n))!==0?0:r}function de(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ee(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function wn(){var e=ot.p;return e!==0?e:(e=window.event,e===void 0?32:w0(e.type))}function Fe(e,n){var r=ot.p;try{return ot.p=e,n()}finally{ot.p=r}}var je=Math.random().toString(36).slice(2),me="__reactFiber$"+je,qe="__reactProps$"+je,Dn="__reactContainer$"+je,$n="__reactEvents$"+je,Vr="__reactListeners$"+je,lu="__reactHandles$"+je,ou="__reactResources$"+je,Di="__reactMarker$"+je;function ya(e){delete e[me],delete e[qe],delete e[$n],delete e[Vr],delete e[lu]}function Oi(e){var n=e[me];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Dn]||r[me]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=u0(e);e!==null;){if(r=e[me])return r;e=u0(e)}return n}e=r,r=e.parentNode}return null}function si(e){if(e=e[me]||e[Dn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Kn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function Mi(e){var n=e[ou];return n||(n=e[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function We(e){e[Di]=!0}var Cl=new Set,Il={};function Vi(e,n){ki(e,n),ki(e+"Capture",n)}function ki(e,n){for(Il[e]=n,e=0;e<n.length;e++)Cl.add(n[e])}var Nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dl={},Ol={};function uu(e){return Pe.call(Ol,e)?!0:Pe.call(Dl,e)?!1:Nl.test(e)?Ol[e]=!0:(Dl[e]=!0,!1)}function _a(e,n,r){if(uu(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Yn(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function Ze(e,n,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+l)}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Os(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ml(e,n,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(p){r=""+p,d.call(this,p)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(p){r=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function pe(e){if(!e._valueTracker){var n=Os(e)?"checked":"value";e._valueTracker=Ml(e,n,""+e[n])}}function kr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return e&&(l=Os(e)?e.checked?"true":"false":e.value),e=l,e!==r?(n.setValue(e),!0):!1}function Li(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Lr=/[\n"\\]/g;function Pn(e){return e.replace(Lr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function va(e,n,r,l,h,d,p,T){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+cn(n)):e.value!==""+cn(n)&&(e.value=""+cn(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?Vl(e,p,cn(n)):r!=null?Vl(e,p,cn(r)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+cn(T):e.removeAttribute("name")}function cu(e,n,r,l,h,d,p,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){pe(e);return}r=r!=null?""+cn(r):"",n=n!=null?""+cn(n):r,T||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),pe(e)}function Vl(e,n,r){n==="number"&&Li(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Ms(e,n,r,l){if(e=e.options,n){n={};for(var h=0;h<r.length;h++)n["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=n.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&l&&(e[r].defaultSelected=!0)}else{for(r=""+cn(r),n=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function hu(e,n,r){if(n!=null&&(n=""+cn(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+cn(r):""}function Vs(e,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(a(92));if(ze(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=cn(n),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),pe(e)}function jn(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kl(e,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,r):typeof r!="number"||r===0||fu.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function Ll(e,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&r[h]!==l&&kl(e,h,l)}else for(var d in n)n.hasOwnProperty(d)&&kl(e,d,n[d])}function Ea(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(e){return ks.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _i(){}var Pl=null;function ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ls=null,Pi=null;function Pr(e){var n=si(e);if(n&&(e=n.stateNode)){var r=e[qe]||null;t:switch(e=n.stateNode,n.type){case"input":if(va(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Pn(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var h=l[qe]||null;if(!h)throw Error(a(90));va(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===e.form&&kr(l)}break t;case"textarea":hu(e,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&Ms(e,!!r.multiple,n,!1)}}}var ba=!1;function Ps(e,n,r){if(ba)return e(n,r);ba=!0;try{var l=e(n);return l}finally{if(ba=!1,(Ls!==null||Pi!==null)&&(ac(),Ls&&(n=Ls,e=Pi,Pi=Ls=null,Pr(n),e)))for(n=0;n<e.length;n++)Pr(e[n])}}function vi(e,n){var r=e.stateNode;if(r===null)return null;var l=r[qe]||null;if(l===null)return null;r=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jr=!1;if(ai)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){jr=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch{jr=!1}var ji=null,jl=null,Ur=null;function Ul(){if(Ur)return Ur;var e,n=jl,r=n.length,l,h="value"in ji?ji.value:ji.textContent,d=h.length;for(e=0;e<r&&n[e]===h[e];e++);var p=r-e;for(l=1;l<=p&&n[r-l]===h[d-l];l++);return Ur=h.slice(e,1<l?1-l:void 0)}function zr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function is(){return!0}function Ei(){return!1}function gn(e){function n(r,l,h,d,p){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(r=e[T],this[T]=r?r(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?is:Ei,this.isPropagationStopped=Ei,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),n}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=gn(ss),js=A({},ss,{view:0,detail:0}),zl=gn(js),Us,Sa,zi,Aa=A({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zi&&(zi&&e.type==="mousemove"?(Us=e.screenX-zi.screenX,Sa=e.screenY-zi.screenY):Sa=Us=0,zi=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),Bl=gn(Aa),Br=A({},Aa,{dataTransfer:0}),mu=gn(Br),gu=A({},js,{relatedTarget:0}),qr=gn(gu),ql=A({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),pu=gn(ql),wa=A({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yu=gn(wa),_u=A({},ss,{data:0}),Bi=gn(_u),vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Tu[e])?!!n[e]:!1}function zs(){return bu}var On=A({},js,{key:function(e){if(e.key){var n=vu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=zr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(e){return e.type==="keypress"?zr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Su=gn(On),Au=A({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rs=gn(Au),u=A({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),m=gn(u),v=A({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=gn(v),j=A({},Aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H=gn(j),ut=A({},ss,{newState:0,oldState:0}),Gt=gn(ut),Qe=[9,13,27,32],ce=ai&&"CompositionEvent"in window,Ve=null;ai&&"documentMode"in document&&(Ve=document.documentMode);var li=ai&&"TextEvent"in window&&!Ve,qi=ai&&(!ce||Ve&&8<Ve&&11>=Ve),Ti=" ",bi=!1;function Hr(e,n){switch(e){case"keyup":return Qe.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ra=!1;function FT(e,n){switch(e){case"compositionend":return xa(n);case"keypress":return n.which!==32?null:(bi=!0,Ti);case"textInput":return e=n.data,e===Ti&&bi?null:e;default:return null}}function QT(e,n){if(Ra)return e==="compositionend"||!ce&&Hr(e,n)?(e=Ul(),Ur=jl=ji=null,Ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qi&&n.locale!=="ko"?null:n.data;default:return null}}var $T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!$T[e.type]:n==="textarea"}function dg(e,n,r,l){Ls?Pi?Pi.push(l):Pi=[l]:Ls=l,n=dc(n,"onChange"),0<n.length&&(r=new Ui("onChange","change",null,r,l),e.push({event:r,listeners:n}))}var Hl=null,Gl=null;function KT(e){Yy(e,0)}function wu(e){var n=Kn(e);if(kr(n))return e}function mg(e,n){if(e==="change")return n}var gg=!1;if(ai){var Vh;if(ai){var kh="oninput"in document;if(!kh){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),kh=typeof pg.oninput=="function"}Vh=kh}else Vh=!1;gg=Vh&&(!document.documentMode||9<document.documentMode)}function yg(){Hl&&(Hl.detachEvent("onpropertychange",_g),Gl=Hl=null)}function _g(e){if(e.propertyName==="value"&&wu(Gl)){var n=[];dg(n,Gl,e,ri(e)),Ps(KT,n)}}function YT(e,n,r){e==="focusin"?(yg(),Hl=n,Gl=r,Hl.attachEvent("onpropertychange",_g)):e==="focusout"&&yg()}function XT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wu(Gl)}function WT(e,n){if(e==="click")return wu(n)}function ZT(e,n){if(e==="input"||e==="change")return wu(n)}function JT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Xn=typeof Object.is=="function"?Object.is:JT;function Fl(e,n){if(Xn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!Pe.call(n,h)||!Xn(e[h],n[h]))return!1}return!0}function vg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Eg(e,n){var r=vg(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=n&&l>=n)return{node:r,offset:n-e};e=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=vg(r)}}function Tg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Tg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function bg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Li(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Li(e.document)}return n}function Lh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var tb=ai&&"documentMode"in document&&11>=document.documentMode,Ca=null,Ph=null,Ql=null,jh=!1;function Sg(e,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jh||Ca==null||Ca!==Li(l)||(l=Ca,"selectionStart"in l&&Lh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ql&&Fl(Ql,l)||(Ql=l,l=dc(Ph,"onSelect"),0<l.length&&(n=new Ui("onSelect","select",null,n,r),e.push({event:n,listeners:l}),n.target=Ca)))}function Gr(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Ia={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionrun:Gr("Transition","TransitionRun"),transitionstart:Gr("Transition","TransitionStart"),transitioncancel:Gr("Transition","TransitionCancel"),transitionend:Gr("Transition","TransitionEnd")},Uh={},Ag={};ai&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Fr(e){if(Uh[e])return Uh[e];if(!Ia[e])return e;var n=Ia[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Ag)return Uh[e]=n[r];return e}var wg=Fr("animationend"),xg=Fr("animationiteration"),Rg=Fr("animationstart"),eb=Fr("transitionrun"),nb=Fr("transitionstart"),ib=Fr("transitioncancel"),Cg=Fr("transitionend"),Ig=new Map,zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zh.push("scrollEnd");function Si(e,n){Ig.set(e,n),Vi(n,[e])}var xu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oi=[],Na=0,Bh=0;function Ru(){for(var e=Na,n=Bh=Na=0;n<e;){var r=oi[n];oi[n++]=null;var l=oi[n];oi[n++]=null;var h=oi[n];oi[n++]=null;var d=oi[n];if(oi[n++]=null,l!==null&&h!==null){var p=l.pending;p===null?h.next=h:(h.next=p.next,p.next=h),l.pending=h}d!==0&&Ng(r,h,d)}}function Cu(e,n,r,l){oi[Na++]=e,oi[Na++]=n,oi[Na++]=r,oi[Na++]=l,Bh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function qh(e,n,r,l){return Cu(e,n,r,l),Iu(e)}function Qr(e,n){return Cu(e,null,null,n),Iu(e)}function Ng(e,n,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var h=!1,d=e.return;d!==null;)d.childLanes|=r,l=d.alternate,l!==null&&(l.childLanes|=r),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-yt(r),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=r|536870912),d):null}function Iu(e){if(50<go)throw go=0,Zf=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Da={};function sb(e,n,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,n,r,l){return new sb(e,n,r,l)}function Hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function as(e,n){var r=e.alternate;return r===null?(r=Wn(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Dg(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Nu(e,n,r,l,h,d){var p=0;if(l=e,typeof e=="function")Hh(e)&&(p=1);else if(typeof e=="string")p=u1(e,r,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=Wn(31,r,n,h),e.elementType=C,e.lanes=d,e;case at:return $r(r.children,h,d,n);case nt:p=8,h|=24;break;case ct:return e=Wn(12,r,n,h|2),e.elementType=ct,e.lanes=d,e;case Qt:return e=Wn(13,r,n,h),e.elementType=Qt,e.lanes=d,e;case mt:return e=Wn(19,r,n,h),e.elementType=mt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _t:p=10;break t;case rt:p=9;break t;case wt:p=11;break t;case N:p=14;break t;case w:p=16,l=null;break t}p=29,r=Error(a(130,e===null?"null":typeof e,"")),l=null}return n=Wn(p,r,n,h),n.elementType=e,n.type=l,n.lanes=d,n}function $r(e,n,r,l){return e=Wn(7,e,l,n),e.lanes=r,e}function Gh(e,n,r){return e=Wn(6,e,null,n),e.lanes=r,e}function Og(e){var n=Wn(18,null,null,0);return n.stateNode=e,n}function Fh(e,n,r){return n=Wn(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Mg=new WeakMap;function ui(e,n){if(typeof e=="object"&&e!==null){var r=Mg.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Ds(n)},Mg.set(e,n),n)}return{value:e,source:n,stack:Ds(n)}}var Oa=[],Ma=0,Du=null,$l=0,ci=[],hi=0,Bs=null,Hi=1,Gi="";function ls(e,n){Oa[Ma++]=$l,Oa[Ma++]=Du,Du=e,$l=n}function Vg(e,n,r){ci[hi++]=Hi,ci[hi++]=Gi,ci[hi++]=Bs,Bs=e;var l=Hi;e=Gi;var h=32-yt(l)-1;l&=~(1<<h),r+=1;var d=32-yt(n)+h;if(30<d){var p=h-h%5;d=(l&(1<<p)-1).toString(32),l>>=p,h-=p,Hi=1<<32-yt(n)+h|r<<h|l,Gi=d+e}else Hi=1<<d|r<<h|l,Gi=e}function Qh(e){e.return!==null&&(ls(e,1),Vg(e,1,0))}function $h(e){for(;e===Du;)Du=Oa[--Ma],Oa[Ma]=null,$l=Oa[--Ma],Oa[Ma]=null;for(;e===Bs;)Bs=ci[--hi],ci[hi]=null,Gi=ci[--hi],ci[hi]=null,Hi=ci[--hi],ci[hi]=null}function kg(e,n){ci[hi++]=Hi,ci[hi++]=Gi,ci[hi++]=Bs,Hi=n.id,Gi=n.overflow,Bs=e}var pn=null,Ce=null,re=!1,qs=null,fi=!1,Kh=Error(a(519));function Hs(e){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(ui(n,e)),Kh}function Lg(e){var n=e.stateNode,r=e.type,l=e.memoizedProps;switch(n[me]=e,n[qe]=l,r){case"dialog":Zt("cancel",n),Zt("close",n);break;case"iframe":case"object":case"embed":Zt("load",n);break;case"video":case"audio":for(r=0;r<yo.length;r++)Zt(yo[r],n);break;case"source":Zt("error",n);break;case"img":case"image":case"link":Zt("error",n),Zt("load",n);break;case"details":Zt("toggle",n);break;case"input":Zt("invalid",n),cu(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Zt("invalid",n);break;case"textarea":Zt("invalid",n),Vs(n,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||Jy(n.textContent,r)?(l.popover!=null&&(Zt("beforetoggle",n),Zt("toggle",n)),l.onScroll!=null&&Zt("scroll",n),l.onScrollEnd!=null&&Zt("scrollend",n),l.onClick!=null&&(n.onclick=_i),n=!0):n=!1,n||Hs(e,!0)}function Pg(e){for(pn=e.return;pn;)switch(pn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:pn=pn.return}}function Va(e){if(e!==pn)return!1;if(!re)return Pg(e),re=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||dd(e.type,e.memoizedProps)),r=!r),r&&Ce&&Hs(e),Pg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Ce=o0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Ce=o0(e)}else n===27?(n=Ce,ir(e.type)?(e=_d,_d=null,Ce=e):Ce=n):Ce=pn?mi(e.stateNode.nextSibling):null;return!0}function Kr(){Ce=pn=null,re=!1}function Yh(){var e=qs;return e!==null&&(qn===null?qn=e:qn.push.apply(qn,e),qs=null),e}function Kl(e){qs===null?qs=[e]:qs.push(e)}var Xh=V(null),Yr=null,os=null;function Gs(e,n,r){dt(Xh,n._currentValue),n._currentValue=r}function us(e){e._currentValue=Xh.current,$(Xh)}function Wh(e,n,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===r)break;e=e.return}}function Zh(e,n,r,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var p=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var I=0;I<n.length;I++)if(T.context===n[I]){d.lanes|=r,T=d.alternate,T!==null&&(T.lanes|=r),Wh(d.return,r,e),l||(p=null);break t}d=T.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(a(341));p.lanes|=r,d=p.alternate,d!==null&&(d.lanes|=r),Wh(p,r,e),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===e){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function ka(e,n,r,l){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(a(387));if(p=p.memoizedProps,p!==null){var T=h.type;Xn(h.pendingProps.value,p.value)||(e!==null?e.push(T):e=[T])}}else if(h===$t.current){if(p=h.alternate,p===null)throw Error(a(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(bo):e=[bo])}h=h.return}e!==null&&Zh(n,e,r,l),n.flags|=262144}function Ou(e){for(e=e.firstContext;e!==null;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xr(e){Yr=e,os=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yn(e){return jg(Yr,e)}function Mu(e,n){return Yr===null&&Xr(e),jg(e,n)}function jg(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},os===null){if(e===null)throw Error(a(308));os=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else os=os.next=n;return r}var rb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},ab=s.unstable_scheduleCallback,lb=s.unstable_NormalPriority,Je={$$typeof:_t,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new rb,data:new Map,refCount:0}}function Yl(e){e.refCount--,e.refCount===0&&ab(lb,function(){e.controller.abort()})}var Xl=null,tf=0,La=0,Pa=null;function ob(e,n){if(Xl===null){var r=Xl=[];tf=0,La=sd(),Pa={status:"pending",value:void 0,then:function(l){r.push(l)}}}return tf++,n.then(Ug,Ug),n}function Ug(){if(--tf===0&&Xl!==null){Pa!==null&&(Pa.status="fulfilled");var e=Xl;Xl=null,La=0,Pa=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ub(e,n){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<r.length;h++)(0,r[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var zg=F.S;F.S=function(e,n){Sy=Xe(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&ob(e,n),zg!==null&&zg(e,n)};var Wr=V(null);function ef(){var e=Wr.current;return e!==null?e:we.pooledCache}function Vu(e,n){n===null?dt(Wr,Wr.current):dt(Wr,n.pool)}function Bg(){var e=ef();return e===null?null:{parent:Je._currentValue,pool:e}}var ja=Error(a(460)),nf=Error(a(474)),ku=Error(a(542)),Lu={then:function(){}};function qg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hg(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(_i,_i),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Fg(e),e;default:if(typeof n.status=="string")n.then(_i,_i);else{if(e=we,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Fg(e),e}throw Jr=n,ja}}function Zr(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Jr=r,ja):r}}var Jr=null;function Gg(){if(Jr===null)throw Error(a(459));var e=Jr;return Jr=null,e}function Fg(e){if(e===ja||e===ku)throw Error(a(483))}var Ua=null,Wl=0;function Pu(e){var n=Wl;return Wl+=1,Ua===null&&(Ua=[]),Hg(Ua,e,n)}function Zl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ju(e,n){throw n.$$typeof===x?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qg(e){function n(k,M){if(e){var U=k.deletions;U===null?(k.deletions=[M],k.flags|=16):U.push(M)}}function r(k,M){if(!e)return null;for(;M!==null;)n(k,M),M=M.sibling;return null}function l(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function h(k,M){return k=as(k,M),k.index=0,k.sibling=null,k}function d(k,M,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<M?(k.flags|=67108866,M):U):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function p(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function T(k,M,U,K){return M===null||M.tag!==6?(M=Gh(U,k.mode,K),M.return=k,M):(M=h(M,U),M.return=k,M)}function I(k,M,U,K){var It=U.type;return It===at?Q(k,M,U.props.children,K,U.key):M!==null&&(M.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===w&&Zr(It)===M.type)?(M=h(M,U.props),Zl(M,U),M.return=k,M):(M=Nu(U.type,U.key,U.props,null,k.mode,K),Zl(M,U),M.return=k,M)}function z(k,M,U,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Fh(U,k.mode,K),M.return=k,M):(M=h(M,U.children||[]),M.return=k,M)}function Q(k,M,U,K,It){return M===null||M.tag!==7?(M=$r(U,k.mode,K,It),M.return=k,M):(M=h(M,U),M.return=k,M)}function W(k,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Gh(""+M,k.mode,U),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case q:return U=Nu(M.type,M.key,M.props,null,k.mode,U),Zl(U,M),U.return=k,U;case Y:return M=Fh(M,k.mode,U),M.return=k,M;case w:return M=Zr(M),W(k,M,U)}if(ze(M)||L(M))return M=$r(M,k.mode,U,null),M.return=k,M;if(typeof M.then=="function")return W(k,Pu(M),U);if(M.$$typeof===_t)return W(k,Mu(k,M),U);ju(k,M)}return null}function B(k,M,U,K){var It=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return It!==null?null:T(k,M,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case q:return U.key===It?I(k,M,U,K):null;case Y:return U.key===It?z(k,M,U,K):null;case w:return U=Zr(U),B(k,M,U,K)}if(ze(U)||L(U))return It!==null?null:Q(k,M,U,K,null);if(typeof U.then=="function")return B(k,M,Pu(U),K);if(U.$$typeof===_t)return B(k,M,Mu(k,U),K);ju(k,U)}return null}function G(k,M,U,K,It){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(U)||null,T(M,k,""+K,It);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case q:return k=k.get(K.key===null?U:K.key)||null,I(M,k,K,It);case Y:return k=k.get(K.key===null?U:K.key)||null,z(M,k,K,It);case w:return K=Zr(K),G(k,M,U,K,It)}if(ze(K)||L(K))return k=k.get(U)||null,Q(M,k,K,It,null);if(typeof K.then=="function")return G(k,M,U,Pu(K),It);if(K.$$typeof===_t)return G(k,M,U,Mu(M,K),It);ju(M,K)}return null}function bt(k,M,U,K){for(var It=null,le=null,Rt=M,Kt=M=0,te=null;Rt!==null&&Kt<U.length;Kt++){Rt.index>Kt?(te=Rt,Rt=null):te=Rt.sibling;var oe=B(k,Rt,U[Kt],K);if(oe===null){Rt===null&&(Rt=te);break}e&&Rt&&oe.alternate===null&&n(k,Rt),M=d(oe,M,Kt),le===null?It=oe:le.sibling=oe,le=oe,Rt=te}if(Kt===U.length)return r(k,Rt),re&&ls(k,Kt),It;if(Rt===null){for(;Kt<U.length;Kt++)Rt=W(k,U[Kt],K),Rt!==null&&(M=d(Rt,M,Kt),le===null?It=Rt:le.sibling=Rt,le=Rt);return re&&ls(k,Kt),It}for(Rt=l(Rt);Kt<U.length;Kt++)te=G(Rt,k,Kt,U[Kt],K),te!==null&&(e&&te.alternate!==null&&Rt.delete(te.key===null?Kt:te.key),M=d(te,M,Kt),le===null?It=te:le.sibling=te,le=te);return e&&Rt.forEach(function(or){return n(k,or)}),re&&ls(k,Kt),It}function Mt(k,M,U,K){if(U==null)throw Error(a(151));for(var It=null,le=null,Rt=M,Kt=M=0,te=null,oe=U.next();Rt!==null&&!oe.done;Kt++,oe=U.next()){Rt.index>Kt?(te=Rt,Rt=null):te=Rt.sibling;var or=B(k,Rt,oe.value,K);if(or===null){Rt===null&&(Rt=te);break}e&&Rt&&or.alternate===null&&n(k,Rt),M=d(or,M,Kt),le===null?It=or:le.sibling=or,le=or,Rt=te}if(oe.done)return r(k,Rt),re&&ls(k,Kt),It;if(Rt===null){for(;!oe.done;Kt++,oe=U.next())oe=W(k,oe.value,K),oe!==null&&(M=d(oe,M,Kt),le===null?It=oe:le.sibling=oe,le=oe);return re&&ls(k,Kt),It}for(Rt=l(Rt);!oe.done;Kt++,oe=U.next())oe=G(Rt,k,Kt,oe.value,K),oe!==null&&(e&&oe.alternate!==null&&Rt.delete(oe.key===null?Kt:oe.key),M=d(oe,M,Kt),le===null?It=oe:le.sibling=oe,le=oe);return e&&Rt.forEach(function(E1){return n(k,E1)}),re&&ls(k,Kt),It}function Ae(k,M,U,K){if(typeof U=="object"&&U!==null&&U.type===at&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case q:t:{for(var It=U.key;M!==null;){if(M.key===It){if(It=U.type,It===at){if(M.tag===7){r(k,M.sibling),K=h(M,U.props.children),K.return=k,k=K;break t}}else if(M.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===w&&Zr(It)===M.type){r(k,M.sibling),K=h(M,U.props),Zl(K,U),K.return=k,k=K;break t}r(k,M);break}else n(k,M);M=M.sibling}U.type===at?(K=$r(U.props.children,k.mode,K,U.key),K.return=k,k=K):(K=Nu(U.type,U.key,U.props,null,k.mode,K),Zl(K,U),K.return=k,k=K)}return p(k);case Y:t:{for(It=U.key;M!==null;){if(M.key===It)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){r(k,M.sibling),K=h(M,U.children||[]),K.return=k,k=K;break t}else{r(k,M);break}else n(k,M);M=M.sibling}K=Fh(U,k.mode,K),K.return=k,k=K}return p(k);case w:return U=Zr(U),Ae(k,M,U,K)}if(ze(U))return bt(k,M,U,K);if(L(U)){if(It=L(U),typeof It!="function")throw Error(a(150));return U=It.call(U),Mt(k,M,U,K)}if(typeof U.then=="function")return Ae(k,M,Pu(U),K);if(U.$$typeof===_t)return Ae(k,M,Mu(k,U),K);ju(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(r(k,M.sibling),K=h(M,U),K.return=k,k=K):(r(k,M),K=Gh(U,k.mode,K),K.return=k,k=K),p(k)):r(k,M)}return function(k,M,U,K){try{Wl=0;var It=Ae(k,M,U,K);return Ua=null,It}catch(Rt){if(Rt===ja||Rt===ku)throw Rt;var le=Wn(29,Rt,null,k.mode);return le.lanes=K,le.return=k,le}finally{}}}var ta=Qg(!0),$g=Qg(!1),Fs=!1;function sf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $s(e,n,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(he&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Iu(e),Ng(e,null,r),n}return Cu(e,l,n,r),Iu(e)}function Jl(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Re(e,r)}}function af(e,n){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var p={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?h=d=p:d=d.next=p,r=r.next}while(r!==null);d===null?h=d=n:d=d.next=n}else h=d=n;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var lf=!1;function to(){if(lf){var e=Pa;if(e!==null)throw e}}function eo(e,n,r,l){lf=!1;var h=e.updateQueue;Fs=!1;var d=h.firstBaseUpdate,p=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,z=I.next;I.next=null,p===null?d=z:p.next=z,p=I;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==p&&(T===null?Q.firstBaseUpdate=z:T.next=z,Q.lastBaseUpdate=I))}if(d!==null){var W=h.baseState;p=0,Q=z=I=null,T=d;do{var B=T.lane&-536870913,G=B!==T.lane;if(G?(Jt&B)===B:(l&B)===B){B!==0&&B===La&&(lf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var bt=e,Mt=T;B=n;var Ae=r;switch(Mt.tag){case 1:if(bt=Mt.payload,typeof bt=="function"){W=bt.call(Ae,W,B);break t}W=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Mt.payload,B=typeof bt=="function"?bt.call(Ae,W,B):bt,B==null)break t;W=A({},W,B);break t;case 2:Fs=!0}}B=T.callback,B!==null&&(e.flags|=64,G&&(e.flags|=8192),G=h.callbacks,G===null?h.callbacks=[B]:G.push(B))}else G={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(z=Q=G,I=W):Q=Q.next=G,p|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Q===null&&(I=W),h.baseState=I,h.firstBaseUpdate=z,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Zs|=p,e.lanes=p,e.memoizedState=W}}function Kg(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function Yg(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Kg(r[e],n)}var za=V(null),Uu=V(0);function Xg(e,n){e=_s,dt(Uu,e),dt(za,n),_s=e|n.baseLanes}function of(){dt(Uu,_s),dt(za,za.current)}function uf(){_s=Uu.current,$(za),$(Uu)}var Zn=V(null),di=null;function Ks(e){var n=e.alternate;dt($e,$e.current&1),dt(Zn,e),di===null&&(n===null||za.current!==null||n.memoizedState!==null)&&(di=e)}function cf(e){dt($e,$e.current),dt(Zn,e),di===null&&(di=e)}function Wg(e){e.tag===22?(dt($e,$e.current),dt(Zn,e),di===null&&(di=e)):Ys()}function Ys(){dt($e,$e.current),dt(Zn,Zn.current)}function Jn(e){$(Zn),di===e&&(di=null),$($e)}var $e=V(0);function zu(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||pd(r)||yd(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var cs=0,Ft=null,be=null,tn=null,Bu=!1,Ba=!1,ea=!1,qu=0,no=0,qa=null,cb=0;function He(){throw Error(a(321))}function hf(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Xn(e[r],n[r]))return!1;return!0}function ff(e,n,r,l,h,d){return cs=d,Ft=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=e===null||e.memoizedState===null?Vp:Rf,ea=!1,d=r(l,h),ea=!1,Ba&&(d=Jg(n,r,l,h)),Zg(e),d}function Zg(e){F.H=ro;var n=be!==null&&be.next!==null;if(cs=0,tn=be=Ft=null,Bu=!1,no=0,qa=null,n)throw Error(a(300));e===null||en||(e=e.dependencies,e!==null&&Ou(e)&&(en=!0))}function Jg(e,n,r,l){Ft=e;var h=0;do{if(Ba&&(qa=null),no=0,Ba=!1,25<=h)throw Error(a(301));if(h+=1,tn=be=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=kp,d=n(r,l)}while(Ba);return d}function hb(){var e=F.H,n=e.useState()[0];return n=typeof n.then=="function"?io(n):n,e=e.useState()[0],(be!==null?be.memoizedState:null)!==e&&(Ft.flags|=1024),n}function df(){var e=qu!==0;return qu=0,e}function mf(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function gf(e){if(Bu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Bu=!1}cs=0,tn=be=Ft=null,Ba=!1,no=qu=0,qa=null}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ft.memoizedState=tn=e:tn=tn.next=e,tn}function Ke(){if(be===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var n=tn===null?Ft.memoizedState:tn.next;if(n!==null)tn=n,be=e;else{if(e===null)throw Ft.alternate===null?Error(a(467)):Error(a(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},tn===null?Ft.memoizedState=tn=e:tn=tn.next=e}return tn}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function io(e){var n=no;return no+=1,qa===null&&(qa=[]),e=Hg(qa,e,n),n=Ft,(tn===null?n.memoizedState:tn.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?Vp:Rf),e}function Gu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return io(e);if(e.$$typeof===_t)return yn(e)}throw Error(a(438,String(e)))}function pf(e){var n=null,r=Ft.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=Ft.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Hu(),Ft.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),l=0;l<e;l++)r[l]=D;return n.index++,r}function hs(e,n){return typeof n=="function"?n(e):n}function Fu(e){var n=Ke();return yf(n,be,e)}function yf(e,n,r){var l=e.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var p=h.next;h.next=d.next,d.next=p}n.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var T=p=null,I=null,z=n,Q=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Jt&W)===W:(cs&W)===W){var B=z.revertLane;if(B===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===La&&(Q=!0);else if((cs&B)===B){z=z.next,B===La&&(Q=!0);continue}else W={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(T=I=W,p=d):I=I.next=W,Ft.lanes|=B,Zs|=B;W=z.action,ea&&r(d,W),d=z.hasEagerState?z.eagerState:r(d,W)}else B={lane:W,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(T=I=B,p=d):I=I.next=B,Ft.lanes|=W,Zs|=W;z=z.next}while(z!==null&&z!==n);if(I===null?p=d:I.next=T,!Xn(d,e.memoizedState)&&(en=!0,Q&&(r=Pa,r!==null)))throw r;e.memoizedState=d,e.baseState=p,e.baseQueue=I,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function _f(e){var n=Ke(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var l=r.dispatch,h=r.pending,d=n.memoizedState;if(h!==null){r.pending=null;var p=h=h.next;do d=e(d,p.action),p=p.next;while(p!==h);Xn(d,n.memoizedState)||(en=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),r.lastRenderedState=d}return[d,l]}function tp(e,n,r){var l=Ft,h=Ke(),d=re;if(d){if(r===void 0)throw Error(a(407));r=r()}else r=n();var p=!Xn((be||h).memoizedState,r);if(p&&(h.memoizedState=r,en=!0),h=h.queue,Tf(ip.bind(null,l,h,e),[e]),h.getSnapshot!==n||p||tn!==null&&tn.memoizedState.tag&1){if(l.flags|=2048,Ha(9,{destroy:void 0},np.bind(null,l,h,r,n),null),we===null)throw Error(a(349));d||(cs&127)!==0||ep(l,n,r)}return r}function ep(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Ft.updateQueue,n===null?(n=Hu(),Ft.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function np(e,n,r,l){n.value=r,n.getSnapshot=l,sp(n)&&rp(e)}function ip(e,n,r){return r(function(){sp(n)&&rp(e)})}function sp(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Xn(e,r)}catch{return!0}}function rp(e){var n=Qr(e,2);n!==null&&Hn(n,e,2)}function vf(e){var n=Mn();if(typeof e=="function"){var r=e;if(e=r(),ea){xe(!0);try{r()}finally{xe(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:e},n}function ap(e,n,r,l){return e.baseState=r,yf(e,be,typeof l=="function"?l:hs)}function fb(e,n,r,l,h){if(Ku(e))throw Error(a(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};F.T!==null?r(!0):d.isTransition=!1,l(d),r=n.pending,r===null?(d.next=n.pending=d,lp(n,d)):(d.next=r.next,n.pending=r.next=d)}}function lp(e,n){var r=n.action,l=n.payload,h=e.state;if(n.isTransition){var d=F.T,p={};F.T=p;try{var T=r(h,l),I=F.S;I!==null&&I(p,T),op(e,n,T)}catch(z){Ef(e,n,z)}finally{d!==null&&p.types!==null&&(d.types=p.types),F.T=d}}else try{d=r(h,l),op(e,n,d)}catch(z){Ef(e,n,z)}}function op(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){up(e,n,l)},function(l){return Ef(e,n,l)}):up(e,n,r)}function up(e,n,r){n.status="fulfilled",n.value=r,cp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,lp(e,r)))}function Ef(e,n,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,cp(n),n=n.next;while(n!==l)}e.action=null}function cp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function hp(e,n){return n}function fp(e,n){if(re){var r=we.formState;if(r!==null){t:{var l=Ft;if(re){if(Ce){e:{for(var h=Ce,d=fi;h.nodeType!==8;){if(!d){h=null;break e}if(h=mi(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Ce=mi(h.nextSibling),l=h.data==="F!";break t}}Hs(l)}l=!1}l&&(n=r[0])}}return r=Mn(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:n},r.queue=l,r=Dp.bind(null,Ft,l),l.dispatch=r,l=vf(!1),d=xf.bind(null,Ft,!1,l.queue),l=Mn(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,r=fb.bind(null,Ft,h,d,r),h.dispatch=r,l.memoizedState=e,[n,r,!1]}function dp(e){var n=Ke();return mp(n,be,e)}function mp(e,n,r){if(n=yf(e,n,hp)[0],e=Fu(hs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=io(n)}catch(p){throw p===ja?ku:p}else l=n;n=Ke();var h=n.queue,d=h.dispatch;return r!==n.memoizedState&&(Ft.flags|=2048,Ha(9,{destroy:void 0},db.bind(null,h,r),null)),[l,d,e]}function db(e,n){e.action=n}function gp(e){var n=Ke(),r=be;if(r!==null)return mp(n,r,e);Ke(),n=n.memoizedState,r=Ke();var l=r.queue.dispatch;return r.memoizedState=e,[n,l,!1]}function Ha(e,n,r,l){return e={tag:e,create:r,deps:l,inst:n,next:null},n=Ft.updateQueue,n===null&&(n=Hu(),Ft.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,n.lastEffect=e),e}function pp(){return Ke().memoizedState}function Qu(e,n,r,l){var h=Mn();Ft.flags|=e,h.memoizedState=Ha(1|n,{destroy:void 0},r,l===void 0?null:l)}function $u(e,n,r,l){var h=Ke();l=l===void 0?null:l;var d=h.memoizedState.inst;be!==null&&l!==null&&hf(l,be.memoizedState.deps)?h.memoizedState=Ha(n,d,r,l):(Ft.flags|=e,h.memoizedState=Ha(1|n,d,r,l))}function yp(e,n){Qu(8390656,8,e,n)}function Tf(e,n){$u(2048,8,e,n)}function mb(e){Ft.flags|=4;var n=Ft.updateQueue;if(n===null)n=Hu(),Ft.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function _p(e){var n=Ke().memoizedState;return mb({ref:n,nextImpl:e}),function(){if((he&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function vp(e,n){return $u(4,2,e,n)}function Ep(e,n){return $u(4,4,e,n)}function Tp(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function bp(e,n,r){r=r!=null?r.concat([e]):null,$u(4,4,Tp.bind(null,n,e),r)}function bf(){}function Sp(e,n){var r=Ke();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&hf(n,l[1])?l[0]:(r.memoizedState=[e,n],e)}function Ap(e,n){var r=Ke();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&hf(n,l[1]))return l[0];if(l=e(),ea){xe(!0);try{e()}finally{xe(!1)}}return r.memoizedState=[l,n],l}function Sf(e,n,r){return r===void 0||(cs&1073741824)!==0&&(Jt&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=wy(),Ft.lanes|=e,Zs|=e,r)}function wp(e,n,r,l){return Xn(r,n)?r:za.current!==null?(e=Sf(e,r,l),Xn(e,n)||(en=!0),e):(cs&42)===0||(cs&1073741824)!==0&&(Jt&261930)===0?(en=!0,e.memoizedState=r):(e=wy(),Ft.lanes|=e,Zs|=e,n)}function xp(e,n,r,l,h){var d=ot.p;ot.p=d!==0&&8>d?d:8;var p=F.T,T={};F.T=T,xf(e,!1,n,r);try{var I=h(),z=F.S;if(z!==null&&z(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=ub(I,l);so(e,n,Q,ni(e))}else so(e,n,l,ni(e))}catch(W){so(e,n,{then:function(){},status:"rejected",reason:W},ni())}finally{ot.p=d,p!==null&&T.types!==null&&(p.types=T.types),F.T=p}}function gb(){}function Af(e,n,r,l){if(e.tag!==5)throw Error(a(476));var h=Rp(e).queue;xp(e,h,n,xt,r===null?gb:function(){return Cp(e),r(l)})}function Rp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:xt,baseState:xt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:xt},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Cp(e){var n=Rp(e);n.next===null&&(n=e.alternate.memoizedState),so(e,n.next.queue,{},ni())}function wf(){return yn(bo)}function Ip(){return Ke().memoizedState}function Np(){return Ke().memoizedState}function pb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=ni();e=Qs(r);var l=$s(n,e,r);l!==null&&(Hn(l,n,r),Jl(l,n,r)),n={cache:Jh()},e.payload=n;return}n=n.return}}function yb(e,n,r){var l=ni();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ku(e)?Op(n,r):(r=qh(e,n,r,l),r!==null&&(Hn(r,e,l),Mp(r,n,l)))}function Dp(e,n,r){var l=ni();so(e,n,r,l)}function so(e,n,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ku(e))Op(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var p=n.lastRenderedState,T=d(p,r);if(h.hasEagerState=!0,h.eagerState=T,Xn(T,p))return Cu(e,n,h,0),we===null&&Ru(),!1}catch{}finally{}if(r=qh(e,n,h,l),r!==null)return Hn(r,e,l),Mp(r,n,l),!0}return!1}function xf(e,n,r,l){if(l={lane:2,revertLane:sd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ku(e)){if(n)throw Error(a(479))}else n=qh(e,r,l,2),n!==null&&Hn(n,e,2)}function Ku(e){var n=e.alternate;return e===Ft||n!==null&&n===Ft}function Op(e,n){Ba=Bu=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Mp(e,n,r){if((r&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Re(e,r)}}var ro={readContext:yn,use:Gu,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};ro.useEffectEvent=He;var Vp={readContext:yn,use:Gu,useCallback:function(e,n){return Mn().memoizedState=[e,n===void 0?null:n],e},useContext:yn,useEffect:yp,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,Qu(4194308,4,Tp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return Qu(4194308,4,e,n)},useInsertionEffect:function(e,n){Qu(4,2,e,n)},useMemo:function(e,n){var r=Mn();n=n===void 0?null:n;var l=e();if(ea){xe(!0);try{e()}finally{xe(!1)}}return r.memoizedState=[l,n],l},useReducer:function(e,n,r){var l=Mn();if(r!==void 0){var h=r(n);if(ea){xe(!0);try{r(n)}finally{xe(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=yb.bind(null,Ft,e),[l.memoizedState,e]},useRef:function(e){var n=Mn();return e={current:e},n.memoizedState=e},useState:function(e){e=vf(e);var n=e.queue,r=Dp.bind(null,Ft,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:bf,useDeferredValue:function(e,n){var r=Mn();return Sf(r,e,n)},useTransition:function(){var e=vf(!1);return e=xp.bind(null,Ft,e.queue,!0,!1),Mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var l=Ft,h=Mn();if(re){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),we===null)throw Error(a(349));(Jt&127)!==0||ep(l,n,r)}h.memoizedState=r;var d={value:r,getSnapshot:n};return h.queue=d,yp(ip.bind(null,l,d,e),[e]),l.flags|=2048,Ha(9,{destroy:void 0},np.bind(null,l,d,r,n),null),r},useId:function(){var e=Mn(),n=we.identifierPrefix;if(re){var r=Gi,l=Hi;r=(l&~(1<<32-yt(l)-1)).toString(32)+r,n="_"+n+"R_"+r,r=qu++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=cb++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:wf,useFormState:fp,useActionState:fp,useOptimistic:function(e){var n=Mn();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=xf.bind(null,Ft,!0,r),r.dispatch=n,[e,n]},useMemoCache:pf,useCacheRefresh:function(){return Mn().memoizedState=pb.bind(null,Ft)},useEffectEvent:function(e){var n=Mn(),r={impl:e};return n.memoizedState=r,function(){if((he&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Rf={readContext:yn,use:Gu,useCallback:Sp,useContext:yn,useEffect:Tf,useImperativeHandle:bp,useInsertionEffect:vp,useLayoutEffect:Ep,useMemo:Ap,useReducer:Fu,useRef:pp,useState:function(){return Fu(hs)},useDebugValue:bf,useDeferredValue:function(e,n){var r=Ke();return wp(r,be.memoizedState,e,n)},useTransition:function(){var e=Fu(hs)[0],n=Ke().memoizedState;return[typeof e=="boolean"?e:io(e),n]},useSyncExternalStore:tp,useId:Ip,useHostTransitionStatus:wf,useFormState:dp,useActionState:dp,useOptimistic:function(e,n){var r=Ke();return ap(r,be,e,n)},useMemoCache:pf,useCacheRefresh:Np};Rf.useEffectEvent=_p;var kp={readContext:yn,use:Gu,useCallback:Sp,useContext:yn,useEffect:Tf,useImperativeHandle:bp,useInsertionEffect:vp,useLayoutEffect:Ep,useMemo:Ap,useReducer:_f,useRef:pp,useState:function(){return _f(hs)},useDebugValue:bf,useDeferredValue:function(e,n){var r=Ke();return be===null?Sf(r,e,n):wp(r,be.memoizedState,e,n)},useTransition:function(){var e=_f(hs)[0],n=Ke().memoizedState;return[typeof e=="boolean"?e:io(e),n]},useSyncExternalStore:tp,useId:Ip,useHostTransitionStatus:wf,useFormState:gp,useActionState:gp,useOptimistic:function(e,n){var r=Ke();return be!==null?ap(r,be,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:pf,useCacheRefresh:Np};kp.useEffectEvent=_p;function Cf(e,n,r,l){n=e.memoizedState,r=r(l,n),r=r==null?n:A({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var If={enqueueSetState:function(e,n,r){e=e._reactInternals;var l=ni(),h=Qs(l);h.payload=n,r!=null&&(h.callback=r),n=$s(e,h,l),n!==null&&(Hn(n,e,l),Jl(n,e,l))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var l=ni(),h=Qs(l);h.tag=1,h.payload=n,r!=null&&(h.callback=r),n=$s(e,h,l),n!==null&&(Hn(n,e,l),Jl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=ni(),l=Qs(r);l.tag=2,n!=null&&(l.callback=n),n=$s(e,l,r),n!==null&&(Hn(n,e,r),Jl(n,e,r))}};function Lp(e,n,r,l,h,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,p):n.prototype&&n.prototype.isPureReactComponent?!Fl(r,l)||!Fl(h,d):!0}function Pp(e,n,r,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==e&&If.enqueueReplaceState(n,n.state,null)}function na(e,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(e=e.defaultProps){r===n&&(r=A({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}function jp(e){xu(e)}function Up(e){console.error(e)}function zp(e){xu(e)}function Yu(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Bp(e,n,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Nf(e,n,r){return r=Qs(r),r.tag=3,r.payload={element:null},r.callback=function(){Yu(e,n)},r}function qp(e){return e=Qs(e),e.tag=3,e}function Hp(e,n,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Bp(n,r,l)}}var p=r.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Bp(n,r,l),typeof h!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function _b(e,n,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&ka(n,r,h,!0),r=Zn.current,r!==null){switch(r.tag){case 31:case 13:return di===null?lc():r.alternate===null&&Ge===0&&(Ge=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===Lu?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),ed(e,l,h)),!1;case 22:return r.flags|=65536,l===Lu?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),ed(e,l,h)),!1}throw Error(a(435,r.tag))}return ed(e,l,h),lc(),!1}if(re)return n=Zn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Kh&&(e=Error(a(422),{cause:l}),Kl(ui(e,r)))):(l!==Kh&&(n=Error(a(423),{cause:l}),Kl(ui(n,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=ui(l,r),h=Nf(e.stateNode,l,h),af(e,h),Ge!==4&&(Ge=2)),!1;var d=Error(a(520),{cause:l});if(d=ui(d,r),mo===null?mo=[d]:mo.push(d),Ge!==4&&(Ge=2),n===null)return!0;l=ui(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=Nf(r.stateNode,l,e),af(r,e),!1;case 1:if(n=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Js===null||!Js.has(d))))return r.flags|=65536,h&=-h,r.lanes|=h,h=qp(h),Hp(h,e,r,l),af(r,h),!1}r=r.return}while(r!==null);return!1}var Df=Error(a(461)),en=!1;function _n(e,n,r,l){n.child=e===null?$g(n,null,r,l):ta(n,e.child,r,l)}function Gp(e,n,r,l,h){r=r.render;var d=n.ref;if("ref"in l){var p={};for(var T in l)T!=="ref"&&(p[T]=l[T])}else p=l;return Xr(n),l=ff(e,n,r,p,d,h),T=df(),e!==null&&!en?(mf(e,n,h),fs(e,n,h)):(re&&T&&Qh(n),n.flags|=1,_n(e,n,l,h),n.child)}function Fp(e,n,r,l,h){if(e===null){var d=r.type;return typeof d=="function"&&!Hh(d)&&d.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=d,Qp(e,n,d,l,h)):(e=Nu(r.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!Uf(e,h)){var p=d.memoizedProps;if(r=r.compare,r=r!==null?r:Fl,r(p,l)&&e.ref===n.ref)return fs(e,n,h)}return n.flags|=1,e=as(d,l),e.ref=n.ref,e.return=n,n.child=e}function Qp(e,n,r,l,h){if(e!==null){var d=e.memoizedProps;if(Fl(d,l)&&e.ref===n.ref)if(en=!1,n.pendingProps=l=d,Uf(e,h))(e.flags&131072)!==0&&(en=!0);else return n.lanes=e.lanes,fs(e,n,h)}return Of(e,n,r,l,h)}function $p(e,n,r,l){var h=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|r:r,e!==null){for(l=n.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,n.child=null;return Kp(e,n,d,r,l)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vu(n,d!==null?d.cachePool:null),d!==null?Xg(n,d):of(),Wg(n);else return l=n.lanes=536870912,Kp(e,n,d!==null?d.baseLanes|r:r,r,l)}else d!==null?(Vu(n,d.cachePool),Xg(n,d),Ys(),n.memoizedState=null):(e!==null&&Vu(n,null),of(),Ys());return _n(e,n,h,r),n.child}function ao(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Kp(e,n,r,l,h){var d=ef();return d=d===null?null:{parent:Je._currentValue,pool:d},n.memoizedState={baseLanes:r,cachePool:d},e!==null&&Vu(n,null),of(),Wg(n),e!==null&&ka(e,n,l,!0),n.childLanes=h,null}function Xu(e,n){return n=Zu({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Yp(e,n,r){return ta(n,e.child,null,r),e=Xu(n,n.pendingProps),e.flags|=2,Jn(n),n.memoizedState=null,e}function vb(e,n,r){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(re){if(l.mode==="hidden")return e=Xu(n,l),n.lanes=536870912,ao(null,e);if(cf(n),(e=Ce)?(e=l0(e,fi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Bs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},r=Og(e),r.return=n,n.child=r,pn=n,Ce=null)):e=null,e===null)throw Hs(n);return n.lanes=536870912,null}return Xu(n,l)}var d=e.memoizedState;if(d!==null){var p=d.dehydrated;if(cf(n),h)if(n.flags&256)n.flags&=-257,n=Yp(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(a(558));else if(en||ka(e,n,r,!1),h=(r&e.childLanes)!==0,en||h){if(l=we,l!==null&&(p=Ot(l,r),p!==0&&p!==d.retryLane))throw d.retryLane=p,Qr(e,p),Hn(l,e,p),Df;lc(),n=Yp(e,n,r)}else e=d.treeContext,Ce=mi(p.nextSibling),pn=n,re=!0,qs=null,fi=!1,e!==null&&kg(n,e),n=Xu(n,l),n.flags|=4096;return n}return e=as(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Wu(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Of(e,n,r,l,h){return Xr(n),r=ff(e,n,r,l,void 0,h),l=df(),e!==null&&!en?(mf(e,n,h),fs(e,n,h)):(re&&l&&Qh(n),n.flags|=1,_n(e,n,r,h),n.child)}function Xp(e,n,r,l,h,d){return Xr(n),n.updateQueue=null,r=Jg(n,l,r,h),Zg(e),l=df(),e!==null&&!en?(mf(e,n,d),fs(e,n,d)):(re&&l&&Qh(n),n.flags|=1,_n(e,n,r,d),n.child)}function Wp(e,n,r,l,h){if(Xr(n),n.stateNode===null){var d=Da,p=r.contextType;typeof p=="object"&&p!==null&&(d=yn(p)),d=new r(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=If,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},sf(n),p=r.contextType,d.context=typeof p=="object"&&p!==null?yn(p):Da,d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Cf(n,r,p,l),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&If.enqueueReplaceState(d,d.state,null),eo(n,l,d,h),to(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,I=na(r,T);d.props=I;var z=d.context,Q=r.contextType;p=Da,typeof Q=="object"&&Q!==null&&(p=yn(Q));var W=r.getDerivedStateFromProps;Q=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==p)&&Pp(n,d,l,p),Fs=!1;var B=n.memoizedState;d.state=B,eo(n,l,d,h),to(),z=n.memoizedState,T||B!==z||Fs?(typeof W=="function"&&(Cf(n,r,W,l),z=n.memoizedState),(I=Fs||Lp(n,r,I,l,B,z,p))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=z),d.props=l,d.state=z,d.context=p,l=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,rf(e,n),p=n.memoizedProps,Q=na(r,p),d.props=Q,W=n.pendingProps,B=d.context,z=r.contextType,I=Da,typeof z=="object"&&z!==null&&(I=yn(z)),T=r.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==W||B!==I)&&Pp(n,d,l,I),Fs=!1,B=n.memoizedState,d.state=B,eo(n,l,d,h),to();var G=n.memoizedState;p!==W||B!==G||Fs||e!==null&&e.dependencies!==null&&Ou(e.dependencies)?(typeof T=="function"&&(Cf(n,r,T,l),G=n.memoizedState),(Q=Fs||Lp(n,r,Q,l,B,G,I)||e!==null&&e.dependencies!==null&&Ou(e.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=G),d.props=l,d.state=G,d.context=I,l=Q):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,Wu(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=ta(n,e.child,null,h),n.child=ta(n,null,r,h)):_n(e,n,r,h),n.memoizedState=d.state,e=n.child):e=fs(e,n,h),e}function Zp(e,n,r,l){return Kr(),n.flags|=256,_n(e,n,r,l),n.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vf(e){return{baseLanes:e,cachePool:Bg()}}function kf(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=ei),e}function Jp(e,n,r){var l=n.pendingProps,h=!1,d=(n.flags&128)!==0,p;if((p=d)||(p=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),p&&(h=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(re){if(h?Ks(n):Ys(),(e=Ce)?(e=l0(e,fi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Bs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},r=Og(e),r.return=n,n.child=r,pn=n,Ce=null)):e=null,e===null)throw Hs(n);return yd(e)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(Ys(),h=n.mode,T=Zu({mode:"hidden",children:T},h),l=$r(l,h,r,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=Vf(r),l.childLanes=kf(e,p,r),n.memoizedState=Mf,ao(null,l)):(Ks(n),Lf(n,T))}var I=e.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(d)n.flags&256?(Ks(n),n.flags&=-257,n=Pf(e,n,r)):n.memoizedState!==null?(Ys(),n.child=e.child,n.flags|=128,n=null):(Ys(),T=l.fallback,h=n.mode,l=Zu({mode:"visible",children:l.children},h),T=$r(T,h,r,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,ta(n,e.child,null,r),l=n.child,l.memoizedState=Vf(r),l.childLanes=kf(e,p,r),n.memoizedState=Mf,n=ao(null,l));else if(Ks(n),yd(T)){if(p=T.nextSibling&&T.nextSibling.dataset,p)var z=p.dgst;p=z,l=Error(a(419)),l.stack="",l.digest=p,Kl({value:l,source:null,stack:null}),n=Pf(e,n,r)}else if(en||ka(e,n,r,!1),p=(r&e.childLanes)!==0,en||p){if(p=we,p!==null&&(l=Ot(p,r),l!==0&&l!==I.retryLane))throw I.retryLane=l,Qr(e,l),Hn(p,e,l),Df;pd(T)||lc(),n=Pf(e,n,r)}else pd(T)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,Ce=mi(T.nextSibling),pn=n,re=!0,qs=null,fi=!1,e!==null&&kg(n,e),n=Lf(n,l.children),n.flags|=4096);return n}return h?(Ys(),T=l.fallback,h=n.mode,I=e.child,z=I.sibling,l=as(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,z!==null?T=as(z,T):(T=$r(T,h,r,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,ao(null,l),l=n.child,T=e.child.memoizedState,T===null?T=Vf(r):(h=T.cachePool,h!==null?(I=Je._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=Bg(),T={baseLanes:T.baseLanes|r,cachePool:h}),l.memoizedState=T,l.childLanes=kf(e,p,r),n.memoizedState=Mf,ao(e.child,l)):(Ks(n),r=e.child,e=r.sibling,r=as(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=r,n.memoizedState=null,r)}function Lf(e,n){return n=Zu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Zu(e,n){return e=Wn(22,e,null,n),e.lanes=0,e}function Pf(e,n,r){return ta(n,e.child,null,r),e=Lf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ty(e,n,r){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Wh(e.return,n,r)}function jf(e,n,r,l,h,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:d}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=r,p.tailMode=h,p.treeForkCount=d)}function ey(e,n,r){var l=n.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var p=$e.current,T=(p&2)!==0;if(T?(p=p&1|2,n.flags|=128):p&=1,dt($e,p),_n(e,n,l,r),l=re?$l:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ty(e,r,n);else if(e.tag===19)ty(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(r=n.child,h=null;r!==null;)e=r.alternate,e!==null&&zu(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=n.child,n.child=null):(h=r.sibling,r.sibling=null),jf(n,!1,h,r,d,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&zu(e)===null){n.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}jf(n,!0,r,null,d,l);break;case"together":jf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function fs(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Zs|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(ka(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,r=as(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=as(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Uf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ou(e)))}function Eb(e,n,r){switch(n.tag){case 3:Le(n,n.stateNode.containerInfo),Gs(n,Je,e.memoizedState.cache),Kr();break;case 27:case 5:mn(n);break;case 4:Le(n,n.stateNode.containerInfo);break;case 10:Gs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,cf(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ks(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Jp(e,n,r):(Ks(n),e=fs(e,n,r),e!==null?e.sibling:null);Ks(n);break;case 19:var h=(e.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(ka(e,n,r,!1),l=(r&n.childLanes)!==0),h){if(l)return ey(e,n,r);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),dt($e,$e.current),l)break;return null;case 22:return n.lanes=0,$p(e,n,r,n.pendingProps);case 24:Gs(n,Je,e.memoizedState.cache)}return fs(e,n,r)}function ny(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)en=!0;else{if(!Uf(e,r)&&(n.flags&128)===0)return en=!1,Eb(e,n,r);en=(e.flags&131072)!==0}else en=!1,re&&(n.flags&1048576)!==0&&Vg(n,$l,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=Zr(n.elementType),n.type=e,typeof e=="function")Hh(e)?(l=na(e,l),n.tag=1,n=Wp(null,n,e,l,r)):(n.tag=0,n=Of(null,n,e,l,r));else{if(e!=null){var h=e.$$typeof;if(h===wt){n.tag=11,n=Gp(null,n,e,l,r);break t}else if(h===N){n.tag=14,n=Fp(null,n,e,l,r);break t}}throw n=ue(e)||e,Error(a(306,n,""))}}return n;case 0:return Of(e,n,n.type,n.pendingProps,r);case 1:return l=n.type,h=na(l,n.pendingProps),Wp(e,n,l,h,r);case 3:t:{if(Le(n,n.stateNode.containerInfo),e===null)throw Error(a(387));l=n.pendingProps;var d=n.memoizedState;h=d.element,rf(e,n),eo(n,l,null,r);var p=n.memoizedState;if(l=p.cache,Gs(n,Je,l),l!==d.cache&&Zh(n,[Je],r,!0),to(),l=p.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Zp(e,n,l,r);break t}else if(l!==h){h=ui(Error(a(424)),n),Kl(h),n=Zp(e,n,l,r);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ce=mi(e.firstChild),pn=n,re=!0,qs=null,fi=!0,r=$g(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Kr(),l===h){n=fs(e,n,r);break t}_n(e,n,l,r)}n=n.child}return n;case 26:return Wu(e,n),e===null?(r=d0(n.type,null,n.pendingProps,null))?n.memoizedState=r:re||(r=n.type,e=n.pendingProps,l=mc(Vt.current).createElement(r),l[me]=n,l[qe]=e,vn(l,r,e),We(l),n.stateNode=l):n.memoizedState=d0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return mn(n),e===null&&re&&(l=n.stateNode=c0(n.type,n.pendingProps,Vt.current),pn=n,fi=!0,h=Ce,ir(n.type)?(_d=h,Ce=mi(l.firstChild)):Ce=h),_n(e,n,n.pendingProps.children,r),Wu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&re&&((h=l=Ce)&&(l=Xb(l,n.type,n.pendingProps,fi),l!==null?(n.stateNode=l,pn=n,Ce=mi(l.firstChild),fi=!1,h=!0):h=!1),h||Hs(n)),mn(n),h=n.type,d=n.pendingProps,p=e!==null?e.memoizedProps:null,l=d.children,dd(h,d)?l=null:p!==null&&dd(h,p)&&(n.flags|=32),n.memoizedState!==null&&(h=ff(e,n,hb,null,null,r),bo._currentValue=h),Wu(e,n),_n(e,n,l,r),n.child;case 6:return e===null&&re&&((e=r=Ce)&&(r=Wb(r,n.pendingProps,fi),r!==null?(n.stateNode=r,pn=n,Ce=null,e=!0):e=!1),e||Hs(n)),null;case 13:return Jp(e,n,r);case 4:return Le(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=ta(n,null,l,r):_n(e,n,l,r),n.child;case 11:return Gp(e,n,n.type,n.pendingProps,r);case 7:return _n(e,n,n.pendingProps,r),n.child;case 8:return _n(e,n,n.pendingProps.children,r),n.child;case 12:return _n(e,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,Gs(n,n.type,l.value),_n(e,n,l.children,r),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Xr(n),h=yn(h),l=l(h),n.flags|=1,_n(e,n,l,r),n.child;case 14:return Fp(e,n,n.type,n.pendingProps,r);case 15:return Qp(e,n,n.type,n.pendingProps,r);case 19:return ey(e,n,r);case 31:return vb(e,n,r);case 22:return $p(e,n,r,n.pendingProps);case 24:return Xr(n),l=yn(Je),e===null?(h=ef(),h===null&&(h=we,d=Jh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=r),h=d),n.memoizedState={parent:l,cache:h},sf(n),Gs(n,Je,h)):((e.lanes&r)!==0&&(rf(e,n),eo(n,null,null,r),to()),h=e.memoizedState,d=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Gs(n,Je,l)):(l=d.cache,Gs(n,Je,l),l!==h.cache&&Zh(n,[Je],r,!0))),_n(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function ds(e){e.flags|=4}function zf(e,n,r,l,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Iy())e.flags|=8192;else throw Jr=Lu,nf}else e.flags&=-16777217}function iy(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_0(n))if(Iy())e.flags|=8192;else throw Jr=Lu,nf}function Ju(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ln():536870912,e.lanes|=n,$a|=n)}function lo(e,n){if(!re)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ie(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(n)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=r,n}function Tb(e,n,r){var l=n.pendingProps;switch($h(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(n),null;case 1:return Ie(n),null;case 3:return r=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),us(Je),gt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Va(n)?ds(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Yh())),Ie(n),null;case 26:var h=n.type,d=n.memoizedState;return e===null?(ds(n),d!==null?(Ie(n),iy(n,d)):(Ie(n),zf(n,h,null,l,r))):d?d!==e.memoizedState?(ds(n),Ie(n),iy(n,d)):(Ie(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&ds(n),Ie(n),zf(n,h,e,l,r)),null;case 27:if(Vn(n),r=Vt.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&ds(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ie(n),null}e=J.current,Va(n)?Lg(n):(e=c0(h,l,r),n.stateNode=e,ds(n))}return Ie(n),null;case 5:if(Vn(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&ds(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return Ie(n),null}if(d=J.current,Va(n))Lg(n);else{var p=mc(Vt.current);switch(d){case 1:d=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=p.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?p.createElement(h,{is:l.is}):p.createElement(h)}}d[me]=n,d[qe]=l;t:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)d.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break t;for(;p.sibling===null;){if(p.return===null||p.return===n)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=d;t:switch(vn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&ds(n)}}return Ie(n),zf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&ds(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(e=Vt.current,Va(n)){if(e=n.stateNode,r=n.memoizedProps,l=null,h=pn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[me]=n,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Jy(e.nodeValue,r)),e||Hs(n,!0)}else e=mc(e).createTextNode(l),e[me]=n,n.stateNode=e}return Ie(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(l=Va(n),r!==null){if(e===null){if(!l)throw Error(a(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[me]=n}else Kr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ie(n),e=!1}else r=Yh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(Jn(n),n):(Jn(n),null);if((n.flags&128)!==0)throw Error(a(558))}return Ie(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Va(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[me]=n}else Kr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ie(n),h=!1}else h=Yh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Jn(n),n):(Jn(n),null)}return Jn(n),(n.flags&128)!==0?(n.lanes=r,n):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),Ju(n,n.updateQueue),Ie(n),null);case 4:return gt(),e===null&&od(n.stateNode.containerInfo),Ie(n),null;case 10:return us(n.type),Ie(n),null;case 19:if($($e),l=n.memoizedState,l===null)return Ie(n),null;if(h=(n.flags&128)!==0,d=l.rendering,d===null)if(h)lo(l,!1);else{if(Ge!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=zu(e),d!==null){for(n.flags|=128,lo(l,!1),e=d.updateQueue,n.updateQueue=e,Ju(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)Dg(r,e),r=r.sibling;return dt($e,$e.current&1|2),re&&ls(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Xe()>sc&&(n.flags|=128,h=!0,lo(l,!1),n.lanes=4194304)}else{if(!h)if(e=zu(d),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Ju(n,e),lo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!re)return Ie(n),null}else 2*Xe()-l.renderingStartTime>sc&&r!==536870912&&(n.flags|=128,h=!0,lo(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xe(),e.sibling=null,r=$e.current,dt($e,h?r&1|2:r&1),re&&ls(n,l.treeForkCount),e):(Ie(n),null);case 22:case 23:return Jn(n),uf(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(Ie(n),n.subtreeFlags&6&&(n.flags|=8192)):Ie(n),r=n.updateQueue,r!==null&&Ju(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),e!==null&&$(Wr),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),us(Je),Ie(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function bb(e,n){switch($h(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return us(Je),gt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Vn(n),null;case 31:if(n.memoizedState!==null){if(Jn(n),n.alternate===null)throw Error(a(340));Kr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Jn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Kr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return $($e),null;case 4:return gt(),null;case 10:return us(n.type),null;case 22:case 23:return Jn(n),uf(),e!==null&&$(Wr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return us(Je),null;case 25:return null;default:return null}}function sy(e,n){switch($h(n),n.tag){case 3:us(Je),gt();break;case 26:case 27:case 5:Vn(n);break;case 4:gt();break;case 31:n.memoizedState!==null&&Jn(n);break;case 13:Jn(n);break;case 19:$($e);break;case 10:us(n.type);break;case 22:case 23:Jn(n),uf(),e!==null&&$(Wr);break;case 24:us(Je)}}function oo(e,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&e)===e){l=void 0;var d=r.create,p=r.inst;l=d(),p.destroy=l}r=r.next}while(r!==h)}}catch(T){_e(n,n.return,T)}}function Xs(e,n,r){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var p=l.inst,T=p.destroy;if(T!==void 0){p.destroy=void 0,h=n;var I=r,z=T;try{z()}catch(Q){_e(h,I,Q)}}}l=l.next}while(l!==d)}}catch(Q){_e(n,n.return,Q)}}function ry(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{Yg(n,r)}catch(l){_e(e,e.return,l)}}}function ay(e,n,r){r.props=na(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){_e(e,n,l)}}function uo(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(h){_e(e,n,h)}}function Fi(e,n){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){_e(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){_e(e,n,h)}else r.current=null}function ly(e){var n=e.type,r=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){_e(e,e.return,h)}}function Bf(e,n,r){try{var l=e.stateNode;Gb(l,e.type,r,n),l[qe]=n}catch(h){_e(e,e.return,h)}}function oy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ir(e.type)||e.tag===4}function qf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||oy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hf(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=_i));else if(l!==4&&(l===27&&ir(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Hf(e,n,r),e=e.sibling;e!==null;)Hf(e,n,r),e=e.sibling}function tc(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(l!==4&&(l===27&&ir(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(tc(e,n,r),e=e.sibling;e!==null;)tc(e,n,r),e=e.sibling}function uy(e){var n=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);vn(n,l,r),n[me]=e,n[qe]=r}catch(d){_e(e,e.return,d)}}var ms=!1,nn=!1,Gf=!1,cy=typeof WeakSet=="function"?WeakSet:Set,hn=null;function Sb(e,n){if(e=e.containerInfo,hd=Tc,e=bg(e),Lh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break t}var p=0,T=-1,I=-1,z=0,Q=0,W=e,B=null;e:for(;;){for(var G;W!==r||h!==0&&W.nodeType!==3||(T=p+h),W!==d||l!==0&&W.nodeType!==3||(I=p+l),W.nodeType===3&&(p+=W.nodeValue.length),(G=W.firstChild)!==null;)B=W,W=G;for(;;){if(W===e)break e;if(B===r&&++z===h&&(T=p),B===d&&++Q===l&&(I=p),(G=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=G}r=T===-1||I===-1?null:{start:T,end:I}}else r=null}r=r||{start:0,end:0}}else r=null;for(fd={focusedElem:e,selectionRange:r},Tc=!1,hn=n;hn!==null;)if(n=hn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,hn=e;else for(;hn!==null;){switch(n=hn,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)h=e[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,r=n,h=d.memoizedProps,d=d.memoizedState,l=r.stateNode;try{var bt=na(r.type,h);e=l.getSnapshotBeforeUpdate(bt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Mt){_e(r,r.return,Mt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)gd(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,hn=e;break}hn=n.return}}function hy(e,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ps(e,r),l&4&&oo(5,r);break;case 1:if(ps(e,r),l&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(p){_e(r,r.return,p)}else{var h=na(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){_e(r,r.return,p)}}l&64&&ry(r),l&512&&uo(r,r.return);break;case 3:if(ps(e,r),l&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Yg(e,n)}catch(p){_e(r,r.return,p)}}break;case 27:n===null&&l&4&&uy(r);case 26:case 5:ps(e,r),n===null&&l&4&&ly(r),l&512&&uo(r,r.return);break;case 12:ps(e,r);break;case 31:ps(e,r),l&4&&my(e,r);break;case 13:ps(e,r),l&4&&gy(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Ob.bind(null,r),Zb(e,r))));break;case 22:if(l=r.memoizedState!==null||ms,!l){n=n!==null&&n.memoizedState!==null||nn,h=ms;var d=nn;ms=l,(nn=n)&&!d?ys(e,r,(r.subtreeFlags&8772)!==0):ps(e,r),ms=h,nn=d}break;case 30:break;default:ps(e,r)}}function fy(e){var n=e.alternate;n!==null&&(e.alternate=null,fy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ya(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ke=null,Un=!1;function gs(e,n,r){for(r=r.child;r!==null;)dy(e,n,r),r=r.sibling}function dy(e,n,r){if(X&&typeof X.onCommitFiberUnmount=="function")try{X.onCommitFiberUnmount(ht,r)}catch{}switch(r.tag){case 26:nn||Fi(r,n),gs(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:nn||Fi(r,n);var l=ke,h=Un;ir(r.type)&&(ke=r.stateNode,Un=!1),gs(e,n,r),vo(r.stateNode),ke=l,Un=h;break;case 5:nn||Fi(r,n);case 6:if(l=ke,h=Un,ke=null,gs(e,n,r),ke=l,Un=h,ke!==null)if(Un)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(r.stateNode)}catch(d){_e(r,n,d)}else try{ke.removeChild(r.stateNode)}catch(d){_e(r,n,d)}break;case 18:ke!==null&&(Un?(e=ke,r0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),el(e)):r0(ke,r.stateNode));break;case 4:l=ke,h=Un,ke=r.stateNode.containerInfo,Un=!0,gs(e,n,r),ke=l,Un=h;break;case 0:case 11:case 14:case 15:Xs(2,r,n),nn||Xs(4,r,n),gs(e,n,r);break;case 1:nn||(Fi(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&ay(r,n,l)),gs(e,n,r);break;case 21:gs(e,n,r);break;case 22:nn=(l=nn)||r.memoizedState!==null,gs(e,n,r),nn=l;break;default:gs(e,n,r)}}function my(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{el(e)}catch(r){_e(n,n.return,r)}}}function gy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{el(e)}catch(r){_e(n,n.return,r)}}function Ab(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new cy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new cy),n;default:throw Error(a(435,e.tag))}}function ec(e,n){var r=Ab(e);n.forEach(function(l){if(!r.has(l)){r.add(l);var h=Mb.bind(null,e,l);l.then(h,h)}})}function zn(e,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],d=e,p=n,T=p;t:for(;T!==null;){switch(T.tag){case 27:if(ir(T.type)){ke=T.stateNode,Un=!1;break t}break;case 5:ke=T.stateNode,Un=!1;break t;case 3:case 4:ke=T.stateNode.containerInfo,Un=!0;break t}T=T.return}if(ke===null)throw Error(a(160));dy(d,p,h),ke=null,Un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)py(n,e),n=n.sibling}var Ai=null;function py(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zn(n,e),Bn(e),l&4&&(Xs(3,e,e.return),oo(3,e),Xs(5,e,e.return));break;case 1:zn(n,e),Bn(e),l&512&&(nn||r===null||Fi(r,r.return)),l&64&&ms&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=Ai;if(zn(n,e),Bn(e),l&512&&(nn||r===null||Fi(r,r.return)),l&4){var d=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){t:{l=e.type,r=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Di]||d[me]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),vn(d,l,r),d[me]=e,We(d),l=d;break t;case"link":var p=p0("link","href",h).get(l+(r.href||""));if(p){for(var T=0;T<p.length;T++)if(d=p[T],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){p.splice(T,1);break e}}d=h.createElement(l),vn(d,l,r),h.head.appendChild(d);break;case"meta":if(p=p0("meta","content",h).get(l+(r.content||""))){for(T=0;T<p.length;T++)if(d=p[T],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){p.splice(T,1);break e}}d=h.createElement(l),vn(d,l,r),h.head.appendChild(d);break;default:throw Error(a(468,l))}d[me]=e,We(d),l=d}e.stateNode=l}else y0(h,e.type,e.stateNode);else e.stateNode=g0(h,l,e.memoizedProps);else d!==l?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,l===null?y0(h,e.type,e.stateNode):g0(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Bf(e,e.memoizedProps,r.memoizedProps)}break;case 27:zn(n,e),Bn(e),l&512&&(nn||r===null||Fi(r,r.return)),r!==null&&l&4&&Bf(e,e.memoizedProps,r.memoizedProps);break;case 5:if(zn(n,e),Bn(e),l&512&&(nn||r===null||Fi(r,r.return)),e.flags&32){h=e.stateNode;try{jn(h,"")}catch(bt){_e(e,e.return,bt)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Bf(e,h,r!==null?r.memoizedProps:h)),l&1024&&(Gf=!0);break;case 6:if(zn(n,e),Bn(e),l&4){if(e.stateNode===null)throw Error(a(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(bt){_e(e,e.return,bt)}}break;case 3:if(yc=null,h=Ai,Ai=gc(n.containerInfo),zn(n,e),Ai=h,Bn(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{el(n.containerInfo)}catch(bt){_e(e,e.return,bt)}Gf&&(Gf=!1,yy(e));break;case 4:l=Ai,Ai=gc(e.stateNode.containerInfo),zn(n,e),Bn(e),Ai=l;break;case 12:zn(n,e),Bn(e);break;case 31:zn(n,e),Bn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ec(e,l)));break;case 13:zn(n,e),Bn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ic=Xe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ec(e,l)));break;case 22:h=e.memoizedState!==null;var I=r!==null&&r.memoizedState!==null,z=ms,Q=nn;if(ms=z||h,nn=Q||I,zn(n,e),nn=Q,ms=z,Bn(e),l&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(r===null||I||ms||nn||ia(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){I=r=n;try{if(d=I.stateNode,h)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{T=I.stateNode;var W=I.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(bt){_e(I,I.return,bt)}}}else if(n.tag===6){if(r===null){I=n;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(bt){_e(I,I.return,bt)}}}else if(n.tag===18){if(r===null){I=n;try{var G=I.stateNode;h?a0(G,!0):a0(I.stateNode,!1)}catch(bt){_e(I,I.return,bt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,ec(e,r))));break;case 19:zn(n,e),Bn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ec(e,l)));break;case 30:break;case 21:break;default:zn(n,e),Bn(e)}}function Bn(e){var n=e.flags;if(n&2){try{for(var r,l=e.return;l!==null;){if(oy(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var h=r.stateNode,d=qf(e);tc(e,d,h);break;case 5:var p=r.stateNode;r.flags&32&&(jn(p,""),r.flags&=-33);var T=qf(e);tc(e,T,p);break;case 3:case 4:var I=r.stateNode.containerInfo,z=qf(e);Hf(e,z,I);break;default:throw Error(a(161))}}catch(Q){_e(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function yy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;yy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ps(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)hy(e,n.alternate,n),n=n.sibling}function ia(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Xs(4,n,n.return),ia(n);break;case 1:Fi(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&ay(n,n.return,r),ia(n);break;case 27:vo(n.stateNode);case 26:case 5:Fi(n,n.return),ia(n);break;case 22:n.memoizedState===null&&ia(n);break;case 30:ia(n);break;default:ia(n)}e=e.sibling}}function ys(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,d=n,p=d.flags;switch(d.tag){case 0:case 11:case 15:ys(h,d,r),oo(4,d);break;case 1:if(ys(h,d,r),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){_e(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Kg(I[h],T)}catch(z){_e(l,l.return,z)}}r&&p&64&&ry(d),uo(d,d.return);break;case 27:uy(d);case 26:case 5:ys(h,d,r),r&&l===null&&p&4&&ly(d),uo(d,d.return);break;case 12:ys(h,d,r);break;case 31:ys(h,d,r),r&&p&4&&my(h,d);break;case 13:ys(h,d,r),r&&p&4&&gy(h,d);break;case 22:d.memoizedState===null&&ys(h,d,r),uo(d,d.return);break;case 30:break;default:ys(h,d,r)}n=n.sibling}}function Ff(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Yl(r))}function Qf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Yl(e))}function wi(e,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_y(e,n,r,l),n=n.sibling}function _y(e,n,r,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:wi(e,n,r,l),h&2048&&oo(9,n);break;case 1:wi(e,n,r,l);break;case 3:wi(e,n,r,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Yl(e)));break;case 12:if(h&2048){wi(e,n,r,l),e=n.stateNode;try{var d=n.memoizedProps,p=d.id,T=d.onPostCommit;typeof T=="function"&&T(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){_e(n,n.return,I)}}else wi(e,n,r,l);break;case 31:wi(e,n,r,l);break;case 13:wi(e,n,r,l);break;case 23:break;case 22:d=n.stateNode,p=n.alternate,n.memoizedState!==null?d._visibility&2?wi(e,n,r,l):co(e,n):d._visibility&2?wi(e,n,r,l):(d._visibility|=2,Ga(e,n,r,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Ff(p,n);break;case 24:wi(e,n,r,l),h&2048&&Qf(n.alternate,n);break;default:wi(e,n,r,l)}}function Ga(e,n,r,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,p=n,T=r,I=l,z=p.flags;switch(p.tag){case 0:case 11:case 15:Ga(d,p,T,I,h),oo(8,p);break;case 23:break;case 22:var Q=p.stateNode;p.memoizedState!==null?Q._visibility&2?Ga(d,p,T,I,h):co(d,p):(Q._visibility|=2,Ga(d,p,T,I,h)),h&&z&2048&&Ff(p.alternate,p);break;case 24:Ga(d,p,T,I,h),h&&z&2048&&Qf(p.alternate,p);break;default:Ga(d,p,T,I,h)}n=n.sibling}}function co(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,l=n,h=l.flags;switch(l.tag){case 22:co(r,l),h&2048&&Ff(l.alternate,l);break;case 24:co(r,l),h&2048&&Qf(l.alternate,l);break;default:co(r,l)}n=n.sibling}}var ho=8192;function Fa(e,n,r){if(e.subtreeFlags&ho)for(e=e.child;e!==null;)vy(e,n,r),e=e.sibling}function vy(e,n,r){switch(e.tag){case 26:Fa(e,n,r),e.flags&ho&&e.memoizedState!==null&&c1(r,Ai,e.memoizedState,e.memoizedProps);break;case 5:Fa(e,n,r);break;case 3:case 4:var l=Ai;Ai=gc(e.stateNode.containerInfo),Fa(e,n,r),Ai=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ho,ho=16777216,Fa(e,n,r),ho=l):Fa(e,n,r));break;default:Fa(e,n,r)}}function Ey(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];hn=l,by(l,e)}Ey(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ty(e),e=e.sibling}function Ty(e){switch(e.tag){case 0:case 11:case 15:fo(e),e.flags&2048&&Xs(9,e,e.return);break;case 3:fo(e);break;case 12:fo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,nc(e)):fo(e);break;default:fo(e)}}function nc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];hn=l,by(l,e)}Ey(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Xs(8,n,n.return),nc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,nc(n));break;default:nc(n)}e=e.sibling}}function by(e,n){for(;hn!==null;){var r=hn;switch(r.tag){case 0:case 11:case 15:Xs(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Yl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,hn=l;else t:for(r=e;hn!==null;){l=hn;var h=l.sibling,d=l.return;if(fy(l),l===r){hn=null;break t}if(h!==null){h.return=d,hn=h;break t}hn=d}}}var wb={getCacheForType:function(e){var n=yn(Je),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return yn(Je).controller.signal}},xb=typeof WeakMap=="function"?WeakMap:Map,he=0,we=null,Wt=null,Jt=0,ye=0,ti=null,Ws=!1,Qa=!1,$f=!1,_s=0,Ge=0,Zs=0,sa=0,Kf=0,ei=0,$a=0,mo=null,qn=null,Yf=!1,ic=0,Sy=0,sc=1/0,rc=null,Js=null,ln=0,tr=null,Ka=null,vs=0,Xf=0,Wf=null,Ay=null,go=0,Zf=null;function ni(){return(he&2)!==0&&Jt!==0?Jt&-Jt:F.T!==null?sd():wn()}function wy(){if(ei===0)if((Jt&536870912)===0||re){var e=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),ei=e}else ei=536870912;return e=Zn.current,e!==null&&(e.flags|=32),ei}function Hn(e,n,r){(e===we&&(ye===2||ye===9)||e.cancelPendingCommit!==null)&&(Ya(e,0),er(e,Jt,ei,!1)),An(e,r),((he&2)===0||e!==we)&&(e===we&&((he&2)===0&&(sa|=r),Ge===4&&er(e,Jt,ei,!1)),Qi(e))}function xy(e,n,r){if((he&6)!==0)throw Error(a(327));var l=!r&&(n&127)===0&&(n&e.expiredLanes)===0||Oe(e,n),h=l?Ib(e,n):td(e,n,!0),d=l;do{if(h===0){Qa&&!l&&er(e,n,0,!1);break}else{if(r=e.current.alternate,d&&!Rb(r)){h=td(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;t:{var T=e;h=mo;var I=T.current.memoizedState.isDehydrated;if(I&&(Ya(T,p).flags|=256),p=td(T,p,!1),p!==2){if($f&&!I){T.errorRecoveryDisabledLanes|=d,sa|=d,h=4;break t}d=qn,qn=h,d!==null&&(qn===null?qn=d:qn.push.apply(qn,d))}h=p}if(d=!1,h!==2)continue}}if(h===1){Ya(e,0),er(e,n,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:er(l,n,ei,!Ws);break t;case 2:qn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=ic+300-Xe(),10<h)){if(er(l,n,ei,!Ws),fe(l,0,!0)!==0)break t;vs=n,l.timeoutHandle=i0(Ry.bind(null,l,r,qn,rc,Yf,n,ei,sa,$a,Ws,d,"Throttled",-0,0),h);break t}Ry(l,r,qn,rc,Yf,n,ei,sa,$a,Ws,d,null,-0,0)}}break}while(!0);Qi(e)}function Ry(e,n,r,l,h,d,p,T,I,z,Q,W,B,G){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},vy(n,d,W);var bt=(d&62914560)===d?ic-Xe():(d&4194048)===d?Sy-Xe():0;if(bt=h1(W,bt),bt!==null){vs=d,e.cancelPendingCommit=bt(ky.bind(null,e,n,d,r,l,h,p,T,I,Q,W,null,B,G)),er(e,d,p,!z);return}}ky(e,n,d,r,l,h,p,T,I)}function Rb(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],d=h.getSnapshot;h=h.value;try{if(!Xn(d(),h))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function er(e,n,r,l){n&=~Kf,n&=~sa,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var d=31-yt(h),p=1<<d;l[d]=-1,h&=~p}r!==0&&Me(e,r,n)}function ac(){return(he&6)===0?(po(0),!1):!0}function Jf(){if(Wt!==null){if(ye===0)var e=Wt.return;else e=Wt,os=Yr=null,gf(e),Ua=null,Wl=0,e=Wt;for(;e!==null;)sy(e.alternate,e),e=e.return;Wt=null}}function Ya(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,$b(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),vs=0,Jf(),we=e,Wt=r=as(e.current,null),Jt=n,ye=0,ti=null,Ws=!1,Qa=Oe(e,n),$f=!1,$a=ei=Kf=sa=Zs=Ge=0,qn=mo=null,Yf=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-yt(l),d=1<<h;n|=e[h],l&=~d}return _s=n,Ru(),r}function Cy(e,n){Ft=null,F.H=ro,n===ja||n===ku?(n=Gg(),ye=3):n===nf?(n=Gg(),ye=4):ye=n===Df?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ti=n,Wt===null&&(Ge=1,Yu(e,ui(n,e.current)))}function Iy(){var e=Zn.current;return e===null?!0:(Jt&4194048)===Jt?di===null:(Jt&62914560)===Jt||(Jt&536870912)!==0?e===di:!1}function Ny(){var e=F.H;return F.H=ro,e===null?ro:e}function Dy(){var e=F.A;return F.A=wb,e}function lc(){Ge=4,Ws||(Jt&4194048)!==Jt&&Zn.current!==null||(Qa=!0),(Zs&134217727)===0&&(sa&134217727)===0||we===null||er(we,Jt,ei,!1)}function td(e,n,r){var l=he;he|=2;var h=Ny(),d=Dy();(we!==e||Jt!==n)&&(rc=null,Ya(e,n)),n=!1;var p=Ge;t:do try{if(ye!==0&&Wt!==null){var T=Wt,I=ti;switch(ye){case 8:Jf(),p=6;break t;case 3:case 2:case 9:case 6:Zn.current===null&&(n=!0);var z=ye;if(ye=0,ti=null,Xa(e,T,I,z),r&&Qa){p=0;break t}break;default:z=ye,ye=0,ti=null,Xa(e,T,I,z)}}Cb(),p=Ge;break}catch(Q){Cy(e,Q)}while(!0);return n&&e.shellSuspendCounter++,os=Yr=null,he=l,F.H=h,F.A=d,Wt===null&&(we=null,Jt=0,Ru()),p}function Cb(){for(;Wt!==null;)Oy(Wt)}function Ib(e,n){var r=he;he|=2;var l=Ny(),h=Dy();we!==e||Jt!==n?(rc=null,sc=Xe()+500,Ya(e,n)):Qa=Oe(e,n);t:do try{if(ye!==0&&Wt!==null){n=Wt;var d=ti;e:switch(ye){case 1:ye=0,ti=null,Xa(e,n,d,1);break;case 2:case 9:if(qg(d)){ye=0,ti=null,My(n);break}n=function(){ye!==2&&ye!==9||we!==e||(ye=7),Qi(e)},d.then(n,n);break t;case 3:ye=7;break t;case 4:ye=5;break t;case 7:qg(d)?(ye=0,ti=null,My(n)):(ye=0,ti=null,Xa(e,n,d,7));break;case 5:var p=null;switch(Wt.tag){case 26:p=Wt.memoizedState;case 5:case 27:var T=Wt;if(p?_0(p):T.stateNode.complete){ye=0,ti=null;var I=T.sibling;if(I!==null)Wt=I;else{var z=T.return;z!==null?(Wt=z,oc(z)):Wt=null}break e}}ye=0,ti=null,Xa(e,n,d,5);break;case 6:ye=0,ti=null,Xa(e,n,d,6);break;case 8:Jf(),Ge=6;break t;default:throw Error(a(462))}}Nb();break}catch(Q){Cy(e,Q)}while(!0);return os=Yr=null,F.H=l,F.A=h,he=r,Wt!==null?0:(we=null,Jt=0,Ru(),Ge)}function Nb(){for(;Wt!==null&&!Rl();)Oy(Wt)}function Oy(e){var n=ny(e.alternate,e,_s);e.memoizedProps=e.pendingProps,n===null?oc(e):Wt=n}function My(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=Xp(r,n,n.pendingProps,n.type,void 0,Jt);break;case 11:n=Xp(r,n,n.pendingProps,n.type.render,n.ref,Jt);break;case 5:gf(n);default:sy(r,n),n=Wt=Dg(n,_s),n=ny(r,n,_s)}e.memoizedProps=e.pendingProps,n===null?oc(e):Wt=n}function Xa(e,n,r,l){os=Yr=null,gf(n),Ua=null,Wl=0;var h=n.return;try{if(_b(e,h,n,r,Jt)){Ge=1,Yu(e,ui(r,e.current)),Wt=null;return}}catch(d){if(h!==null)throw Wt=h,d;Ge=1,Yu(e,ui(r,e.current)),Wt=null;return}n.flags&32768?(re||l===1?e=!0:Qa||(Jt&536870912)!==0?e=!1:(Ws=e=!0,(l===2||l===9||l===3||l===6)&&(l=Zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vy(n,e)):oc(n)}function oc(e){var n=e;do{if((n.flags&32768)!==0){Vy(n,Ws);return}e=n.return;var r=Tb(n.alternate,n,_s);if(r!==null){Wt=r;return}if(n=n.sibling,n!==null){Wt=n;return}Wt=n=e}while(n!==null);Ge===0&&(Ge=5)}function Vy(e,n){do{var r=bb(e.alternate,e);if(r!==null){r.flags&=32767,Wt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Wt=e;return}Wt=e=r}while(e!==null);Ge=6,Wt=null}function ky(e,n,r,l,h,d,p,T,I){e.cancelPendingCommit=null;do uc();while(ln!==0);if((he&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Bh,ve(e,r,d,p,T,I),e===we&&(Wt=we=null,Jt=0),Ka=n,tr=e,vs=r,Xf=d,Wf=h,Ay=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Vb(lt,function(){return zy(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=ot.p,ot.p=2,p=he,he|=4;try{Sb(e,n,r)}finally{he=p,ot.p=h,F.T=l}}ln=1,Ly(),Py(),jy()}}function Ly(){if(ln===1){ln=0;var e=tr,n=Ka,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=F.T,F.T=null;var l=ot.p;ot.p=2;var h=he;he|=4;try{py(n,e);var d=fd,p=bg(e.containerInfo),T=d.focusedElem,I=d.selectionRange;if(p!==T&&T&&T.ownerDocument&&Tg(T.ownerDocument.documentElement,T)){if(I!==null&&Lh(T)){var z=I.start,Q=I.end;if(Q===void 0&&(Q=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(Q,T.value.length);else{var W=T.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var G=B.getSelection(),bt=T.textContent.length,Mt=Math.min(I.start,bt),Ae=I.end===void 0?Mt:Math.min(I.end,bt);!G.extend&&Mt>Ae&&(p=Ae,Ae=Mt,Mt=p);var k=Eg(T,Mt),M=Eg(T,Ae);if(k&&M&&(G.rangeCount!==1||G.anchorNode!==k.node||G.anchorOffset!==k.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var U=W.createRange();U.setStart(k.node,k.offset),G.removeAllRanges(),Mt>Ae?(G.addRange(U),G.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),G.addRange(U))}}}}for(W=[],G=T;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var K=W[T];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Tc=!!hd,fd=hd=null}finally{he=h,ot.p=l,F.T=r}}e.current=n,ln=2}}function Py(){if(ln===2){ln=0;var e=tr,n=Ka,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=F.T,F.T=null;var l=ot.p;ot.p=2;var h=he;he|=4;try{hy(e,n.alternate,n)}finally{he=h,ot.p=l,F.T=r}}ln=3}}function jy(){if(ln===4||ln===3){ln=0,Mr();var e=tr,n=Ka,r=vs,l=Ay;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ln=5:(ln=0,Ka=tr=null,Uy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Js=null),Ee(r),n=n.stateNode,X&&typeof X.onCommitFiberRoot=="function")try{X.onCommitFiberRoot(ht,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=F.T,h=ot.p,ot.p=2,F.T=null;try{for(var d=e.onRecoverableError,p=0;p<l.length;p++){var T=l[p];d(T.value,{componentStack:T.stack})}}finally{F.T=n,ot.p=h}}(vs&3)!==0&&uc(),Qi(e),h=e.pendingLanes,(r&261930)!==0&&(h&42)!==0?e===Zf?go++:(go=0,Zf=e):go=0,po(0)}}function Uy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Yl(n)))}function uc(){return Ly(),Py(),jy(),zy()}function zy(){if(ln!==5)return!1;var e=tr,n=Xf;Xf=0;var r=Ee(vs),l=F.T,h=ot.p;try{ot.p=32>r?32:r,F.T=null,r=Wf,Wf=null;var d=tr,p=vs;if(ln=0,Ka=tr=null,vs=0,(he&6)!==0)throw Error(a(331));var T=he;if(he|=4,Ty(d.current),_y(d,d.current,p,r),he=T,po(0,!1),X&&typeof X.onPostCommitFiberRoot=="function")try{X.onPostCommitFiberRoot(ht,d)}catch{}return!0}finally{ot.p=h,F.T=l,Uy(e,n)}}function By(e,n,r){n=ui(r,n),n=Nf(e.stateNode,n,2),e=$s(e,n,2),e!==null&&(An(e,2),Qi(e))}function _e(e,n,r){if(e.tag===3)By(e,e,r);else for(;n!==null;){if(n.tag===3){By(n,e,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Js===null||!Js.has(l))){e=ui(r,e),r=qp(2),l=$s(n,r,2),l!==null&&(Hp(r,l,n,e),An(l,2),Qi(l));break}}n=n.return}}function ed(e,n,r){var l=e.pingCache;if(l===null){l=e.pingCache=new xb;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(r)||($f=!0,h.add(r),e=Db.bind(null,e,n,r),n.then(e,e))}function Db(e,n,r){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,we===e&&(Jt&r)===r&&(Ge===4||Ge===3&&(Jt&62914560)===Jt&&300>Xe()-ic?(he&2)===0&&Ya(e,0):Kf|=r,$a===Jt&&($a=0)),Qi(e)}function qy(e,n){n===0&&(n=Ln()),e=Qr(e,n),e!==null&&(An(e,n),Qi(e))}function Ob(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),qy(e,r)}function Mb(e,n){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),qy(e,r)}function Vb(e,n){return Be(e,n)}var cc=null,Wa=null,nd=!1,hc=!1,id=!1,nr=0;function Qi(e){e!==Wa&&e.next===null&&(Wa===null?cc=Wa=e:Wa=Wa.next=e),hc=!0,nd||(nd=!0,Lb())}function po(e,n){if(!id&&hc){id=!0;do for(var r=!1,l=cc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var p=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-yt(42|e)+1)-1,d&=h&~(p&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,Qy(l,d))}else d=Jt,d=fe(l,l===we?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Oe(l,d)||(r=!0,Qy(l,d));l=l.next}while(r);id=!1}}function kb(){Hy()}function Hy(){hc=nd=!1;var e=0;nr!==0&&Qb()&&(e=nr);for(var n=Xe(),r=null,l=cc;l!==null;){var h=l.next,d=Gy(l,n);d===0?(l.next=null,r===null?cc=h:r.next=h,h===null&&(Wa=r)):(r=l,(e!==0||(d&3)!==0)&&(hc=!0)),l=h}ln!==0&&ln!==5||po(e),nr!==0&&(nr=0)}function Gy(e,n){for(var r=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var p=31-yt(d),T=1<<p,I=h[p];I===-1?((T&r)===0||(T&l)!==0)&&(h[p]=Qn(T,n)):I<=n&&(e.expiredLanes|=T),d&=~T}if(n=we,r=Jt,r=fe(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===n&&(ye===2||ye===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ni(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Oe(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(l!==null&&Ni(l),Ee(r)){case 2:case 8:r=tt;break;case 32:r=lt;break;case 268435456:r=Nt;break;default:r=lt}return l=Fy.bind(null,e),r=Be(r,l),e.callbackPriority=n,e.callbackNode=r,n}return l!==null&&l!==null&&Ni(l),e.callbackPriority=2,e.callbackNode=null,2}function Fy(e,n){if(ln!==0&&ln!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(uc()&&e.callbackNode!==r)return null;var l=Jt;return l=fe(e,e===we?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(xy(e,l,n),Gy(e,Xe()),e.callbackNode!=null&&e.callbackNode===r?Fy.bind(null,e):null)}function Qy(e,n){if(uc())return null;xy(e,n,!0)}function Lb(){Kb(function(){(he&6)!==0?Be(P,kb):Hy()})}function sd(){if(nr===0){var e=La;e===0&&(e=Ut,Ut<<=1,(Ut&261888)===0&&(Ut=256)),nr=e}return nr}function $y(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ta(""+e)}function Ky(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function Pb(e,n,r,l,h){if(n==="submit"&&r&&r.stateNode===h){var d=$y((h[qe]||null).action),p=l.submitter;p&&(n=(n=p[qe]||null)?$y(n.formAction):p.getAttribute("formAction"),n!==null&&(d=n,p=null));var T=new Ui("action","action",null,l,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(nr!==0){var I=p?Ky(h,p):new FormData(h);Af(r,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=p?Ky(h,p):new FormData(h),Af(r,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var rd=0;rd<zh.length;rd++){var ad=zh[rd],jb=ad.toLowerCase(),Ub=ad[0].toUpperCase()+ad.slice(1);Si(jb,"on"+Ub)}Si(wg,"onAnimationEnd"),Si(xg,"onAnimationIteration"),Si(Rg,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(eb,"onTransitionRun"),Si(nb,"onTransitionStart"),Si(ib,"onTransitionCancel"),Si(Cg,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yo));function Yy(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],h=l.event;l=l.listeners;t:{var d=void 0;if(n)for(var p=l.length-1;0<=p;p--){var T=l[p],I=T.instance,z=T.currentTarget;if(T=T.listener,I!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=z;try{d(h)}catch(Q){xu(Q)}h.currentTarget=null,d=I}else for(p=0;p<l.length;p++){if(T=l[p],I=T.instance,z=T.currentTarget,T=T.listener,I!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=z;try{d(h)}catch(Q){xu(Q)}h.currentTarget=null,d=I}}}}function Zt(e,n){var r=n[$n];r===void 0&&(r=n[$n]=new Set);var l=e+"__bubble";r.has(l)||(Xy(n,e,2,!1),r.add(l))}function ld(e,n,r){var l=0;n&&(l|=4),Xy(r,e,l,n)}var fc="_reactListening"+Math.random().toString(36).slice(2);function od(e){if(!e[fc]){e[fc]=!0,Cl.forEach(function(r){r!=="selectionchange"&&(zb.has(r)||ld(r,!1,e),ld(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[fc]||(n[fc]=!0,ld("selectionchange",!1,n))}}function Xy(e,n,r,l){switch(w0(n)){case 2:var h=m1;break;case 8:h=g1;break;default:h=Sd}r=h.bind(null,n,r,e),h=void 0,!jr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,r,{capture:!0,passive:h}):e.addEventListener(n,r,!0):h!==void 0?e.addEventListener(n,r,{passive:h}):e.addEventListener(n,r,!1)}function ud(e,n,r,l,h){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var T=l.stateNode.containerInfo;if(T===h)break;if(p===4)for(p=l.return;p!==null;){var I=p.tag;if((I===3||I===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;T!==null;){if(p=Oi(T),p===null)return;if(I=p.tag,I===5||I===6||I===26||I===27){l=d=p;continue t}T=T.parentNode}}l=l.return}Ps(function(){var z=d,Q=ri(r),W=[];t:{var B=Ig.get(e);if(B!==void 0){var G=Ui,bt=e;switch(e){case"keypress":if(zr(r)===0)break t;case"keydown":case"keyup":G=Su;break;case"focusin":bt="focus",G=qr;break;case"focusout":bt="blur",G=qr;break;case"beforeblur":case"afterblur":G=qr;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=m;break;case wg:case xg:case Rg:G=pu;break;case Cg:G=b;break;case"scroll":case"scrollend":G=zl;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=rs;break;case"toggle":case"beforetoggle":G=Gt}var Mt=(n&4)!==0,Ae=!Mt&&(e==="scroll"||e==="scrollend"),k=Mt?B!==null?B+"Capture":null:B;Mt=[];for(var M=z,U;M!==null;){var K=M;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||k===null||(K=vi(M,k),K!=null&&Mt.push(_o(M,K,U))),Ae)break;M=M.return}0<Mt.length&&(B=new G(B,bt,null,r,Q),W.push({event:B,listeners:Mt}))}}if((n&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",B&&r!==Pl&&(bt=r.relatedTarget||r.fromElement)&&(Oi(bt)||bt[Dn]))break t;if((G||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,G?(bt=r.relatedTarget||r.toElement,G=z,bt=bt?Oi(bt):null,bt!==null&&(Ae=c(bt),Mt=bt.tag,bt!==Ae||Mt!==5&&Mt!==27&&Mt!==6)&&(bt=null)):(G=null,bt=z),G!==bt)){if(Mt=Bl,K="onMouseLeave",k="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Mt=rs,K="onPointerLeave",k="onPointerEnter",M="pointer"),Ae=G==null?B:Kn(G),U=bt==null?B:Kn(bt),B=new Mt(K,M+"leave",G,r,Q),B.target=Ae,B.relatedTarget=U,K=null,Oi(Q)===z&&(Mt=new Mt(k,M+"enter",bt,r,Q),Mt.target=U,Mt.relatedTarget=Ae,K=Mt),Ae=K,G&&bt)e:{for(Mt=Bb,k=G,M=bt,U=0,K=k;K;K=Mt(K))U++;K=0;for(var It=M;It;It=Mt(It))K++;for(;0<U-K;)k=Mt(k),U--;for(;0<K-U;)M=Mt(M),K--;for(;U--;){if(k===M||M!==null&&k===M.alternate){Mt=k;break e}k=Mt(k),M=Mt(M)}Mt=null}else Mt=null;G!==null&&Wy(W,B,G,Mt,!1),bt!==null&&Ae!==null&&Wy(W,Ae,bt,Mt,!0)}}t:{if(B=z?Kn(z):window,G=B.nodeName&&B.nodeName.toLowerCase(),G==="select"||G==="input"&&B.type==="file")var le=mg;else if(fg(B))if(gg)le=ZT;else{le=XT;var Rt=YT}else G=B.nodeName,!G||G.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Ea(z.elementType)&&(le=mg):le=WT;if(le&&(le=le(e,z))){dg(W,le,r,Q);break t}Rt&&Rt(e,B,z),e==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Vl(B,"number",B.value)}switch(Rt=z?Kn(z):window,e){case"focusin":(fg(Rt)||Rt.contentEditable==="true")&&(Ca=Rt,Ph=z,Ql=null);break;case"focusout":Ql=Ph=Ca=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Sg(W,r,Q);break;case"selectionchange":if(tb)break;case"keydown":case"keyup":Sg(W,r,Q)}var Kt;if(ce)t:{switch(e){case"compositionstart":var te="onCompositionStart";break t;case"compositionend":te="onCompositionEnd";break t;case"compositionupdate":te="onCompositionUpdate";break t}te=void 0}else Ra?Hr(e,r)&&(te="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(te="onCompositionStart");te&&(qi&&r.locale!=="ko"&&(Ra||te!=="onCompositionStart"?te==="onCompositionEnd"&&Ra&&(Kt=Ul()):(ji=Q,jl="value"in ji?ji.value:ji.textContent,Ra=!0)),Rt=dc(z,te),0<Rt.length&&(te=new Bi(te,e,null,r,Q),W.push({event:te,listeners:Rt}),Kt?te.data=Kt:(Kt=xa(r),Kt!==null&&(te.data=Kt)))),(Kt=li?FT(e,r):QT(e,r))&&(te=dc(z,"onBeforeInput"),0<te.length&&(Rt=new Bi("onBeforeInput","beforeinput",null,r,Q),W.push({event:Rt,listeners:te}),Rt.data=Kt)),Pb(W,e,z,r,Q)}Yy(W,n)})}function _o(e,n,r){return{instance:e,listener:n,currentTarget:r}}function dc(e,n){for(var r=n+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=vi(e,r),h!=null&&l.unshift(_o(e,h,d)),h=vi(e,n),h!=null&&l.push(_o(e,h,d))),e.tag===3)return l;e=e.return}return[]}function Bb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wy(e,n,r,l,h){for(var d=n._reactName,p=[];r!==null&&r!==l;){var T=r,I=T.alternate,z=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||z===null||(I=z,h?(z=vi(r,d),z!=null&&p.unshift(_o(r,z,I))):h||(z=vi(r,d),z!=null&&p.push(_o(r,z,I)))),r=r.return}p.length!==0&&e.push({event:n,listeners:p})}var qb=/\r\n?/g,Hb=/\u0000|\uFFFD/g;function Zy(e){return(typeof e=="string"?e:""+e).replace(qb,`
`).replace(Hb,"")}function Jy(e,n){return n=Zy(n),Zy(e)===n}function Se(e,n,r,l,h,d){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||jn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&jn(e,""+l);break;case"className":Yn(e,"class",l);break;case"tabIndex":Yn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(e,r,l);break;case"style":Ll(e,l,d);break;case"data":if(n!=="object"){Yn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Ta(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(n!=="input"&&Se(e,n,"name",h.name,h,null),Se(e,n,"formEncType",h.formEncType,h,null),Se(e,n,"formMethod",h.formMethod,h,null),Se(e,n,"formTarget",h.formTarget,h,null)):(Se(e,n,"encType",h.encType,h,null),Se(e,n,"method",h.method,h,null),Se(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Ta(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=_i);break;case"onScroll":l!=null&&Zt("scroll",e);break;case"onScrollEnd":l!=null&&Zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Ta(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":Zt("beforetoggle",e),Zt("toggle",e),_a(e,"popover",l);break;case"xlinkActuate":Ze(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ze(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ze(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ze(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ze(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ze(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ze(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ze(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ze(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=du.get(r)||r,_a(e,r,l))}}function cd(e,n,r,l,h,d){switch(r){case"style":Ll(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=r}}break;case"children":typeof l=="string"?jn(e,l):(typeof l=="number"||typeof l=="bigint")&&jn(e,""+l);break;case"onScroll":l!=null&&Zt("scroll",e);break;case"onScrollEnd":l!=null&&Zt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),n=r.slice(2,h?r.length-7:void 0),d=e[qe]||null,d=d!=null?d[r]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,l,h);break t}r in e?e[r]=l:l===!0?e.setAttribute(r,""):_a(e,r,l)}}}function vn(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zt("error",e),Zt("load",e);var l=!1,h=!1,d;for(d in r)if(r.hasOwnProperty(d)){var p=r[d];if(p!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Se(e,n,d,p,r,null)}}h&&Se(e,n,"srcSet",r.srcSet,r,null),l&&Se(e,n,"src",r.src,r,null);return;case"input":Zt("invalid",e);var T=d=p=h=null,I=null,z=null;for(l in r)if(r.hasOwnProperty(l)){var Q=r[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":p=Q;break;case"checked":I=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,n));break;default:Se(e,n,l,Q,r,null)}}cu(e,d,T,I,z,p,h,!1);return;case"select":Zt("invalid",e),l=p=d=null;for(h in r)if(r.hasOwnProperty(h)&&(T=r[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":p=T;break;case"multiple":l=T;default:Se(e,n,h,T,r,null)}n=d,r=p,e.multiple=!!l,n!=null?Ms(e,!!l,n,!1):r!=null&&Ms(e,!!l,r,!0);return;case"textarea":Zt("invalid",e),d=h=l=null;for(p in r)if(r.hasOwnProperty(p)&&(T=r[p],T!=null))switch(p){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Se(e,n,p,T,r,null)}Vs(e,l,h,d);return;case"option":for(I in r)if(r.hasOwnProperty(I)&&(l=r[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Se(e,n,I,l,r,null)}return;case"dialog":Zt("beforetoggle",e),Zt("toggle",e),Zt("cancel",e),Zt("close",e);break;case"iframe":case"object":Zt("load",e);break;case"video":case"audio":for(l=0;l<yo.length;l++)Zt(yo[l],e);break;case"image":Zt("error",e),Zt("load",e);break;case"details":Zt("toggle",e);break;case"embed":case"source":case"link":Zt("error",e),Zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in r)if(r.hasOwnProperty(z)&&(l=r[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Se(e,n,z,l,r,null)}return;default:if(Ea(n)){for(Q in r)r.hasOwnProperty(Q)&&(l=r[Q],l!==void 0&&cd(e,n,Q,l,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(l=r[T],l!=null&&Se(e,n,T,l,r,null))}function Gb(e,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,p=null,T=null,I=null,z=null,Q=null;for(G in r){var W=r[G];if(r.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":I=W;default:l.hasOwnProperty(G)||Se(e,n,G,null,l,W)}}for(var B in l){var G=l[B];if(W=r[B],l.hasOwnProperty(B)&&(G!=null||W!=null))switch(B){case"type":d=G;break;case"name":h=G;break;case"checked":z=G;break;case"defaultChecked":Q=G;break;case"value":p=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,n));break;default:G!==W&&Se(e,n,B,G,l,W)}}va(e,p,T,I,z,Q,d,h);return;case"select":G=p=T=B=null;for(d in r)if(I=r[d],r.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":G=I;default:l.hasOwnProperty(d)||Se(e,n,d,null,l,I)}for(h in l)if(d=l[h],I=r[h],l.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":p=d;default:d!==I&&Se(e,n,h,d,l,I)}n=T,r=p,l=G,B!=null?Ms(e,!!r,B,!1):!!l!=!!r&&(n!=null?Ms(e,!!r,n,!0):Ms(e,!!r,r?[]:"",!1));return;case"textarea":G=B=null;for(T in r)if(h=r[T],r.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Se(e,n,T,null,l,h)}for(p in l)if(h=l[p],d=r[p],l.hasOwnProperty(p)&&(h!=null||d!=null))switch(p){case"value":B=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==d&&Se(e,n,p,h,l,d)}hu(e,B,G);return;case"option":for(var bt in r)if(B=r[bt],r.hasOwnProperty(bt)&&B!=null&&!l.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:Se(e,n,bt,null,l,B)}for(I in l)if(B=l[I],G=r[I],l.hasOwnProperty(I)&&B!==G&&(B!=null||G!=null))switch(I){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Se(e,n,I,B,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in r)B=r[Mt],r.hasOwnProperty(Mt)&&B!=null&&!l.hasOwnProperty(Mt)&&Se(e,n,Mt,null,l,B);for(z in l)if(B=l[z],G=r[z],l.hasOwnProperty(z)&&B!==G&&(B!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(a(137,n));break;default:Se(e,n,z,B,l,G)}return;default:if(Ea(n)){for(var Ae in r)B=r[Ae],r.hasOwnProperty(Ae)&&B!==void 0&&!l.hasOwnProperty(Ae)&&cd(e,n,Ae,void 0,l,B);for(Q in l)B=l[Q],G=r[Q],!l.hasOwnProperty(Q)||B===G||B===void 0&&G===void 0||cd(e,n,Q,B,l,G);return}}for(var k in r)B=r[k],r.hasOwnProperty(k)&&B!=null&&!l.hasOwnProperty(k)&&Se(e,n,k,null,l,B);for(W in l)B=l[W],G=r[W],!l.hasOwnProperty(W)||B===G||B==null&&G==null||Se(e,n,W,B,l,G)}function t0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],d=h.transferSize,p=h.initiatorType,T=h.duration;if(d&&T&&t0(p)){for(p=0,T=h.responseEnd,l+=1;l<r.length;l++){var I=r[l],z=I.startTime;if(z>T)break;var Q=I.transferSize,W=I.initiatorType;Q&&t0(W)&&(I=I.responseEnd,p+=Q*(I<T?1:(T-z)/(I-z)))}if(--l,n+=8*(d+p)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hd=null,fd=null;function mc(e){return e.nodeType===9?e:e.ownerDocument}function e0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function dd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var md=null;function Qb(){var e=window.event;return e&&e.type==="popstate"?e===md?!1:(md=e,!0):(md=null,!1)}var i0=typeof setTimeout=="function"?setTimeout:void 0,$b=typeof clearTimeout=="function"?clearTimeout:void 0,s0=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof s0<"u"?function(e){return s0.resolve(null).then(e).catch(Yb)}:i0;function Yb(e){setTimeout(function(){throw e})}function ir(e){return e==="head"}function r0(e,n){var r=n,l=0;do{var h=r.nextSibling;if(e.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(h),el(n);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")vo(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,vo(r);for(var d=r.firstChild;d;){var p=d.nextSibling,T=d.nodeName;d[Di]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||r.removeChild(d),d=p}}else r==="body"&&vo(e.ownerDocument.body);r=h}while(r);el(n)}function a0(e,n){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function gd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":gd(r),ya(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Xb(e,n,r,l){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Di])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=mi(e.nextSibling),e===null)break}return null}function Wb(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=mi(e.nextSibling),e===null))return null;return e}function l0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=mi(e.nextSibling),e===null))return null;return e}function pd(e){return e.data==="$?"||e.data==="$~"}function yd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Zb(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function mi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var _d=null;function o0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return mi(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function u0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function c0(e,n,r){switch(n=mc(r),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function vo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ya(e)}var gi=new Map,h0=new Set;function gc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Es=ot.d;ot.d={f:Jb,r:t1,D:e1,C:n1,L:i1,m:s1,X:a1,S:r1,M:l1};function Jb(){var e=Es.f(),n=ac();return e||n}function t1(e){var n=si(e);n!==null&&n.tag===5&&n.type==="form"?Cp(n):Es.r(e)}var Za=typeof document>"u"?null:document;function f0(e,n,r){var l=Za;if(l&&typeof n=="string"&&n){var h=Pn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),h0.has(h)||(h0.add(h),e={rel:e,crossOrigin:r,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),vn(n,"link",e),We(n),l.head.appendChild(n)))}}function e1(e){Es.D(e),f0("dns-prefetch",e,null)}function n1(e,n){Es.C(e,n),f0("preconnect",e,n)}function i1(e,n,r){Es.L(e,n,r);var l=Za;if(l&&e&&n){var h='link[rel="preload"][as="'+Pn(n)+'"]';n==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Pn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Pn(r.imageSizes)+'"]')):h+='[href="'+Pn(e)+'"]';var d=h;switch(n){case"style":d=Ja(e);break;case"script":d=tl(e)}gi.has(d)||(e=A({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),gi.set(d,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(Eo(d))||n==="script"&&l.querySelector(To(d))||(n=l.createElement("link"),vn(n,"link",e),We(n),l.head.appendChild(n)))}}function s1(e,n){Es.m(e,n);var r=Za;if(r&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Pn(l)+'"][href="'+Pn(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=tl(e)}if(!gi.has(d)&&(e=A({rel:"modulepreload",href:e},n),gi.set(d,e),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(To(d)))return}l=r.createElement("link"),vn(l,"link",e),We(l),r.head.appendChild(l)}}}function r1(e,n,r){Es.S(e,n,r);var l=Za;if(l&&e){var h=Mi(l).hoistableStyles,d=Ja(e);n=n||"default";var p=h.get(d);if(!p){var T={loading:0,preload:null};if(p=l.querySelector(Eo(d)))T.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":n},r),(r=gi.get(d))&&vd(e,r);var I=p=l.createElement("link");We(I),vn(I,"link",e),I._p=new Promise(function(z,Q){I.onload=z,I.onerror=Q}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,pc(p,n,l)}p={type:"stylesheet",instance:p,count:1,state:T},h.set(d,p)}}}function a1(e,n){Es.X(e,n);var r=Za;if(r&&e){var l=Mi(r).hoistableScripts,h=tl(e),d=l.get(h);d||(d=r.querySelector(To(h)),d||(e=A({src:e,async:!0},n),(n=gi.get(h))&&Ed(e,n),d=r.createElement("script"),We(d),vn(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function l1(e,n){Es.M(e,n);var r=Za;if(r&&e){var l=Mi(r).hoistableScripts,h=tl(e),d=l.get(h);d||(d=r.querySelector(To(h)),d||(e=A({src:e,async:!0,type:"module"},n),(n=gi.get(h))&&Ed(e,n),d=r.createElement("script"),We(d),vn(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function d0(e,n,r,l){var h=(h=Vt.current)?gc(h):null;if(!h)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Ja(r.href),r=Mi(h).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Ja(r.href);var d=Mi(h).hoistableStyles,p=d.get(e);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,p),(d=h.querySelector(Eo(e)))&&!d._p&&(p.instance=d,p.state.loading=5),gi.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},gi.set(e,r),d||o1(h,e,r,p.state))),n&&l===null)throw Error(a(528,""));return p}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=tl(r),r=Mi(h).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ja(e){return'href="'+Pn(e)+'"'}function Eo(e){return'link[rel="stylesheet"]['+e+"]"}function m0(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function o1(e,n,r,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),vn(n,"link",r),We(n),e.head.appendChild(n))}function tl(e){return'[src="'+Pn(e)+'"]'}function To(e){return"script[async]"+e}function g0(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Pn(r.href)+'"]');if(l)return n.instance=l,We(l),l;var h=A({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),We(l),vn(l,"style",h),pc(l,r.precedence,e),n.instance=l;case"stylesheet":h=Ja(r.href);var d=e.querySelector(Eo(h));if(d)return n.state.loading|=4,n.instance=d,We(d),d;l=m0(r),(h=gi.get(h))&&vd(l,h),d=(e.ownerDocument||e).createElement("link"),We(d);var p=d;return p._p=new Promise(function(T,I){p.onload=T,p.onerror=I}),vn(d,"link",l),n.state.loading|=4,pc(d,r.precedence,e),n.instance=d;case"script":return d=tl(r.src),(h=e.querySelector(To(d)))?(n.instance=h,We(h),h):(l=r,(h=gi.get(d))&&(l=A({},r),Ed(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),We(h),vn(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,pc(l,r.precedence,e));return n.instance}function pc(e,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,p=0;p<l.length;p++){var T=l[p];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function vd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ed(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var yc=null;function p0(e,n,r){if(yc===null){var l=new Map,h=yc=new Map;h.set(r,l)}else h=yc,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var d=r[h];if(!(d[Di]||d[me]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(n)||"";p=e+p;var T=l.get(p);T?T.push(d):l.set(p,[d])}}return l}function y0(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function u1(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function _0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function c1(e,n,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Ja(l.href),d=n.querySelector(Eo(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=_c.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=d,We(d);return}d=n.ownerDocument||n,l=m0(l),(h=gi.get(h))&&vd(l,h),d=d.createElement("link"),We(d);var p=d;p._p=new Promise(function(T,I){p.onload=T,p.onerror=I}),vn(d,"link",l),r.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=_c.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var Td=0;function h1(e,n){return e.stylesheets&&e.count===0&&Ec(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Ec(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Td===0&&(Td=62500*Fb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ec(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Td?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function _c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var vc=null;function Ec(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,vc=new Map,n.forEach(f1,e),vc=null,_c.call(e))}function f1(e,n){if(!(n.state.loading&4)){var r=vc.get(e);if(r)var l=r.get(null);else{r=new Map,vc.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var p=h[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(r.set(p.dataset.precedence,p),l=p)}l&&r.set(null,l)}h=n.instance,p=h.getAttribute("data-precedence"),d=r.get(p)||l,d===l&&r.set(null,h),r.set(p,h),this.count++,l=_c.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var bo={$$typeof:_t,Provider:null,Consumer:null,_currentValue:xt,_currentValue2:xt,_threadCount:0};function d1(e,n,r,l,h,d,p,T,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=an(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=an(0),this.hiddenUpdates=an(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function v0(e,n,r,l,h,d,p,T,I,z,Q,W){return e=new d1(e,n,r,p,I,z,Q,W,T),n=1,d===!0&&(n|=24),d=Wn(3,null,null,n),e.current=d,d.stateNode=e,n=Jh(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:r,cache:n},sf(d),e}function E0(e){return e?(e=Da,e):Da}function T0(e,n,r,l,h,d){h=E0(h),l.context===null?l.context=h:l.pendingContext=h,l=Qs(n),l.payload={element:r},d=d===void 0?null:d,d!==null&&(l.callback=d),r=$s(e,l,n),r!==null&&(Hn(r,e,n),Jl(r,e,n))}function b0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function bd(e,n){b0(e,n),(e=e.alternate)&&b0(e,n)}function S0(e){if(e.tag===13||e.tag===31){var n=Qr(e,67108864);n!==null&&Hn(n,e,67108864),bd(e,67108864)}}function A0(e){if(e.tag===13||e.tag===31){var n=ni();n=de(n);var r=Qr(e,n);r!==null&&Hn(r,e,n),bd(e,n)}}var Tc=!0;function m1(e,n,r,l){var h=F.T;F.T=null;var d=ot.p;try{ot.p=2,Sd(e,n,r,l)}finally{ot.p=d,F.T=h}}function g1(e,n,r,l){var h=F.T;F.T=null;var d=ot.p;try{ot.p=8,Sd(e,n,r,l)}finally{ot.p=d,F.T=h}}function Sd(e,n,r,l){if(Tc){var h=Ad(l);if(h===null)ud(e,n,l,bc,r),x0(e,l);else if(y1(h,e,n,r,l))l.stopPropagation();else if(x0(e,l),n&4&&-1<p1.indexOf(e)){for(;h!==null;){var d=si(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=kt(d.pendingLanes);if(p!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;p;){var I=1<<31-yt(p);T.entanglements[1]|=I,p&=~I}Qi(d),(he&6)===0&&(sc=Xe()+500,po(0))}}break;case 31:case 13:T=Qr(d,2),T!==null&&Hn(T,d,2),ac(),bd(d,2)}if(d=Ad(l),d===null&&ud(e,n,l,bc,r),d===h)break;h=d}h!==null&&l.stopPropagation()}else ud(e,n,l,null,r)}}function Ad(e){return e=ri(e),wd(e)}var bc=null;function wd(e){if(bc=null,e=Oi(e),e!==null){var n=c(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=f(n),e!==null)return e;e=null}else if(r===31){if(e=g(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return bc=e,null}function w0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yt()){case P:return 2;case tt:return 8;case lt:case pt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var xd=!1,sr=null,rr=null,ar=null,So=new Map,Ao=new Map,lr=[],p1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x0(e,n){switch(e){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":So.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(n.pointerId)}}function wo(e,n,r,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},n!==null&&(n=si(n),n!==null&&S0(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function y1(e,n,r,l,h){switch(n){case"focusin":return sr=wo(sr,e,n,r,l,h),!0;case"dragenter":return rr=wo(rr,e,n,r,l,h),!0;case"mouseover":return ar=wo(ar,e,n,r,l,h),!0;case"pointerover":var d=h.pointerId;return So.set(d,wo(So.get(d)||null,e,n,r,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ao.set(d,wo(Ao.get(d)||null,e,n,r,l,h)),!0}return!1}function R0(e){var n=Oi(e.target);if(n!==null){var r=c(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){e.blockedOn=n,Fe(e.priority,function(){A0(r)});return}}else if(n===31){if(n=g(r),n!==null){e.blockedOn=n,Fe(e.priority,function(){A0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Ad(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Pl=l,r.target.dispatchEvent(l),Pl=null}else return n=si(r),n!==null&&S0(n),e.blockedOn=r,!1;n.shift()}return!0}function C0(e,n,r){Sc(e)&&r.delete(n)}function _1(){xd=!1,sr!==null&&Sc(sr)&&(sr=null),rr!==null&&Sc(rr)&&(rr=null),ar!==null&&Sc(ar)&&(ar=null),So.forEach(C0),Ao.forEach(C0)}function Ac(e,n){e.blockedOn===n&&(e.blockedOn=null,xd||(xd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_1)))}var wc=null;function I0(e){wc!==e&&(wc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){wc===e&&(wc=null);for(var n=0;n<e.length;n+=3){var r=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(wd(l||r)===null)continue;break}var d=si(r);d!==null&&(e.splice(n,3),n-=3,Af(d,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function el(e){function n(I){return Ac(I,e)}sr!==null&&Ac(sr,e),rr!==null&&Ac(rr,e),ar!==null&&Ac(ar,e),So.forEach(n),Ao.forEach(n);for(var r=0;r<lr.length;r++){var l=lr[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<lr.length&&(r=lr[0],r.blockedOn===null);)R0(r),r.blockedOn===null&&lr.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],d=r[l+1],p=h[qe]||null;if(typeof d=="function")p||I0(r);else if(p){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,p=d[qe]||null)T=p.formAction;else if(wd(h)!==null)continue}else T=p.action;typeof T=="function"?r[l+1]=T:(r.splice(l,3),l-=3),I0(r)}}}function N0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Rd(e){this._internalRoot=e}xc.prototype.render=Rd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,l=ni();T0(r,l,e,n,null,null)},xc.prototype.unmount=Rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;T0(e.current,2,null,e,null,null),ac(),n[Dn]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var n=wn();e={blockedOn:null,target:e,priority:n};for(var r=0;r<lr.length&&n!==0&&n<lr[r].priority;r++);lr.splice(r,0,e),r===0&&R0(e)}};var D0=t.version;if(D0!=="19.2.0")throw Error(a(527,D0,"19.2.0"));ot.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=y(n),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var v1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{ht=Rc.inject(v1),X=Rc}catch{}}return Ro.createRoot=function(e,n){if(!o(e))throw Error(a(299));var r=!1,l="",h=jp,d=Up,p=zp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=v0(e,1,!1,null,null,r,l,null,h,d,p,N0),e[Dn]=n.current,od(e),new Rd(n)},Ro.hydrateRoot=function(e,n,r){if(!o(e))throw Error(a(299));var l=!1,h="",d=jp,p=Up,T=zp,I=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(I=r.formState)),n=v0(e,1,!0,n,r??null,l,h,I,d,p,T,N0),n.context=E0(null),r=n.current,l=ni(),l=de(l),h=Qs(l),h.callback=null,$s(r,h,l),r=l,n.current.lanes=r,An(n,r),Qi(n),e[Dn]=n.current,od(e),new xc(n)},Ro.version="19.2.0",Ro}var B0;function N1(){if(B0)return Nd.exports;B0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Nd.exports=I1(),Nd.exports}var D1=N1();const O1=()=>{};var q0={};const _v=function(s){const t=[];let i=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},M1=function(s){const t=[];let i=0,a=0;for(;i<s.length;){const o=s[i++];if(o<128)t[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[i++];t[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[i++],f=s[i++],g=s[i++],_=((o&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;t[a++]=String.fromCharCode(55296+(_>>10)),t[a++]=String.fromCharCode(56320+(_&1023))}else{const c=s[i++],f=s[i++];t[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return t.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const c=s[o],f=o+1<s.length,g=f?s[o+1]:0,_=o+2<s.length,y=_?s[o+2]:0,S=c>>2,A=(c&3)<<4|g>>4;let x=(g&15)<<2|y>>6,q=y&63;_||(q=64,f||(x=64)),a.push(i[S],i[A],i[x],i[q])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(_v(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):M1(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const c=i[s.charAt(o++)],g=o<s.length?i[s.charAt(o)]:0;++o;const y=o<s.length?i[s.charAt(o)]:64;++o;const A=o<s.length?i[s.charAt(o)]:64;if(++o,c==null||g==null||y==null||A==null)throw new V1;const x=c<<2|g>>4;if(a.push(x),y!==64){const q=g<<4&240|y>>2;if(a.push(q),A!==64){const Y=y<<6&192|A;a.push(Y)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class V1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k1=function(s){const t=_v(s);return vv.encodeByteArray(t,!0)},Qc=function(s){return k1(s).replace(/\./g,"")},Ev=function(s){try{return vv.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function L1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const P1=()=>L1().__FIREBASE_DEFAULTS__,j1=()=>{if(typeof process>"u"||typeof q0>"u")return;const s=q0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},U1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Ev(s[1]);return t&&JSON.parse(t)},dh=()=>{try{return O1()||P1()||j1()||U1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Tv=s=>dh()?.emulatorHosts?.[s],z1=s=>{const t=Tv(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),a]:[t.substring(0,i),a]},bv=()=>dh()?.config,Sv=s=>dh()?.[`_${s}`];class B1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,a))}}}function El(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Av(s){return(await fetch(s,{credentials:"include"})).ok}function q1(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=t||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Qc(JSON.stringify(i)),Qc(JSON.stringify(f)),""].join(".")}const Vo={};function H1(){const s={prod:[],emulator:[]};for(const t of Object.keys(Vo))Vo[t]?s.emulator.push(t):s.prod.push(t);return s}function G1(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let H0=!1;function wv(s,t){if(typeof window>"u"||typeof document>"u"||!El(window.location.host)||Vo[s]===t||Vo[s]||H0)return;Vo[s]=t;function i(x){return`__firebase__banner__${x}`}const a="__firebase__banner",c=H1().prod.length>0;function f(){const x=document.getElementById(a);x&&x.remove()}function g(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function _(x,q){x.setAttribute("width","24"),x.setAttribute("id",q),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{H0=!0,f()},x}function S(x,q){x.setAttribute("id",q),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function A(){const x=G1(a),q=i("text"),Y=document.getElementById(q)||document.createElement("span"),at=i("learnmore"),nt=document.getElementById(at)||document.createElement("a"),ct=i("preprendIcon"),rt=document.getElementById(ct)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const _t=x.element;g(_t),S(nt,at);const wt=y();_(rt,ct),_t.append(rt,Y,nt,wt),document.body.appendChild(_t)}c?(Y.innerText="Preview backend disconnected.",rt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(rt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function Q1(){const s=dh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function K1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Y1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X1(){const s=Nn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function W1(){return!Q1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z1(){try{return typeof indexedDB=="object"}catch{return!1}}function J1(){return new Promise((s,t)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(i){t(i)}})}const tS="FirebaseError";class Cs extends Error{constructor(t,i,a){super(i),this.code=t,this.customData=a,this.name=tS,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(t,i,a){this.service=t,this.serviceName=i,this.errors=a}create(t,...i){const a=i[0]||{},o=`${this.service}/${t}`,c=this.errors[t],f=c?eS(c,a):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Cs(o,g,a)}}function eS(s,t){return s.replace(nS,(i,a)=>{const o=t[a];return o!=null?String(o):`<${a}?>`})}const nS=/\{\$([^}]+)}/g;function iS(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function la(s,t){if(s===t)return!0;const i=Object.keys(s),a=Object.keys(t);for(const o of i){if(!a.includes(o))return!1;const c=s[o],f=t[o];if(G0(c)&&G0(f)){if(!la(c,f))return!1}else if(c!==f)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function G0(s){return s!==null&&typeof s=="object"}function Xo(s){const t=[];for(const[i,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Io(s){const t={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,c]=a.split("=");t[decodeURIComponent(o)]=decodeURIComponent(c)}}),t}function No(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}function sS(s,t){const i=new rS(s,t);return i.subscribe.bind(i)}class rS{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,a){let o;if(t===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");aS(t,["next","error","complete"])?o=t:o={next:t,error:i,complete:a},o.next===void 0&&(o.next=Vd),o.error===void 0&&(o.error=Vd),o.complete===void 0&&(o.complete=Vd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aS(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function Vd(){}function bn(s){return s&&s._delegate?s._delegate:s}class oa{constructor(t,i,a){this.name=t,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ra="[DEFAULT]";class lS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const a=new B1;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),a=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uS(t))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(t=ra){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ra){return this.instances.has(t)}getOptions(t=ra){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&f.resolve(o)}return o}onInit(t,i){const a=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(a)??new Set;o.add(t),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&t(c,a),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:oS(t),options:i}),this.instances.set(t,a),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=ra){return this.component?this.component.multipleInstances?t:ra:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oS(s){return s===ra?void 0:s}function uS(s){return s.instantiationMode==="EAGER"}class cS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new lS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var ee;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ee||(ee={}));const hS={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},fS=ee.INFO,dS={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},mS=(s,t,...i)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),o=dS[t];if(o)console[o](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Sm{constructor(t){this.name=t,this._logLevel=fS,this._logHandler=mS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ee))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?hS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...t),this._logHandler(this,ee.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...t),this._logHandler(this,ee.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...t),this._logHandler(this,ee.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...t),this._logHandler(this,ee.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...t),this._logHandler(this,ee.ERROR,...t)}}const gS=(s,t)=>t.some(i=>s instanceof i);let F0,Q0;function pS(){return F0||(F0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yS(){return Q0||(Q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xv=new WeakMap,Qd=new WeakMap,Rv=new WeakMap,kd=new WeakMap,Am=new WeakMap;function _S(s){const t=new Promise((i,a)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{i(pr(s.result)),o()},f=()=>{a(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&xv.set(i,s)}).catch(()=>{}),Am.set(t,s),t}function vS(s){if(Qd.has(s))return;const t=new Promise((i,a)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{i(),o()},f=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Qd.set(s,t)}let $d={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return Qd.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Rv.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return pr(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function ES(s){$d=s($d)}function TS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const a=s.call(Ld(this),t,...i);return Rv.set(a,t.sort?t.sort():[t]),pr(a)}:yS().includes(s)?function(...t){return s.apply(Ld(this),t),pr(xv.get(this))}:function(...t){return pr(s.apply(Ld(this),t))}}function bS(s){return typeof s=="function"?TS(s):(s instanceof IDBTransaction&&vS(s),gS(s,pS())?new Proxy(s,$d):s)}function pr(s){if(s instanceof IDBRequest)return _S(s);if(kd.has(s))return kd.get(s);const t=bS(s);return t!==s&&(kd.set(s,t),Am.set(t,s)),t}const Ld=s=>Am.get(s);function SS(s,t,{blocked:i,upgrade:a,blocking:o,terminated:c}={}){const f=indexedDB.open(s,t),g=pr(f);return a&&f.addEventListener("upgradeneeded",_=>{a(pr(f.result),_.oldVersion,_.newVersion,pr(f.transaction),_)}),i&&f.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),o&&_.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const AS=["get","getKey","getAll","getAllKeys","count"],wS=["put","add","delete","clear"],Pd=new Map;function $0(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Pd.get(t))return Pd.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,o=wS.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||AS.includes(i)))return;const c=async function(f,...g){const _=this.transaction(f,o?"readwrite":"readonly");let y=_.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[i](...g),o&&_.done]))[0]};return Pd.set(t,c),c}ES(s=>({...s,get:(t,i,a)=>$0(t,i)||s.get(t,i,a),has:(t,i)=>!!$0(t,i)||s.has(t,i)}));class xS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(RS(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function RS(s){return s.getComponent()?.type==="VERSION"}const Kd="@firebase/app",K0="0.14.6";const As=new Sm("@firebase/app"),CS="@firebase/app-compat",IS="@firebase/analytics-compat",NS="@firebase/analytics",DS="@firebase/app-check-compat",OS="@firebase/app-check",MS="@firebase/auth",VS="@firebase/auth-compat",kS="@firebase/database",LS="@firebase/data-connect",PS="@firebase/database-compat",jS="@firebase/functions",US="@firebase/functions-compat",zS="@firebase/installations",BS="@firebase/installations-compat",qS="@firebase/messaging",HS="@firebase/messaging-compat",GS="@firebase/performance",FS="@firebase/performance-compat",QS="@firebase/remote-config",$S="@firebase/remote-config-compat",KS="@firebase/storage",YS="@firebase/storage-compat",XS="@firebase/firestore",WS="@firebase/ai",ZS="@firebase/firestore-compat",JS="firebase",tA="12.6.0";const Yd="[DEFAULT]",eA={[Kd]:"fire-core",[CS]:"fire-core-compat",[NS]:"fire-analytics",[IS]:"fire-analytics-compat",[OS]:"fire-app-check",[DS]:"fire-app-check-compat",[MS]:"fire-auth",[VS]:"fire-auth-compat",[kS]:"fire-rtdb",[LS]:"fire-data-connect",[PS]:"fire-rtdb-compat",[jS]:"fire-fn",[US]:"fire-fn-compat",[zS]:"fire-iid",[BS]:"fire-iid-compat",[qS]:"fire-fcm",[HS]:"fire-fcm-compat",[GS]:"fire-perf",[FS]:"fire-perf-compat",[QS]:"fire-rc",[$S]:"fire-rc-compat",[KS]:"fire-gcs",[YS]:"fire-gcs-compat",[XS]:"fire-fst",[ZS]:"fire-fst-compat",[WS]:"fire-vertex","fire-js":"fire-js",[JS]:"fire-js-all"};const $c=new Map,nA=new Map,Xd=new Map;function Y0(s,t){try{s.container.addComponent(t)}catch(i){As.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function dl(s){const t=s.name;if(Xd.has(t))return As.debug(`There were multiple attempts to register component ${t}.`),!1;Xd.set(t,s);for(const i of $c.values())Y0(i,s);for(const i of nA.values())Y0(i,s);return!0}function wm(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function pi(s){return s==null?!1:s.settings!==void 0}const iA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Yo("app","Firebase",iA);class sA{constructor(t,i,a){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const Tl=tA;function Cv(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const a={name:Yd,automaticDataCollectionEnabled:!0,...t},o=a.name;if(typeof o!="string"||!o)throw yr.create("bad-app-name",{appName:String(o)});if(i||(i=bv()),!i)throw yr.create("no-options");const c=$c.get(o);if(c){if(la(i,c.options)&&la(a,c.config))return c;throw yr.create("duplicate-app",{appName:o})}const f=new cS(o);for(const _ of Xd.values())f.addComponent(_);const g=new sA(i,a,f);return $c.set(o,g),g}function Iv(s=Yd){const t=$c.get(s);if(!t&&s===Yd&&bv())return Cv();if(!t)throw yr.create("no-app",{appName:s});return t}function _r(s,t,i){let a=eA[s]??s;i&&(a+=`-${i}`);const o=a.match(/\s|\//),c=t.match(/\s|\//);if(o||c){const f=[`Unable to register library "${a}" with version "${t}":`];o&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),As.warn(f.join(" "));return}dl(new oa(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}const rA="firebase-heartbeat-database",aA=1,zo="firebase-heartbeat-store";let jd=null;function Nv(){return jd||(jd=SS(rA,aA,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(zo)}catch(i){console.warn(i)}}}}).catch(s=>{throw yr.create("idb-open",{originalErrorMessage:s.message})})),jd}async function lA(s){try{const i=(await Nv()).transaction(zo),a=await i.objectStore(zo).get(Dv(s));return await i.done,a}catch(t){if(t instanceof Cs)As.warn(t.message);else{const i=yr.create("idb-get",{originalErrorMessage:t?.message});As.warn(i.message)}}}async function X0(s,t){try{const a=(await Nv()).transaction(zo,"readwrite");await a.objectStore(zo).put(t,Dv(s)),await a.done}catch(i){if(i instanceof Cs)As.warn(i.message);else{const a=yr.create("idb-set",{originalErrorMessage:i?.message});As.warn(a.message)}}}function Dv(s){return`${s.name}!${s.options.appId}`}const oA=1024,uA=30;class cA{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new fA(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=W0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>uA){const o=dA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){As.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=W0(),{heartbeatsToSend:i,unsentEntries:a}=hA(this._heartbeatsCache.heartbeats),o=Qc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return As.warn(t),""}}}function W0(){return new Date().toISOString().substring(0,10)}function hA(s,t=oA){const i=[];let a=s.slice();for(const o of s){const c=i.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Z0(i)>t){c.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Z0(i)>t){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class fA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z1()?J1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await lA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return X0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return X0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function Z0(s){return Qc(JSON.stringify({version:2,heartbeats:s})).length}function dA(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,t=a);return t}function mA(s){dl(new oa("platform-logger",t=>new xS(t),"PRIVATE")),dl(new oa("heartbeat",t=>new cA(t),"PRIVATE")),_r(Kd,K0,s),_r(Kd,K0,"esm2020"),_r("fire-js","")}mA("");var gA="firebase",pA="12.6.0";_r(gA,pA,"app");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vr,Ov;(function(){var s;function t(N,w){function C(){}C.prototype=w.prototype,N.F=w.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(D,O,L){for(var R=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)R[ue-2]=arguments[ue];return w.prototype[O].apply(D,R)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,w,C){C||(C=0);const D=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)D[O]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(O=0;O<16;++O)D[O]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=N.g[0],C=N.g[1],O=N.g[2];let L=N.g[3],R;R=w+(L^C&(O^L))+D[0]+3614090360&4294967295,w=C+(R<<7&4294967295|R>>>25),R=L+(O^w&(C^O))+D[1]+3905402710&4294967295,L=w+(R<<12&4294967295|R>>>20),R=O+(C^L&(w^C))+D[2]+606105819&4294967295,O=L+(R<<17&4294967295|R>>>15),R=C+(w^O&(L^w))+D[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(L^C&(O^L))+D[4]+4118548399&4294967295,w=C+(R<<7&4294967295|R>>>25),R=L+(O^w&(C^O))+D[5]+1200080426&4294967295,L=w+(R<<12&4294967295|R>>>20),R=O+(C^L&(w^C))+D[6]+2821735955&4294967295,O=L+(R<<17&4294967295|R>>>15),R=C+(w^O&(L^w))+D[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(L^C&(O^L))+D[8]+1770035416&4294967295,w=C+(R<<7&4294967295|R>>>25),R=L+(O^w&(C^O))+D[9]+2336552879&4294967295,L=w+(R<<12&4294967295|R>>>20),R=O+(C^L&(w^C))+D[10]+4294925233&4294967295,O=L+(R<<17&4294967295|R>>>15),R=C+(w^O&(L^w))+D[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(L^C&(O^L))+D[12]+1804603682&4294967295,w=C+(R<<7&4294967295|R>>>25),R=L+(O^w&(C^O))+D[13]+4254626195&4294967295,L=w+(R<<12&4294967295|R>>>20),R=O+(C^L&(w^C))+D[14]+2792965006&4294967295,O=L+(R<<17&4294967295|R>>>15),R=C+(w^O&(L^w))+D[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(O^L&(C^O))+D[1]+4129170786&4294967295,w=C+(R<<5&4294967295|R>>>27),R=L+(C^O&(w^C))+D[6]+3225465664&4294967295,L=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(L^w))+D[11]+643717713&4294967295,O=L+(R<<14&4294967295|R>>>18),R=C+(L^w&(O^L))+D[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^L&(C^O))+D[5]+3593408605&4294967295,w=C+(R<<5&4294967295|R>>>27),R=L+(C^O&(w^C))+D[10]+38016083&4294967295,L=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(L^w))+D[15]+3634488961&4294967295,O=L+(R<<14&4294967295|R>>>18),R=C+(L^w&(O^L))+D[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^L&(C^O))+D[9]+568446438&4294967295,w=C+(R<<5&4294967295|R>>>27),R=L+(C^O&(w^C))+D[14]+3275163606&4294967295,L=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(L^w))+D[3]+4107603335&4294967295,O=L+(R<<14&4294967295|R>>>18),R=C+(L^w&(O^L))+D[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^L&(C^O))+D[13]+2850285829&4294967295,w=C+(R<<5&4294967295|R>>>27),R=L+(C^O&(w^C))+D[2]+4243563512&4294967295,L=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(L^w))+D[7]+1735328473&4294967295,O=L+(R<<14&4294967295|R>>>18),R=C+(L^w&(O^L))+D[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(C^O^L)+D[5]+4294588738&4294967295,w=C+(R<<4&4294967295|R>>>28),R=L+(w^C^O)+D[8]+2272392833&4294967295,L=w+(R<<11&4294967295|R>>>21),R=O+(L^w^C)+D[11]+1839030562&4294967295,O=L+(R<<16&4294967295|R>>>16),R=C+(O^L^w)+D[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^L)+D[1]+2763975236&4294967295,w=C+(R<<4&4294967295|R>>>28),R=L+(w^C^O)+D[4]+1272893353&4294967295,L=w+(R<<11&4294967295|R>>>21),R=O+(L^w^C)+D[7]+4139469664&4294967295,O=L+(R<<16&4294967295|R>>>16),R=C+(O^L^w)+D[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^L)+D[13]+681279174&4294967295,w=C+(R<<4&4294967295|R>>>28),R=L+(w^C^O)+D[0]+3936430074&4294967295,L=w+(R<<11&4294967295|R>>>21),R=O+(L^w^C)+D[3]+3572445317&4294967295,O=L+(R<<16&4294967295|R>>>16),R=C+(O^L^w)+D[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^L)+D[9]+3654602809&4294967295,w=C+(R<<4&4294967295|R>>>28),R=L+(w^C^O)+D[12]+3873151461&4294967295,L=w+(R<<11&4294967295|R>>>21),R=O+(L^w^C)+D[15]+530742520&4294967295,O=L+(R<<16&4294967295|R>>>16),R=C+(O^L^w)+D[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(O^(C|~L))+D[0]+4096336452&4294967295,w=C+(R<<6&4294967295|R>>>26),R=L+(C^(w|~O))+D[7]+1126891415&4294967295,L=w+(R<<10&4294967295|R>>>22),R=O+(w^(L|~C))+D[14]+2878612391&4294967295,O=L+(R<<15&4294967295|R>>>17),R=C+(L^(O|~w))+D[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~L))+D[12]+1700485571&4294967295,w=C+(R<<6&4294967295|R>>>26),R=L+(C^(w|~O))+D[3]+2399980690&4294967295,L=w+(R<<10&4294967295|R>>>22),R=O+(w^(L|~C))+D[10]+4293915773&4294967295,O=L+(R<<15&4294967295|R>>>17),R=C+(L^(O|~w))+D[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~L))+D[8]+1873313359&4294967295,w=C+(R<<6&4294967295|R>>>26),R=L+(C^(w|~O))+D[15]+4264355552&4294967295,L=w+(R<<10&4294967295|R>>>22),R=O+(w^(L|~C))+D[6]+2734768916&4294967295,O=L+(R<<15&4294967295|R>>>17),R=C+(L^(O|~w))+D[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~L))+D[4]+4149444226&4294967295,w=C+(R<<6&4294967295|R>>>26),R=L+(C^(w|~O))+D[11]+3174756917&4294967295,L=w+(R<<10&4294967295|R>>>22),R=O+(w^(L|~C))+D[2]+718787259&4294967295,O=L+(R<<15&4294967295|R>>>17),R=C+(L^(O|~w))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}a.prototype.v=function(N,w){w===void 0&&(w=N.length);const C=w-this.blockSize,D=this.C;let O=this.h,L=0;for(;L<w;){if(O==0)for(;L<=C;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<w;)if(D[O++]=N.charCodeAt(L++),O==this.blockSize){o(this,D),O=0;break}}else for(;L<w;)if(D[O++]=N[L++],O==this.blockSize){o(this,D),O=0;break}}this.h=O,this.o+=w},a.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)N[w++]=this.g[C]>>>D&255;return N};function c(N,w){var C=g;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=w(N)}function f(N,w){this.h=w;const C=[];let D=!0;for(let O=N.length-1;O>=0;O--){const L=N[O]|0;D&&L==w||(C[O]=L,D=!1)}this.g=C}var g={};function _(N){return-128<=N&&N<128?c(N,function(w){return new f([w|0],w<0?-1:0)}):new f([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return A;if(N<0)return nt(y(-N));const w=[];let C=1;for(let D=0;N>=C;D++)w[D]=N/C|0,C*=4294967296;return new f(w,0)}function S(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return nt(S(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(w,8));let D=A;for(let L=0;L<N.length;L+=8){var O=Math.min(8,N.length-L);const R=parseInt(N.substring(L,L+O),w);O<8?(O=y(Math.pow(w,O)),D=D.j(O).add(y(R))):(D=D.j(C),D=D.add(y(R)))}return D}var A=_(0),x=_(1),q=_(16777216);s=f.prototype,s.m=function(){if(at(this))return-nt(this).m();let N=0,w=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);N+=(D>=0?D:4294967296+D)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(Y(this))return"0";if(at(this))return"-"+nt(this).toString(N);const w=y(Math.pow(N,6));var C=this;let D="";for(;;){const O=wt(C,w).g;C=ct(C,O.j(w));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=O,Y(C))return L+D;for(;L.length<6;)L="0"+L;D=L+D}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function Y(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function at(N){return N.h==-1}s.l=function(N){return N=ct(this,N),at(N)?-1:Y(N)?0:1};function nt(N){const w=N.g.length,C=[];for(let D=0;D<w;D++)C[D]=~N.g[D];return new f(C,~N.h).add(x)}s.abs=function(){return at(this)?nt(this):this},s.add=function(N){const w=Math.max(this.g.length,N.g.length),C=[];let D=0;for(let O=0;O<=w;O++){let L=D+(this.i(O)&65535)+(N.i(O)&65535),R=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);D=R>>>16,L&=65535,R&=65535,C[O]=R<<16|L}return new f(C,C[C.length-1]&-2147483648?-1:0)};function ct(N,w){return N.add(nt(w))}s.j=function(N){if(Y(this)||Y(N))return A;if(at(this))return at(N)?nt(this).j(nt(N)):nt(nt(this).j(N));if(at(N))return nt(this.j(nt(N)));if(this.l(q)<0&&N.l(q)<0)return y(this.m()*N.m());const w=this.g.length+N.g.length,C=[];for(var D=0;D<2*w;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<N.g.length;O++){const L=this.i(D)>>>16,R=this.i(D)&65535,ue=N.i(O)>>>16,ze=N.i(O)&65535;C[2*D+2*O]+=R*ze,rt(C,2*D+2*O),C[2*D+2*O+1]+=L*ze,rt(C,2*D+2*O+1),C[2*D+2*O+1]+=R*ue,rt(C,2*D+2*O+1),C[2*D+2*O+2]+=L*ue,rt(C,2*D+2*O+2)}for(N=0;N<w;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=w;N<2*w;N++)C[N]=0;return new f(C,0)};function rt(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function _t(N,w){this.g=N,this.h=w}function wt(N,w){if(Y(w))throw Error("division by zero");if(Y(N))return new _t(A,A);if(at(N))return w=wt(nt(N),w),new _t(nt(w.g),nt(w.h));if(at(w))return w=wt(N,nt(w)),new _t(nt(w.g),w.h);if(N.g.length>30){if(at(N)||at(w))throw Error("slowDivide_ only works with positive integers.");for(var C=x,D=w;D.l(N)<=0;)C=Qt(C),D=Qt(D);var O=mt(C,1),L=mt(D,1);for(D=mt(D,2),C=mt(C,2);!Y(D);){var R=L.add(D);R.l(N)<=0&&(O=O.add(C),L=R),D=mt(D,1),C=mt(C,1)}return w=ct(N,O.j(w)),new _t(O,w)}for(O=A;N.l(w)>=0;){for(C=Math.max(1,Math.floor(N.m()/w.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),L=y(C),R=L.j(w);at(R)||R.l(N)>0;)C-=D,L=y(C),R=L.j(w);Y(L)&&(L=x),O=O.add(L),N=ct(N,R)}return new _t(O,N)}s.B=function(N){return wt(this,N).h},s.and=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<w;D++)C[D]=this.i(D)&N.i(D);return new f(C,this.h&N.h)},s.or=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<w;D++)C[D]=this.i(D)|N.i(D);return new f(C,this.h|N.h)},s.xor=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<w;D++)C[D]=this.i(D)^N.i(D);return new f(C,this.h^N.h)};function Qt(N){const w=N.g.length+1,C=[];for(let D=0;D<w;D++)C[D]=N.i(D)<<1|N.i(D-1)>>>31;return new f(C,N.h)}function mt(N,w){const C=w>>5;w%=32;const D=N.g.length-C,O=[];for(let L=0;L<D;L++)O[L]=w>0?N.i(L+C)>>>w|N.i(L+C+1)<<32-w:N.i(L+C);return new f(O,N.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Ov=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=S,vr=f}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mv,Do,Vv,Lc,Wd,kv,Lv,Pv;(function(){var s,t=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var v=a;u=u.split(".");for(var b=0;b<u.length-1;b++){var j=u[b];if(!(j in v))break t;v=v[j]}u=u[u.length-1],b=v[u],m=m(b),m!=b&&m!=null&&t(v,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var v=[],b;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&v.push([b,m[b]]);return v}});var c=c||{},f=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=_,y.apply(null,arguments)}function S(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function A(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(b,j,H){for(var ut=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)ut[Gt-2]=arguments[Gt];return m.prototype[j].apply(b,ut)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function q(u){const m=u.length;if(m>0){const v=Array(m);for(let b=0;b<m;b++)v[b]=u[b];return v}return[]}function Y(u,m){for(let b=1;b<arguments.length;b++){const j=arguments[b];var v=typeof j;if(v=v!="object"?v:j?Array.isArray(j)?"array":v:"null",v=="array"||v=="object"&&typeof j.length=="number"){v=u.length||0;const H=j.length||0;u.length=v+H;for(let ut=0;ut<H;ut++)u[v+ut]=j[ut]}else u.push(j)}}class at{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function nt(u){f.setTimeout(()=>{throw u},0)}function ct(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class rt{constructor(){this.h=this.g=null}add(m,v){const b=_t.get();b.set(m,v),this.h?this.h.next=b:this.g=b,this.h=b}}var _t=new at(()=>new wt,u=>u.reset());class wt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Qt,mt=!1,N=new rt,w=()=>{const u=Promise.resolve(void 0);Qt=()=>{u.then(C)}};function C(){for(var u;u=ct();){try{u.h.call(u.g)}catch(v){nt(v)}var m=_t;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}mt=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function ue(u,m){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}A(ue,O),ue.prototype.init=function(u,m){const v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),F=0;function ot(u,m,v,b,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!b,this.ha=j,this.key=++F,this.da=this.fa=!1}function xt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Xt(u,m,v){for(const b in u)m.call(v,u[b],b,u)}function se(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function V(u){const m={};for(const v in u)m[v]=u[v];return m}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(u,m){let v,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(v in b)u[v]=b[v];for(let H=0;H<$.length;H++)v=$[H],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function J(u){this.src=u,this.g={},this.h=0}J.prototype.add=function(u,m,v,b,j){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ut=Vt(u,m,b,j);return ut>-1?(m=u[ut],v||(m.fa=!1)):(m=new ot(m,this.src,H,!!b,j),m.fa=v,u.push(m)),m};function jt(u,m){const v=m.type;if(v in u.g){var b=u.g[v],j=Array.prototype.indexOf.call(b,m,void 0),H;(H=j>=0)&&Array.prototype.splice.call(b,j,1),H&&(xt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Vt(u,m,v,b){for(let j=0;j<u.length;++j){const H=u[j];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==b)return j}return-1}var $t="closure_lm_"+(Math.random()*1e6|0),Le={};function gt(u,m,v,b,j){if(Array.isArray(m)){for(let H=0;H<m.length;H++)gt(u,m[H],v,b,j);return null}return v=Ds(v),u&&u[ze]?u.J(m,v,g(b)?!!b.capture:!1,j):mn(u,m,v,!1,b,j)}function mn(u,m,v,b,j,H){if(!m)throw Error("Invalid event type");const ut=g(j)?!!j.capture:!!j;let Gt=ns(u);if(Gt||(u[$t]=Gt=new J(u)),v=Gt.add(m,v,b,ut,H),v.proxy)return v;if(b=Vn(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)L||(j=ut),j===void 0&&(j=!1),u.addEventListener(m.toString(),b,j);else if(u.attachEvent)u.attachEvent(kn(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Vn(){function u(v){return m.call(u.src,u.listener,v)}const m=Ii;return u}function Is(u,m,v,b,j){if(Array.isArray(m))for(var H=0;H<m.length;H++)Is(u,m[H],v,b,j);else b=g(b)?!!b.capture:!!b,v=Ds(v),u&&u[ze]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],v=Vt(m,v,b,j),v>-1&&(xt(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=ns(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Vt(m,v,b,j)),(v=u>-1?m[u]:null)&&Ns(v))}function Ns(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ze])jt(m.i,u);else{var v=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(v,b,u.capture):m.detachEvent?m.detachEvent(kn(v),b):m.addListener&&m.removeListener&&m.removeListener(b),(v=ns(m))?(jt(v,u),v.h==0&&(v.src=null,m[$t]=null)):xt(u)}}}function kn(u){return u in Le?Le[u]:Le[u]="on"+u}function Ii(u,m){if(u.da)u=!0;else{m=new ue(m,this);const v=u.listener,b=u.ha||u.src;u.fa&&Ns(u),u=v.call(b,m)}return u}function ns(u){return u=u[$t],u instanceof J?u:null}var Or="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ds(u){return typeof u=="function"?u:(u[Or]||(u[Or]=function(m){return u.handleEvent(m)}),u[Or])}function Pe(){D.call(this),this.i=new J(this),this.M=this,this.G=null}A(Pe,D),Pe.prototype[ze]=!0,Pe.prototype.removeEventListener=function(u,m,v,b){Is(this,u,m,v,b)};function Be(u,m){var v,b=u.G;if(b)for(v=[];b;b=b.G)v.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new O(m,u);else if(m instanceof O)m.target=m.target||u;else{var j=m;m=new O(b,u),dt(m,j)}j=!0;let H,ut;if(v)for(ut=v.length-1;ut>=0;ut--)H=m.g=v[ut],j=Ni(H,b,!0,m)&&j;if(H=m.g=u,j=Ni(H,b,!0,m)&&j,j=Ni(H,b,!1,m)&&j,v)for(ut=0;ut<v.length;ut++)H=m.g=v[ut],j=Ni(H,b,!1,m)&&j}Pe.prototype.N=function(){if(Pe.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let b=0;b<v.length;b++)xt(v[b]);delete u.g[m],u.h--}}this.G=null},Pe.prototype.J=function(u,m,v,b){return this.i.add(String(u),m,!1,v,b)},Pe.prototype.K=function(u,m,v,b){return this.i.add(String(u),m,!0,v,b)};function Ni(u,m,v,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let H=0;H<m.length;++H){const ut=m[H];if(ut&&!ut.da&&ut.capture==v){const Gt=ut.listener,Qe=ut.ha||ut.src;ut.fa&&jt(u.i,ut),j=Gt.call(Qe,b)!==!1&&j}}return j&&!b.defaultPrevented}function Rl(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(u,m||0)}function Mr(u){u.g=Rl(()=>{u.g=null,u.i&&(u.i=!1,Mr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Xe extends D{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yt(u){D.call(this),this.h=u,this.g={}}A(Yt,D);var P=[];function tt(u){Xt(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ns(m)},u),u.g={}}Yt.prototype.N=function(){Yt.Z.N.call(this),tt(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=f.JSON.stringify,pt=f.JSON.parse,Nt=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function At(){}function it(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function X(){O.call(this,"d")}A(X,O);function xe(){O.call(this,"c")}A(xe,O);var yt={},ft=null;function Tt(){return ft=ft||new Pe}yt.Ia="serverreachability";function st(u){O.call(this,yt.Ia,u)}A(st,O);function Ut(u){const m=Tt();Be(m,new st(m))}yt.STAT_EVENT="statevent";function vt(u,m){O.call(this,yt.STAT_EVENT,u),this.stat=m}A(vt,O);function St(u){const m=Tt();Be(m,new vt(m,u))}yt.Ja="timingevent";function kt(u,m){O.call(this,yt.Ja,u),this.size=m}A(kt,O);function fe(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Oe(){this.g=!0}Oe.prototype.ua=function(){this.g=!1};function Qn(u,m,v,b,j,H){u.info(function(){if(u.g)if(H){var ut="",Gt=H.split("&");for(let ce=0;ce<Gt.length;ce++){var Qe=Gt[ce].split("=");if(Qe.length>1){const Ve=Qe[0];Qe=Qe[1];const li=Ve.split("_");ut=li.length>=2&&li[1]=="type"?ut+(Ve+"="+Qe+"&"):ut+(Ve+"=redacted&")}}}else ut=null;else ut=H;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+m+`
`+v+`
`+ut})}function Ln(u,m,v,b,j,H,ut){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+m+`
`+v+`
`+H+" "+ut})}function an(u,m,v,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ve(u,v)+(b?" "+b:"")})}function An(u,m){u.info(function(){return"TIMEOUT: "+m})}Oe.prototype.info=function(){};function ve(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var v=H[u];if(!(v.length<2)){var b=v[1];if(Array.isArray(b)&&!(b.length<1)){var j=b[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ut=1;ut<b.length;ut++)b[ut]=""}}}}return lt(H)}catch{return m}}var Me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Re={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ot;function de(){}A(de,At),de.prototype.g=function(){return new XMLHttpRequest},Ot=new de;function Ee(u){return encodeURIComponent(String(u))}function wn(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Fe(u,m,v,b){this.j=u,this.i=m,this.l=v,this.S=b||1,this.V=new Yt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}var me={},qe={};function Dn(u,m,v){u.M=1,u.A=kr(Ze(m)),u.u=v,u.R=!0,$n(u,null)}function $n(u,m){u.F=Date.now(),Di(u),u.B=Ze(u.A);var v=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),Ea(v.i,"t",b),u.C=0,v=u.j.L,u.h=new je,u.g=Tu(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Xe(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,b=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(P[0]=j.toString()),j=P);for(let H=0;H<j.length;H++){const ut=gt(v,j[H],b||m.handleEvent,!1,m.h||m);if(!ut)break;m.g[ut.key]=ut}m=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ut(),Qn(u.i,u.v,u.B,u.l,u.S,u.u)}Fe.prototype.ba=function(u){u=u.target;const m=this.O;m&&Ei(u)==3?m.j():this.Y(u)},Fe.prototype.Y=function(u){try{if(u==this.g)t:{const Gt=Ei(this.g),Qe=this.g.ya(),ce=this.g.ca();if(!(Gt<3)&&(Gt!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||Gt!=4||Qe==7||(Qe==8||ce<=0?Ut(3):Ut(2)),Oi(this);var m=this.g.ca();this.X=m;var v=Vr(this);if(this.o=m==200,Ln(this.i,this.v,this.B,this.l,this.S,Gt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var b,j=this.g;if((b=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(b)){var H=b;break e}}H=null}if(u=H)an(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mi(this,u);else{this.o=!1,this.m=3,St(12),Kn(this),si(this);break t}}if(this.R){u=!0;let Ve;for(;!this.K&&this.C<v.length;)if(Ve=ou(this,v),Ve==qe){Gt==4&&(this.m=4,St(14),u=!1),an(this.i,this.l,null,"[Incomplete Response]");break}else if(Ve==me){this.m=4,St(15),an(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else an(this.i,this.l,Ve,null),Mi(this,Ve);if(lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||v.length!=0||this.h.h||(this.m=1,St(16),u=!1),this.o=this.o&&u,!u)an(this.i,this.l,v,"[Invalid Chunked Response]"),Kn(this),si(this);else if(v.length>0&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.aa&&!ut.P&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ql(ut),ut.P=!0,St(11))}}else an(this.i,this.l,v,null),Mi(this,v);Gt==4&&Kn(this),this.o&&!this.K&&(Gt==4?yu(this.j,this):(this.o=!1,Di(this)))}else ss(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Kn(this),si(this)}}}catch{}finally{}};function Vr(u){if(!lu(u))return u.g.la();const m=gn(u.g);if(m==="")return"";let v="";const b=m.length,j=Ei(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Kn(u),si(u),"";u.h.i=new f.TextDecoder}for(let H=0;H<b;H++)u.h.h=!0,v+=u.h.i.decode(m[H],{stream:!(j&&H==b-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function lu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function ou(u,m){var v=u.C,b=m.indexOf(`
`,v);return b==-1?qe:(v=Number(m.substring(v,b)),isNaN(v)?me:(b+=1,b+v>m.length?qe:(m=m.slice(b,b+v),u.C=b+v,m)))}Fe.prototype.cancel=function(){this.K=!0,Kn(this)};function Di(u){u.T=Date.now()+u.H,ya(u,u.H)}function ya(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=fe(y(u.aa,u),m)}function Oi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Fe.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(An(this.i,this.B),this.M!=2&&(Ut(),St(17)),Kn(this),this.m=2,si(this)):ya(this,this.T-u)};function si(u){u.j.I==0||u.K||yu(u.j,u)}function Kn(u){Oi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,tt(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Mi(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||ki(v.h,u))){if(!u.L&&ki(v.h,u)&&v.I==3){try{var b=v.Ba.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)wa(v),Us(v);else break t;qr(v),St(18)}}else v.xa=j[1],0<v.xa-v.K&&j[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=fe(y(v.Va,v),6e3));Vi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Bi(v,11)}else if((u.L||v.g==u)&&wa(v),!R(m))for(j=v.Ba.g.parse(m),m=0;m<j.length;m++){let ce=j[m];const Ve=ce[0];if(!(Ve<=v.K))if(v.K=Ve,ce=ce[1],v.I==2)if(ce[0]=="c"){v.M=ce[1],v.ba=ce[2];const li=ce[3];li!=null&&(v.ka=li,v.j.info("VER="+v.ka));const qi=ce[4];qi!=null&&(v.za=qi,v.j.info("SVER="+v.za));const Ti=ce[5];Ti!=null&&typeof Ti=="number"&&Ti>0&&(b=1.5*Ti,v.O=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const bi=u.g;if(bi){const Hr=bi.g?bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var H=b.h;H.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Nl(H,H.h),H.h=null))}if(b.G){const xa=bi.g?bi.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(b.wa=xa,pe(b.J,b.G,xa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),b=v;var ut=u;if(b.na=Eu(b,b.L?b.ba:null,b.W),ut.L){Dl(b.h,ut);var Gt=ut,Qe=b.O;Qe&&(Gt.H=Qe),Gt.D&&(Oi(Gt),Di(Gt)),b.g=ut}else gu(b);v.i.length>0&&zi(v)}else ce[0]!="stop"&&ce[0]!="close"||Bi(v,7);else v.I==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Bi(v,7):zl(v):ce[0]!="noop"&&v.l&&v.l.qa(ce),v.A=0)}}Ut(4)}catch{}}var We=class{constructor(u,m){this.g=u,this.map=m}};function Cl(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vi(u){return u.h?1:u.g?u.g.size:0}function ki(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Nl(u,m){u.g?u.g.add(m):u.h=m}function Dl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Cl.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ol(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return q(u.i)}var uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const b=u[v].indexOf("=");let j,H=null;b>=0?(j=u[v].substring(0,b),H=u[v].substring(b+1)):j=u[v],m(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Yn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Yn?(this.l=u.l,cn(this,u.j),this.o=u.o,this.g=u.g,Os(this,u.u),this.h=u.h,Ml(this,du(u.i)),this.m=u.m):u&&(m=String(u).match(uu))?(this.l=!1,cn(this,m[1]||"",!0),this.o=Li(m[2]||""),this.g=Li(m[3]||"",!0),Os(this,m[4]),this.h=Li(m[5]||"",!0),Ml(this,m[6]||"",!0),this.m=Li(m[7]||"")):(this.l=!1,this.i=new Vs(null,this.l))}Yn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Lr(m,va,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Lr(m,va,!0),"@"),u.push(Ee(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Lr(v,v.charAt(0)=="/"?Vl:cu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Lr(v,hu)),u.join("")},Yn.prototype.resolve=function(u){const m=Ze(this);let v=!!u.j;v?cn(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var b=u.h;if(v)Os(m,u.u);else if(v=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var j=m.h.lastIndexOf("/");j!=-1&&(b=m.h.slice(0,j+1)+b)}if(j=b,j==".."||j==".")b="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){b=j.lastIndexOf("/",0)==0,j=j.split("/");const H=[];for(let ut=0;ut<j.length;){const Gt=j[ut++];Gt=="."?b&&ut==j.length&&H.push(""):Gt==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),b&&ut==j.length&&H.push("")):(H.push(Gt),b=!0)}b=H.join("/")}else b=j}return v?m.h=b:v=u.i.toString()!=="",v?Ml(m,du(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Ze(u){return new Yn(u)}function cn(u,m,v){u.j=v?Li(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Os(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Ml(u,m,v){m instanceof Vs?(u.i=m,Ta(u.i,u.l)):(v||(m=Lr(m,Ms)),u.i=new Vs(m,u.l))}function pe(u,m,v){u.i.set(m,v)}function kr(u){return pe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Li(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Lr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Pn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var va=/[#\/\?@]/g,cu=/[#\?:]/g,Vl=/[#\?]/g,Ms=/[#\?@]/g,hu=/#/g;function Vs(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function jn(u){u.g||(u.g=new Map,u.h=0,u.i&&_a(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=Vs.prototype,s.add=function(u,m){jn(this),this.i=null,u=ks(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function fu(u,m){jn(u),m=ks(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function kl(u,m){return jn(u),m=ks(u,m),u.g.has(m)}s.forEach=function(u,m){jn(this),this.g.forEach(function(v,b){v.forEach(function(j){u.call(m,j,b,this)},this)},this)};function Ll(u,m){jn(u);let v=[];if(typeof m=="string")kl(u,m)&&(v=v.concat(u.g.get(ks(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}s.set=function(u,m){return jn(this),this.i=null,u=ks(this,u),kl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=Ll(this,u),u.length>0?String(u[0]):m):m};function Ea(u,m,v){fu(u,m),v.length>0&&(u.i=null,u.g.set(ks(u,m),q(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let b=0;b<m.length;b++){var v=m[b];const j=Ee(v);v=Ll(this,v);for(let H=0;H<v.length;H++){let ut=j;v[H]!==""&&(ut+="="+Ee(v[H])),u.push(ut)}}return this.i=u.join("&")};function du(u){const m=new Vs;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ks(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ta(u,m){m&&!u.j&&(jn(u),u.i=null,u.g.forEach(function(v,b){const j=b.toLowerCase();b!=j&&(fu(this,b),Ea(this,j,v))},u)),u.j=m}function _i(u,m){const v=new Oe;if(f.Image){const b=new Image;b.onload=S(ri,v,"TestLoadImage: loaded",!0,m,b),b.onerror=S(ri,v,"TestLoadImage: error",!1,m,b),b.onabort=S(ri,v,"TestLoadImage: abort",!1,m,b),b.ontimeout=S(ri,v,"TestLoadImage: timeout",!1,m,b),f.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function Pl(u,m){const v=new Oe,b=new AbortController,j=setTimeout(()=>{b.abort(),ri(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(H=>{clearTimeout(j),H.ok?ri(v,"TestPingServer: ok",!0,m):ri(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),ri(v,"TestPingServer: error",!1,m)})}function ri(u,m,v,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(v)}catch{}}function Ls(){this.g=new Nt}function Pi(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Pi,At),Pi.prototype.g=function(){return new Pr(this.i,this.h)};function Pr(u,m){Pe.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Pr,Pe),s=Pr.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,vi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ba(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ba(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ps(this):vi(this),this.readyState==3&&ba(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Ps(this))},s.Na=function(u){this.g&&(this.response=u,Ps(this))},s.ga=function(){this.g&&Ps(this)};function Ps(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vi(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function vi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ai(u){let m="";return Xt(u,function(v,b){m+=b,m+=":",m+=v,m+=`\r
`}),m}function jr(u,m,v){t:{for(b in v){var b=!1;break t}b=!0}b||(v=ai(v),typeof u=="string"?v!=null&&Ee(v):pe(u,m,v))}function Te(u){Pe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Te,Pe);var ji=/^https?$/i,jl=["POST","PUT"];s=Te.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ot.g(),this.g.onreadystatechange=x(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Ur(this,H);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)v.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())v.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),j=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(jl,m,void 0)>=0)||b||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ut]of v)this.g.setRequestHeader(H,ut);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){Ur(this,H)}};function Ur(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Ul(u),is(u)}function Ul(u){u.A||(u.A=!0,Be(u,"complete"),Be(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Be(this,"complete"),Be(this,"abort"),is(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),Te.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},s.Xa=function(){zr(this)};function zr(u){if(u.h&&typeof c<"u"){if(u.v&&Ei(u)==4)setTimeout(u.Ca.bind(u),0);else if(Be(u,"readystatechange"),Ei(u)==4){u.h=!1;try{const H=u.ca();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var b;if(b=H===0){let ut=String(u.D).match(uu)[1]||null;!ut&&f.self&&f.self.location&&(ut=f.self.location.protocol.slice(0,-1)),b=!ji.test(ut?ut.toLowerCase():"")}v=b}if(v)Be(u,"complete"),Be(u,"success");else{u.o=6;try{var j=Ei(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Ul(u)}}finally{is(u)}}}}function is(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||Be(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ei(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),pt(m)}};function gn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ss(u){const m={};u=(u.g&&Ei(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(R(u[b]))continue;var v=wn(u[b]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[j]||[];m[j]=H,H.push(v)}se(m,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function js(u){this.za=0,this.i=[],this.j=new Oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,u),this.Za=Ui("retryDelaySeedMs",1e4,u),this.Ta=Ui("forwardChannelMaxRetries",2,u),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Cl(u&&u.concurrentRequestLimit),this.Ba=new Ls,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=js.prototype,s.ka=8,s.I=1,s.connect=function(u,m,v,b){St(0),this.W=u,this.H=m||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.J=Eu(this,null,this.W),zi(this)};function zl(u){if(Sa(u),u.I==3){var m=u.V++,v=Ze(u.J);if(pe(v,"SID",u.M),pe(v,"RID",m),pe(v,"TYPE","terminate"),Br(u,v),m=new Fe(u,u.j,m),m.M=2,m.A=kr(Ze(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=Tu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Di(m)}vu(u)}function Us(u){u.g&&(ql(u),u.g.cancel(),u.g=null)}function Sa(u){Us(u),u.v&&(f.clearTimeout(u.v),u.v=null),wa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function zi(u){if(!Il(u.h)&&!u.m){u.m=!0;var m=u.Ea;Qt||w(),mt||(Qt(),mt=!0),N.add(m,u),u.D=0}}function Aa(u,m){return Vi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=fe(y(u.Ea,u,m),_u(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new Fe(this,this.j,u);let H=this.o;if(this.U&&(H?(H=V(H),dt(H,this.U)):H=this.U),this.u!==null||this.R||(j.J=H,H=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(m+=b,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=mu(this,j,m),v=Ze(this.J),pe(v,"RID",u),pe(v,"CVER",22),this.G&&pe(v,"X-HTTP-Session-Id",this.G),Br(this,v),H&&(this.R?m="headers="+Ee(ai(H))+"&"+m:this.u&&jr(v,this.u,H)),Nl(this.h,j),this.Ra&&pe(v,"TYPE","init"),this.S?(pe(v,"$req",m),pe(v,"SID","null"),j.U=!0,Dn(j,v,null)):Dn(j,v,m),this.I=2}}else this.I==3&&(u?Bl(this,u):this.i.length==0||Il(this.h)||Bl(this))};function Bl(u,m){var v;m?v=m.l:v=u.V++;const b=Ze(u.J);pe(b,"SID",u.M),pe(b,"RID",v),pe(b,"AID",u.K),Br(u,b),u.u&&u.o&&jr(b,u.u,u.o),v=new Fe(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=mu(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Nl(u.h,v),Dn(v,b,m)}function Br(u,m){u.H&&Xt(u.H,function(v,b){pe(m,b,v)}),u.l&&Xt({},function(v,b){pe(m,b,v)})}function mu(u,m,v){v=Math.min(u.i.length,v);const b=u.l?y(u.l.Ka,u.l,u):null;t:{var j=u.i;let Gt=-1;for(;;){const Qe=["count="+v];Gt==-1?v>0?(Gt=j[0].g,Qe.push("ofs="+Gt)):Gt=0:Qe.push("ofs="+Gt);let ce=!0;for(let Ve=0;Ve<v;Ve++){var H=j[Ve].g;const li=j[Ve].map;if(H-=Gt,H<0)Gt=Math.max(0,j[Ve].g-100),ce=!1;else try{H="req"+H+"_"||"";try{var ut=li instanceof Map?li:Object.entries(li);for(const[qi,Ti]of ut){let bi=Ti;g(Ti)&&(bi=lt(Ti)),Qe.push(H+qi+"="+encodeURIComponent(bi))}}catch(qi){throw Qe.push(H+"type="+encodeURIComponent("_badmap")),qi}}catch{b&&b(li)}}if(ce){ut=Qe.join("&");break t}}ut=void 0}return u=u.i.splice(0,v),m.G=u,ut}function gu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Qt||w(),mt||(Qt(),mt=!0),N.add(m,u),u.A=0}}function qr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=fe(y(u.Da,u),_u(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=fe(y(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Us(this),pu(this))};function ql(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function pu(u){u.g=new Fe(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ze(u.na);pe(m,"RID","rpc"),pe(m,"SID",u.M),pe(m,"AID",u.K),pe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&pe(m,"TO",u.ia),pe(m,"TYPE","xmlhttp"),Br(u,m),u.u&&u.o&&jr(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=kr(Ze(m)),v.u=null,v.R=!0,$n(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Us(this),qr(this),St(19))};function wa(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function yu(u,m){var v=null;if(u.g==m){wa(u),ql(u),u.g=null;var b=2}else if(ki(u.h,m))v=m.G,Dl(u.h,m),b=1;else return;if(u.I!=0){if(m.o)if(b==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;b=Tt(),Be(b,new kt(b,v)),zi(u)}else gu(u);else if(j=m.m,j==3||j==0&&m.X>0||!(b==1&&Aa(u,m)||b==2&&qr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),j){case 1:Bi(u,5);break;case 4:Bi(u,10);break;case 3:Bi(u,6);break;default:Bi(u,2)}}}function _u(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function Bi(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),b=u.Ua;const j=!b;b=new Yn(b||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||cn(b,"https"),kr(b),j?_i(b.toString(),v):Pl(b.toString(),v)}else St(2);u.I=0,u.l&&u.l.pa(m),vu(u),Sa(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function vu(u){if(u.I=0,u.ja=[],u.l){const m=Ol(u.h);(m.length!=0||u.i.length!=0)&&(Y(u.ja,m),Y(u.ja,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.oa()}}function Eu(u,m,v){var b=v instanceof Yn?Ze(v):new Yn(v);if(b.g!="")m&&(b.g=m+"."+b.g),Os(b,b.u);else{var j=f.location;b=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const H=new Yn(null);b&&cn(H,b),m&&(H.g=m),j&&Os(H,j),v&&(H.h=v),b=H}return v=u.G,m=u.wa,v&&m&&pe(b,v,m),pe(b,"VER",u.ka),Br(u,b),b}function Tu(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Te(new Pi({ab:v})):new Te(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}s=bu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function zs(){}zs.prototype.g=function(u,m){return new On(u,m)};function On(u,m){Pe.call(this),this.g=new js(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new rs(this)}A(On,Pe),On.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){zl(this.g)},On.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=lt(u),u=v);m.i.push(new We(m.Ya++,u)),m.I==3&&zi(m)},On.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,On.Z.N.call(this)};function Su(u){X.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const v in m){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}A(Su,X);function Au(){xe.call(this),this.status=1}A(Au,xe);function rs(u){this.g=u}A(rs,bu),rs.prototype.ra=function(){Be(this.g,"a")},rs.prototype.qa=function(u){Be(this.g,new Su(u))},rs.prototype.pa=function(u){Be(this.g,new Au)},rs.prototype.oa=function(){Be(this.g,"b")},zs.prototype.createWebChannel=zs.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,Pv=function(){return new zs},Lv=function(){return Tt()},kv=yt,Wd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,Lc=Me,Re.COMPLETE="complete",Vv=Re,it.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Pe.prototype.listen=Pe.prototype.J,Do=it,Te.prototype.listenOnce=Te.prototype.K,Te.prototype.getLastError=Te.prototype.Ha,Te.prototype.getLastErrorCode=Te.prototype.ya,Te.prototype.getStatus=Te.prototype.ca,Te.prototype.getResponseJson=Te.prototype.La,Te.prototype.getResponseText=Te.prototype.la,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Fa,Mv=Te}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});const t_="@firebase/firestore",e_="4.9.2";class Cn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let bl="12.3.0";const ua=new Sm("@firebase/firestore");function nl(){return ua.logLevel}function Et(s,...t){if(ua.logLevel<=ee.DEBUG){const i=t.map(xm);ua.debug(`Firestore (${bl}): ${s}`,...i)}}function ws(s,...t){if(ua.logLevel<=ee.ERROR){const i=t.map(xm);ua.error(`Firestore (${bl}): ${s}`,...i)}}function ml(s,...t){if(ua.logLevel<=ee.WARN){const i=t.map(xm);ua.warn(`Firestore (${bl}): ${s}`,...i)}}function xm(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function Pt(s,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,jv(s,a,i)}function jv(s,t,i){let a=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw ws(a),new Error(a)}function ge(s,t,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,s||jv(t,o,a)}function Ht(s,t){return s}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Cs{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}class Uv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(Cn.UNAUTHENTICATED)))}shutdown(){}}class _A{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class vA{constructor(t){this.t=t,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){ge(this.o===void 0,42304);let a=this.i;const o=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let c=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Er,t.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const _=c;t.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},g=_=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Er)}}),0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==t?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ge(typeof a.accessToken=="string",31837,{l:a}),new Uv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ge(t===null||typeof t=="string",2055,{h:t}),new Cn(t)}}class EA{constructor(t,i,a){this.P=t,this.T=i,this.I=a,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TA{constructor(t,i,a){this.P=t,this.T=i,this.I=a}getToken(){return Promise.resolve(new EA(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class n_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bA{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){ge(this.o===void 0,3512);const a=c=>{c.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Et("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>a(c)))};const o=c=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new n_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(ge(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new n_(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function SA(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}class Rm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=SA(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<i&&(a+=t.charAt(o[c]%62))}return a}}function ne(s,t){return s<t?-1:s>t?1:0}function Zd(s,t){const i=Math.min(s.length,t.length);for(let a=0;a<i;a++){const o=s.charAt(a),c=t.charAt(a);if(o!==c)return Ud(o)===Ud(c)?ne(o,c):Ud(o)?1:-1}return ne(s.length,t.length)}const AA=55296,wA=57343;function Ud(s){const t=s.charCodeAt(0);return t>=AA&&t<=wA}function gl(s,t,i){return s.length===t.length&&s.every(((a,o)=>i(a,t[o])))}const i_="__name__";class $i{constructor(t,i,a){i===void 0?i=0:i>t.length&&Pt(637,{offset:i,range:t.length}),a===void 0?a=t.length-i:a>t.length-i&&Pt(1746,{length:a,range:t.length-i}),this.segments=t,this.offset=i,this.len=a}get length(){return this.len}isEqual(t){return $i.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof $i?t.forEach((a=>{i.push(a)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,a=this.limit();i<a;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const a=Math.min(t.length,i.length);for(let o=0;o<a;o++){const c=$i.compareSegments(t.get(o),i.get(o));if(c!==0)return c}return ne(t.length,i.length)}static compareSegments(t,i){const a=$i.isNumericId(t),o=$i.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?$i.extractNumericId(t).compare($i.extractNumericId(i)):Zd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vr.fromString(t.substring(4,t.length-2))}}class Ne extends $i{construct(t,i,a){return new Ne(t,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ct(et.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((o=>o.length>0)))}return new Ne(i)}static emptyPath(){return new Ne([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends $i{construct(t,i,a){return new Tn(t,i,a)}static isValidIdentifier(t){return xA.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i_}static keyField(){return new Tn([i_])}static fromServerFormat(t){const i=[];let a="",o=0;const c=()=>{if(a.length===0)throw new Ct(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;o<t.length;){const g=t[o];if(g==="\\"){if(o+1===t.length)throw new Ct(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Ct(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=_,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(a+=g,o++):(c(),o++)}if(c(),f)throw new Ct(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Tn(i)}static emptyPath(){return new Tn([])}}class Dt{constructor(t){this.path=t}static fromPath(t){return new Dt(Ne.fromString(t))}static fromName(t){return new Dt(Ne.fromString(t).popFirst(5))}static empty(){return new Dt(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return Ne.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Dt(new Ne(t.slice()))}}function zv(s,t,i){if(!i)throw new Ct(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function RA(s,t,i,a){if(t===!0&&a===!0)throw new Ct(et.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function s_(s){if(!Dt.isDocumentKey(s))throw new Ct(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function r_(s){if(Dt.isDocumentKey(s))throw new Ct(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Bv(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Cm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(a){return a.constructor?a.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Pt(12329,{type:typeof s})}function ca(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Ct(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Cm(s);throw new Ct(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return s}function rn(s,t){const i={typeString:s};return t&&(i.value=t),i}function Wo(s,t){if(!Bv(s))throw new Ct(et.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in t)if(t[a]){const o=t[a].typeString,c="value"in t[a]?{value:t[a].value}:void 0;if(!(a in s)){i=`JSON missing required field: '${a}'`;break}const f=s[a];if(o&&typeof f!==o){i=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){i=`Expected '${a}' field to equal '${c.value}'`;break}}if(i)throw new Ct(et.INVALID_ARGUMENT,i);return!0}const a_=-62135596800,l_=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(t){return De.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),a=Math.floor((t-1e3*i)*l_);return new De(i,a)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Ct(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Ct(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<a_)throw new Ct(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l_}_compareTo(t){return this.seconds===t.seconds?ne(this.nanoseconds,t.nanoseconds):ne(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Wo(t,De._jsonSchema))return new De(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-a_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:rn("string",De._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};class Bt{static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new De(0,0))}static max(){return new Bt(new De(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Bo=-1;function CA(s,t){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Bt.fromTimestamp(a===1e9?new De(i+1,0):new De(i,a));return new br(o,Dt.empty(),t)}function IA(s){return new br(s.readTime,s.key,Bo)}class br{constructor(t,i,a){this.readTime=t,this.documentKey=i,this.largestBatchId=a}static min(){return new br(Bt.min(),Dt.empty(),Bo)}static max(){return new br(Bt.max(),Dt.empty(),Bo)}}function NA(s,t){let i=s.readTime.compareTo(t.readTime);return i!==0?i:(i=Dt.comparator(s.documentKey,t.documentKey),i!==0?i:ne(s.largestBatchId,t.largestBatchId))}const DA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Sl(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==DA)throw s;Et("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Z(((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,o)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):Z.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):Z.reject(i)}static resolve(t){return new Z(((i,a)=>{i(t)}))}static reject(t){return new Z(((i,a)=>{a(t)}))}static waitFor(t){return new Z(((i,a)=>{let o=0,c=0,f=!1;t.forEach((g=>{++o,g.next((()=>{++c,f&&c===o&&i()}),(_=>a(_)))})),f=!0,c===o&&i()}))}static or(t){let i=Z.resolve(!1);for(const a of t)i=i.next((o=>o?Z.resolve(o):a()));return i}static forEach(t,i){const a=[];return t.forEach(((o,c)=>{a.push(i.call(this,o,c))})),this.waitFor(a)}static mapArray(t,i){return new Z(((a,o)=>{const c=t.length,f=new Array(c);let g=0;for(let _=0;_<c;_++){const y=_;i(t[y]).next((S=>{f[y]=S,++g,g===c&&a(f)}),(S=>o(S)))}}))}static doWhile(t,i){return new Z(((a,o)=>{const c=()=>{t()===!0?i().next((()=>{c()}),o):a()};c()}))}}function MA(s){const t=s.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Al(s){return s.name==="IndexedDbTransactionError"}class mh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}mh.ce=-1;const Im=-1;function gh(s){return s==null}function Kc(s){return s===0&&1/s==-1/0}function VA(s){return typeof s=="number"&&Number.isInteger(s)&&!Kc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const qv="";function kA(s){let t="";for(let i=0;i<s.length;i++)t.length>0&&(t=o_(t)),t=LA(s.get(i),t);return o_(t)}function LA(s,t){let i=t;const a=s.length;for(let o=0;o<a;o++){const c=s.charAt(o);switch(c){case"\0":i+="";break;case qv:i+="";break;default:i+=c}}return i}function o_(s){return s+qv+""}function u_(s){let t=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t++;return t}function Cr(s,t){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&t(i,s[i])}function Hv(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class Ue{constructor(t,i){this.comparator=t,this.root=i||En.EMPTY}insert(t,i){return new Ue(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,En.BLACK,null,null))}remove(t){return new Ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,En.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(t){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(t,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,a)=>(t(i,a),!1)))}toString(){const t=[];return this.inorderTraversal(((i,a)=>(t.push(`${i}:${a}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ic(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ic(this.root,t,this.comparator,!0)}}class Ic{constructor(t,i,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?a(t.key,i):1,i&&o&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class En{constructor(t,i,a,o,c){this.key=t,this.value=i,this.color=a??En.RED,this.left=o??En.EMPTY,this.right=c??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,a,o,c){return new En(t??this.key,i??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,a){let o=this;const c=a(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,i,a),null):c===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let a,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return En.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Pt(27949);return t+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt(57766)}get value(){throw Pt(16141)}get color(){throw Pt(16727)}get left(){throw Pt(29726)}get right(){throw Pt(36894)}copy(t,i,a,o,c){return this}insert(t,i,a){return new En(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(t){this.comparator=t,this.data=new Ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,a)=>(t(i),!1)))}forEachInRange(t,i){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(t){return new c_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((a=>{i=i.add(a)})),i}isEqual(t){if(!(t instanceof un)||this.size!==t.size)return!1;const i=this.data.getIterator(),a=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new un(this.comparator);return i.data=t,i}}class c_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ii{constructor(t){this.fields=t,t.sort(Tn.comparator)}static empty(){return new ii([])}unionWith(t){let i=new un(Tn.comparator);for(const a of this.fields)i=i.add(a);for(const a of t)i=i.add(a);return new ii(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return gl(this.fields,t.fields,((i,a)=>i.isEqual(a)))}}class Gv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Gv("Invalid base64 string: "+c):c}})(t);return new Sn(i)}static fromUint8Array(t){const i=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(t);return new Sn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ne(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const PA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(s){if(ge(!!s,39018),typeof s=="string"){let t=0;const i=PA.exec(s);if(ge(!!i,46558,{timestamp:s}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Ye(s.seconds),nanos:Ye(s.nanos)}}function Ye(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ar(s){return typeof s=="string"?Sn.fromBase64String(s):Sn.fromUint8Array(s)}const Fv="server_timestamp",Qv="__type__",$v="__previous_value__",Kv="__local_write_time__";function Nm(s){return(s?.mapValue?.fields||{})[Qv]?.stringValue===Fv}function ph(s){const t=s.mapValue.fields[$v];return Nm(t)?ph(t):t}function qo(s){const t=Sr(s.mapValue.fields[Kv].timestampValue);return new De(t.seconds,t.nanos)}class jA{constructor(t,i,a,o,c,f,g,_,y,S){this.databaseId=t,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=S}}const Yc="(default)";class Ho{constructor(t,i){this.projectId=t,this.database=i||Yc}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(t){return t instanceof Ho&&t.projectId===this.projectId&&t.database===this.database}}const Yv="__type__",UA="__max__",Nc={mapValue:{}},Xv="__vector__",Xc="value";function wr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Nm(s)?4:BA(s)?9007199254740991:zA(s)?10:11:Pt(28295,{value:s})}function ts(s,t){if(s===t)return!0;const i=wr(s);if(i!==wr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return qo(s).isEqual(qo(t));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Sr(o.timestampValue),g=Sr(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,c){return Ar(o.bytesValue).isEqual(Ar(c.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,c){return Ye(o.geoPointValue.latitude)===Ye(c.geoPointValue.latitude)&&Ye(o.geoPointValue.longitude)===Ye(c.geoPointValue.longitude)})(s,t);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ye(o.integerValue)===Ye(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Ye(o.doubleValue),g=Ye(c.doubleValue);return f===g?Kc(f)===Kc(g):isNaN(f)&&isNaN(g)}return!1})(s,t);case 9:return gl(s.arrayValue.values||[],t.arrayValue.values||[],ts);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},g=c.mapValue.fields||{};if(u_(f)!==u_(g))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(g[_]===void 0||!ts(f[_],g[_])))return!1;return!0})(s,t);default:return Pt(52216,{left:s})}}function Go(s,t){return(s.values||[]).find((i=>ts(i,t)))!==void 0}function pl(s,t){if(s===t)return 0;const i=wr(s),a=wr(t);if(i!==a)return ne(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return ne(s.booleanValue,t.booleanValue);case 2:return(function(c,f){const g=Ye(c.integerValue||c.doubleValue),_=Ye(f.integerValue||f.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(s,t);case 3:return h_(s.timestampValue,t.timestampValue);case 4:return h_(qo(s),qo(t));case 5:return Zd(s.stringValue,t.stringValue);case 6:return(function(c,f){const g=Ar(c),_=Ar(f);return g.compareTo(_)})(s.bytesValue,t.bytesValue);case 7:return(function(c,f){const g=c.split("/"),_=f.split("/");for(let y=0;y<g.length&&y<_.length;y++){const S=ne(g[y],_[y]);if(S!==0)return S}return ne(g.length,_.length)})(s.referenceValue,t.referenceValue);case 8:return(function(c,f){const g=ne(Ye(c.latitude),Ye(f.latitude));return g!==0?g:ne(Ye(c.longitude),Ye(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return f_(s.arrayValue,t.arrayValue);case 10:return(function(c,f){const g=c.fields||{},_=f.fields||{},y=g[Xc]?.arrayValue,S=_[Xc]?.arrayValue,A=ne(y?.values?.length||0,S?.values?.length||0);return A!==0?A:f_(y,S)})(s.mapValue,t.mapValue);case 11:return(function(c,f){if(c===Nc.mapValue&&f===Nc.mapValue)return 0;if(c===Nc.mapValue)return 1;if(f===Nc.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),y=f.fields||{},S=Object.keys(y);_.sort(),S.sort();for(let A=0;A<_.length&&A<S.length;++A){const x=Zd(_[A],S[A]);if(x!==0)return x;const q=pl(g[_[A]],y[S[A]]);if(q!==0)return q}return ne(_.length,S.length)})(s.mapValue,t.mapValue);default:throw Pt(23264,{he:i})}}function h_(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return ne(s,t);const i=Sr(s),a=Sr(t),o=ne(i.seconds,a.seconds);return o!==0?o:ne(i.nanos,a.nanos)}function f_(s,t){const i=s.values||[],a=t.values||[];for(let o=0;o<i.length&&o<a.length;++o){const c=pl(i[o],a[o]);if(c)return c}return ne(i.length,a.length)}function yl(s){return Jd(s)}function Jd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const a=Sr(i);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Ar(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Dt.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let a="[",o=!0;for(const c of i.values||[])o?o=!1:a+=",",a+=Jd(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(i){const a=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const f of a)c?c=!1:o+=",",o+=`${f}:${Jd(i.fields[f])}`;return o+"}"})(s.mapValue):Pt(61005,{value:s})}function Pc(s){switch(wr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ph(s);return t?16+Pc(t):16;case 5:return 2*s.stringValue.length;case 6:return Ar(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,c)=>o+Pc(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Cr(a.fields,((c,f)=>{o+=c.length+Pc(f)})),o})(s.mapValue);default:throw Pt(13486,{value:s})}}function tm(s){return!!s&&"integerValue"in s}function Dm(s){return!!s&&"arrayValue"in s}function d_(s){return!!s&&"nullValue"in s}function m_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function jc(s){return!!s&&"mapValue"in s}function zA(s){return(s?.mapValue?.fields||{})[Yv]?.stringValue===Xv}function ko(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Cr(s.mapValue.fields,((i,a)=>t.mapValue.fields[i]=ko(a))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=ko(s.arrayValue.values[i]);return t}return{...s}}function BA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}class Fn{constructor(t){this.value=t}static empty(){return new Fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let a=0;a<t.length-1;++a)if(i=(i.mapValue.fields||{})[t.get(a)],!jc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=ko(i)}setAll(t){let i=Tn.emptyPath(),a={},o=[];t.forEach(((f,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,a,o),a={},o=[],i=g.popLast()}f?a[g.lastSegment()]=ko(f):o.push(g.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,a,o)}delete(t){const i=this.field(t.popLast());jc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return ts(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<t.length;++a){let o=i.mapValue.fields[t.get(a)];jc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,a){Cr(i,((o,c)=>t[o]=c));for(const o of a)delete t[o]}clone(){return new Fn(ko(this.value))}}function Wv(s){const t=[];return Cr(s.fields,((i,a)=>{const o=new Tn([i]);if(jc(a)){const c=Wv(a.mapValue).fields;if(c.length===0)t.push(o);else for(const f of c)t.push(o.child(f))}else t.push(o)})),new ii(t)}class In{constructor(t,i,a,o,c,f,g){this.key=t,this.documentType=i,this.version=a,this.readTime=o,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(t){return new In(t,0,Bt.min(),Bt.min(),Bt.min(),Fn.empty(),0)}static newFoundDocument(t,i,a,o){return new In(t,1,i,Bt.min(),a,o,0)}static newNoDocument(t,i){return new In(t,2,i,Bt.min(),Bt.min(),Fn.empty(),0)}static newUnknownDocument(t,i){return new In(t,3,i,Bt.min(),Bt.min(),Fn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof In&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wc{constructor(t,i){this.position=t,this.inclusive=i}}function g_(s,t,i){let a=0;for(let o=0;o<s.position.length;o++){const c=t[o],f=s.position[o];if(c.field.isKeyField()?a=Dt.comparator(Dt.fromName(f.referenceValue),i.key):a=pl(f,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function p_(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!ts(s.position[i],t.position[i]))return!1;return!0}class Zc{constructor(t,i="asc"){this.field=t,this.dir=i}}function qA(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class Zv{}class on extends Zv{constructor(t,i,a){super(),this.field=t,this.op=i,this.value=a}static create(t,i,a){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,a):new GA(t,i,a):i==="array-contains"?new $A(t,a):i==="in"?new KA(t,a):i==="not-in"?new YA(t,a):i==="array-contains-any"?new XA(t,a):new on(t,i,a)}static createKeyFieldInFilter(t,i,a){return i==="in"?new FA(t,a):new QA(t,a)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(pl(i,this.value)):i!==null&&wr(this.value)===wr(i)&&this.matchesComparison(pl(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class es extends Zv{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new es(t,i)}matches(t){return Jv(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Jv(s){return s.op==="and"}function tE(s){return HA(s)&&Jv(s)}function HA(s){for(const t of s.filters)if(t instanceof es)return!1;return!0}function em(s){if(s instanceof on)return s.field.canonicalString()+s.op.toString()+yl(s.value);if(tE(s))return s.filters.map((t=>em(t))).join(",");{const t=s.filters.map((i=>em(i))).join(",");return`${s.op}(${t})`}}function eE(s,t){return s instanceof on?(function(a,o){return o instanceof on&&a.op===o.op&&a.field.isEqual(o.field)&&ts(a.value,o.value)})(s,t):s instanceof es?(function(a,o){return o instanceof es&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((c,f,g)=>c&&eE(f,o.filters[g])),!0):!1})(s,t):void Pt(19439)}function nE(s){return s instanceof on?(function(i){return`${i.field.canonicalString()} ${i.op} ${yl(i.value)}`})(s):s instanceof es?(function(i){return i.op.toString()+" {"+i.getFilters().map(nE).join(" ,")+"}"})(s):"Filter"}class GA extends on{constructor(t,i,a){super(t,i,a),this.key=Dt.fromName(a.referenceValue)}matches(t){const i=Dt.comparator(t.key,this.key);return this.matchesComparison(i)}}class FA extends on{constructor(t,i){super(t,"in",i),this.keys=iE("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class QA extends on{constructor(t,i){super(t,"not-in",i),this.keys=iE("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function iE(s,t){return(t.arrayValue?.values||[]).map((i=>Dt.fromName(i.referenceValue)))}class $A extends on{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Dm(i)&&Go(i.arrayValue,this.value)}}class KA extends on{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Go(this.value.arrayValue,i)}}class YA extends on{constructor(t,i){super(t,"not-in",i)}matches(t){if(Go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Go(this.value.arrayValue,i)}}class XA extends on{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Dm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>Go(this.value.arrayValue,a)))}}class WA{constructor(t,i=null,a=[],o=[],c=null,f=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=f,this.endAt=g,this.Te=null}}function y_(s,t=null,i=[],a=[],o=null,c=null,f=null){return new WA(s,t,i,a,o,c,f)}function Om(s){const t=Ht(s);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((a=>em(a))).join(","),i+="|ob:",i+=t.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),gh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>yl(a))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>yl(a))).join(",")),t.Te=i}return t.Te}function Mm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!qA(s.orderBy[i],t.orderBy[i]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!eE(s.filters[i],t.filters[i]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!p_(s.startAt,t.startAt)&&p_(s.endAt,t.endAt)}function nm(s){return Dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class yh{constructor(t,i=null,a=[],o=[],c=null,f="F",g=null,_=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZA(s,t,i,a,o,c,f,g){return new yh(s,t,i,a,o,c,f,g)}function sE(s){return new yh(s)}function __(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function JA(s){return s.collectionGroup!==null}function Lo(s){const t=Ht(s);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new un(Tn.comparator);return f.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(t).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Zc(c,a))})),i.has(Tn.keyField().canonicalString())||t.Ie.push(new Zc(Tn.keyField(),a))}return t.Ie}function Ki(s){const t=Ht(s);return t.Ee||(t.Ee=tw(t,Lo(s))),t.Ee}function tw(s,t){if(s.limitType==="F")return y_(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Zc(o.field,c)}));const i=s.endAt?new Wc(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Wc(s.startAt.position,s.startAt.inclusive):null;return y_(s.path,s.collectionGroup,t,s.filters,s.limit,i,a)}}function im(s,t,i){return new yh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,i,s.startAt,s.endAt)}function _h(s,t){return Mm(Ki(s),Ki(t))&&s.limitType===t.limitType}function rE(s){return`${Om(Ki(s))}|lt:${s.limitType}`}function il(s){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((o=>nE(o))).join(", ")}]`),gh(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((o=>yl(o))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((o=>yl(o))).join(",")),`Target(${a})`})(Ki(s))}; limitType=${s.limitType})`}function vh(s,t){return t.isFoundDocument()&&(function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Dt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,t)&&(function(a,o){for(const c of Lo(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,t)&&(function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0})(s,t)&&(function(a,o){return!(a.startAt&&!(function(f,g,_){const y=g_(f,g,_);return f.inclusive?y<=0:y<0})(a.startAt,Lo(a),o)||a.endAt&&!(function(f,g,_){const y=g_(f,g,_);return f.inclusive?y>=0:y>0})(a.endAt,Lo(a),o))})(s,t)}function ew(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function aE(s){return(t,i)=>{let a=!1;for(const o of Lo(s)){const c=nw(o,t,i);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function nw(s,t,i){const a=s.field.isKeyField()?Dt.comparator(t.key,i.key):(function(c,f,g){const _=f.data.field(c),y=g.data.field(c);return _!==null&&y!==null?pl(_,y):Pt(42886)})(s.field,t,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Pt(19790,{direction:s.dir})}}class ma{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const a=this.mapKeyFn(t),o=this.inner[a];if(o===void 0)return this.inner[a]=[[t,i]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],t))return void(o[c]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],t))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Cr(this.inner,((i,a)=>{for(const[o,c]of a)t(o,c)}))}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}const iw=new Ue(Dt.comparator);function xs(){return iw}const lE=new Ue(Dt.comparator);function Oo(...s){let t=lE;for(const i of s)t=t.insert(i.key,i);return t}function oE(s){let t=lE;return s.forEach(((i,a)=>t=t.insert(i,a.overlayedDocument))),t}function aa(){return Po()}function uE(){return Po()}function Po(){return new ma((s=>s.toString()),((s,t)=>s.isEqual(t)))}const sw=new Ue(Dt.comparator),rw=new un(Dt.comparator);function ie(...s){let t=rw;for(const i of s)t=t.add(i);return t}const aw=new un(ne);function lw(){return aw}function Vm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(t)?"-0":t}}function cE(s){return{integerValue:""+s}}function ow(s,t){return VA(t)?cE(t):Vm(s,t)}class Eh{constructor(){this._=void 0}}function uw(s,t,i){return s instanceof Jc?(function(o,c){const f={fields:{[Qv]:{stringValue:Fv},[Kv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Nm(c)&&(c=ph(c)),c&&(f.fields[$v]=c),{mapValue:f}})(i,t):s instanceof Fo?fE(s,t):s instanceof Qo?dE(s,t):(function(o,c){const f=hE(o,c),g=v_(f)+v_(o.Ae);return tm(f)&&tm(o.Ae)?cE(g):Vm(o.serializer,g)})(s,t)}function cw(s,t,i){return s instanceof Fo?fE(s,t):s instanceof Qo?dE(s,t):i}function hE(s,t){return s instanceof th?(function(a){return tm(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(t)?t:{integerValue:0}:null}class Jc extends Eh{}class Fo extends Eh{constructor(t){super(),this.elements=t}}function fE(s,t){const i=mE(t);for(const a of s.elements)i.some((o=>ts(o,a)))||i.push(a);return{arrayValue:{values:i}}}class Qo extends Eh{constructor(t){super(),this.elements=t}}function dE(s,t){let i=mE(t);for(const a of s.elements)i=i.filter((o=>!ts(o,a)));return{arrayValue:{values:i}}}class th extends Eh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function v_(s){return Ye(s.integerValue||s.doubleValue)}function mE(s){return Dm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function hw(s,t){return s.field.isEqual(t.field)&&(function(a,o){return a instanceof Fo&&o instanceof Fo||a instanceof Qo&&o instanceof Qo?gl(a.elements,o.elements,ts):a instanceof th&&o instanceof th?ts(a.Ae,o.Ae):a instanceof Jc&&o instanceof Jc})(s.transform,t.transform)}class fw{constructor(t,i){this.version=t,this.transformResults=i}}class Ri{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Ri}static exists(t){return new Ri(void 0,t)}static updateTime(t){return new Ri(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Uc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Th{}function gE(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new km(s.key,Ri.none()):new Zo(s.key,s.data,Ri.none());{const i=s.data,a=Fn.empty();let o=new un(Tn.comparator);for(let c of t.fields)if(!o.has(c)){let f=i.field(c);f===null&&c.length>1&&(c=c.popLast(),f=i.field(c)),f===null?a.delete(c):a.set(c,f),o=o.add(c)}return new Ir(s.key,a,new ii(o.toArray()),Ri.none())}}function dw(s,t,i){s instanceof Zo?(function(o,c,f){const g=o.value.clone(),_=T_(o.fieldTransforms,c,f.transformResults);g.setAll(_),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,t,i):s instanceof Ir?(function(o,c,f){if(!Uc(o.precondition,c))return void c.convertToUnknownDocument(f.version);const g=T_(o.fieldTransforms,c,f.transformResults),_=c.data;_.setAll(pE(o)),_.setAll(g),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()})(s,t,i):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,i)}function jo(s,t,i,a){return s instanceof Zo?(function(c,f,g,_){if(!Uc(c.precondition,f))return g;const y=c.value.clone(),S=b_(c.fieldTransforms,_,f);return y.setAll(S),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,t,i,a):s instanceof Ir?(function(c,f,g,_){if(!Uc(c.precondition,f))return g;const y=b_(c.fieldTransforms,_,f),S=f.data;return S.setAll(pE(c)),S.setAll(y),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(s,t,i,a):(function(c,f,g){return Uc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(s,t,i)}function mw(s,t){let i=null;for(const a of s.fieldTransforms){const o=t.data.field(a.field),c=hE(a.transform,o||null);c!=null&&(i===null&&(i=Fn.empty()),i.set(a.field,c))}return i||null}function E_(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&gl(a,o,((c,f)=>hw(c,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Zo extends Th{constructor(t,i,a,o=[]){super(),this.key=t,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ir extends Th{constructor(t,i,a,o,c=[]){super(),this.key=t,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function pE(s){const t=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=s.data.field(i);t.set(i,a)}})),t}function T_(s,t,i){const a=new Map;ge(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let o=0;o<i.length;o++){const c=s[o],f=c.transform,g=t.data.field(c.field);a.set(c.field,cw(f,g,i[o]))}return a}function b_(s,t,i){const a=new Map;for(const o of s){const c=o.transform,f=i.data.field(o.field);a.set(o.field,uw(c,f,t))}return a}class km extends Th{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gw extends Th{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pw{constructor(t,i,a,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(t,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(t.key)&&dw(c,t,a[o])}}applyToLocalView(t,i){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(i=jo(a,t,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(i=jo(a,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const a=uE();return this.mutations.forEach((o=>{const c=t.get(o.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=i.has(o.key)?null:g;const _=gE(f,g);_!==null&&a.set(o.key,_),f.isValidDocument()||f.convertToNoDocument(Bt.min())})),a}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),ie())}isEqual(t){return this.batchId===t.batchId&&gl(this.mutations,t.mutations,((i,a)=>E_(i,a)))&&gl(this.baseMutations,t.baseMutations,((i,a)=>E_(i,a)))}}class Lm{constructor(t,i,a,o){this.batch=t,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(t,i,a){ge(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let o=(function(){return sw})();const c=t.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,a[f].version);return new Lm(t,i,a,o)}}class yw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _w{constructor(t,i){this.count=t,this.unchangedNames=i}}var sn,ae;function vw(s){switch(s){case et.OK:return Pt(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Pt(15467,{code:s})}}function yE(s){if(s===void 0)return ws("GRPC error has no .code"),et.UNKNOWN;switch(s){case sn.OK:return et.OK;case sn.CANCELLED:return et.CANCELLED;case sn.UNKNOWN:return et.UNKNOWN;case sn.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case sn.INTERNAL:return et.INTERNAL;case sn.UNAVAILABLE:return et.UNAVAILABLE;case sn.UNAUTHENTICATED:return et.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case sn.NOT_FOUND:return et.NOT_FOUND;case sn.ALREADY_EXISTS:return et.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return et.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case sn.ABORTED:return et.ABORTED;case sn.OUT_OF_RANGE:return et.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return et.UNIMPLEMENTED;case sn.DATA_LOSS:return et.DATA_LOSS;default:return Pt(39323,{code:s})}}(ae=sn||(sn={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";function Ew(){return new TextEncoder}const Tw=new vr([4294967295,4294967295],0);function S_(s){const t=Ew().encode(s),i=new Ov;return i.update(t),new Uint8Array(i.digest())}function A_(s){const t=new DataView(s.buffer),i=t.getUint32(0,!0),a=t.getUint32(4,!0),o=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new vr([i,a],0),new vr([o,c],0)]}class Pm{constructor(t,i,a){if(this.bitmap=t,this.padding=i,this.hashCount=a,i<0||i>=8)throw new Mo(`Invalid padding: ${i}`);if(a<0)throw new Mo(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${a}`);if(t.length===0&&i!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=vr.fromNumber(this.ge)}ye(t,i,a){let o=t.add(i.multiply(vr.fromNumber(a)));return o.compare(Tw)===1&&(o=new vr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=S_(t),[a,o]=A_(i);for(let c=0;c<this.hashCount;c++){const f=this.ye(a,o,c);if(!this.we(f))return!1}return!0}static create(t,i,a){const o=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Pm(c,o,i);return a.forEach((g=>f.insert(g))),f}insert(t){if(this.ge===0)return;const i=S_(t),[a,o]=A_(i);for(let c=0;c<this.hashCount;c++){const f=this.ye(a,o,c);this.Se(f)}}Se(t){const i=Math.floor(t/8),a=t%8;this.bitmap[i]|=1<<a}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bh{constructor(t,i,a,o,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,a){const o=new Map;return o.set(t,Jo.createSynthesizedTargetChangeForCurrentChange(t,i,a)),new bh(Bt.min(),o,new Ue(ne),xs(),ie())}}class Jo{constructor(t,i,a,o,c){this.resumeToken=t,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,a){return new Jo(a,i,ie(),ie(),ie())}}class zc{constructor(t,i,a,o){this.be=t,this.removedTargetIds=i,this.key=a,this.De=o}}class _E{constructor(t,i){this.targetId=t,this.Ce=i}}class vE{constructor(t,i,a=Sn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=a,this.cause=o}}class w_{constructor(){this.ve=0,this.Fe=x_(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ie(),i=ie(),a=ie();return this.Fe.forEach(((o,c)=>{switch(c){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:Pt(38017,{changeType:c})}})),new Jo(this.Me,this.xe,t,i,a)}qe(){this.Oe=!1,this.Fe=x_()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bw{constructor(t){this.Ge=t,this.ze=new Map,this.je=xs(),this.Je=Dc(),this.He=Dc(),this.Ye=new Ue(ne)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const a=this.nt(i);switch(t.state){case 0:this.rt(i)&&a.Le(t.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(t.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(t.resumeToken));break;default:Pt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((a,o)=>{this.rt(o)&&i(o)}))}st(t){const i=t.targetId,a=t.Ce.count,o=this.ot(i);if(o){const c=o.target;if(nm(c))if(a===0){const f=new Dt(c.path);this.et(i,f,In.newNoDocument(f,Bt.min()))}else ge(a===1,20013,{expectedCount:a});else{const f=this._t(i);if(f!==a){const g=this.ut(t),_=g?this.ct(g,t,f):1;if(_!==0){this.it(i);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=i;let f,g;try{f=Ar(a).toUint8Array()}catch(_){if(_ instanceof Gv)return ml("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new Pm(f,o,c)}catch(_){return ml(_ instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(t,i,a){return i.Ce.count===a-this.Pt(t,i.targetId)?0:2}Pt(t,i){const a=this.Ge.getRemoteKeysForTarget(i);let o=0;return a.forEach((c=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(i,c,null),o++)})),o}Tt(t){const i=new Map;this.ze.forEach(((c,f)=>{const g=this.ot(f);if(g){if(c.current&&nm(g.target)){const _=new Dt(g.target.path);this.It(_).has(f)||this.Et(f,_)||this.et(f,_,In.newNoDocument(_,t))}c.Be&&(i.set(f,c.ke()),c.qe())}}));let a=ie();this.He.forEach(((c,f)=>{let g=!0;f.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const o=new bh(t,i,this.Ye,this.je,a);return this.je=xs(),this.Je=Dc(),this.He=Dc(),this.Ye=new Ue(ne),o}Xe(t,i){if(!this.rt(t))return;const a=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,a){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),a&&(this.je=this.je.insert(i,a))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new w_,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new un(ne),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new un(ne),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||Et("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new w_),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Dc(){return new Ue(Dt.comparator)}function x_(){return new Ue(Dt.comparator)}const Sw={asc:"ASCENDING",desc:"DESCENDING"},Aw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ww={and:"AND",or:"OR"};class xw{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function sm(s,t){return s.useProto3Json||gh(t)?t:{value:t}}function eh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function EE(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Rw(s,t){return eh(s,t.toTimestamp())}function Yi(s){return ge(!!s,49232),Bt.fromTimestamp((function(i){const a=Sr(i);return new De(a.seconds,a.nanos)})(s))}function jm(s,t){return rm(s,t).canonicalString()}function rm(s,t){const i=(function(o){return new Ne(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?i:i.child(t)}function TE(s){const t=Ne.fromString(s);return ge(xE(t),10190,{key:t.toString()}),t}function am(s,t){return jm(s.databaseId,t.path)}function zd(s,t){const i=TE(t);if(i.get(1)!==s.databaseId.projectId)throw new Ct(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new Ct(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Dt(SE(i))}function bE(s,t){return jm(s.databaseId,t)}function Cw(s){const t=TE(s);return t.length===4?Ne.emptyPath():SE(t)}function lm(s){return new Ne(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function SE(s){return ge(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function R_(s,t,i){return{name:am(s,t),fields:i.value.mapValue.fields}}function Iw(s,t){let i;if("targetChange"in t){t.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=(function(y,S){return y.useProto3Json?(ge(S===void 0||typeof S=="string",58123),Sn.fromBase64String(S||"")):(ge(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Sn.fromUint8Array(S||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&(function(y){const S=y.code===void 0?et.UNKNOWN:yE(y.code);return new Ct(S,y.message||"")})(f);i=new vE(a,o,c,g||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const o=zd(s,a.document.name),c=Yi(a.document.updateTime),f=a.document.createTime?Yi(a.document.createTime):Bt.min(),g=new Fn({mapValue:{fields:a.document.fields}}),_=In.newFoundDocument(o,c,f,g),y=a.targetIds||[],S=a.removedTargetIds||[];i=new zc(y,S,_.key,_)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const o=zd(s,a.document),c=a.readTime?Yi(a.readTime):Bt.min(),f=In.newNoDocument(o,c),g=a.removedTargetIds||[];i=new zc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const o=zd(s,a.document),c=a.removedTargetIds||[];i=new zc([],c,o,null)}else{if(!("filter"in t))return Pt(11601,{Rt:t});{t.filter;const a=t.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,f=new _w(o,c),g=a.targetId;i=new _E(g,f)}}return i}function Nw(s,t){let i;if(t instanceof Zo)i={update:R_(s,t.key,t.value)};else if(t instanceof km)i={delete:am(s,t.key)};else if(t instanceof Ir)i={update:R_(s,t.key,t.data),updateMask:Uw(t.fieldMask)};else{if(!(t instanceof gw))return Pt(16599,{Vt:t.type});i={verify:am(s,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((a=>(function(c,f){const g=f.transform;if(g instanceof Jc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Fo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Qo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof th)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Pt(20930,{transform:f.transform})})(0,a)))),t.precondition.isNone||(i.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:Rw(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pt(27497)})(s,t.precondition)),i}function Dw(s,t){return s&&s.length>0?(ge(t!==void 0,14353),s.map((i=>(function(o,c){let f=o.updateTime?Yi(o.updateTime):Yi(c);return f.isEqual(Bt.min())&&(f=Yi(c)),new fw(f,o.transformResults||[])})(i,t)))):[]}function Ow(s,t){return{documents:[bE(s,t.path)]}}function Mw(s,t){const i={structuredQuery:{}},a=t.path;let o;t.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=bE(s,o);const c=(function(y){if(y.length!==0)return wE(es.create(y,"and"))})(t.filters);c&&(i.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((S=>(function(x){return{field:sl(x.field),direction:Lw(x.dir)}})(S)))})(t.orderBy);f&&(i.structuredQuery.orderBy=f);const g=sm(s,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:i,parent:o}}function Vw(s){let t=Cw(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){ge(a===1,65062);const S=i.from[0];S.allDescendants?o=S.collectionId:t=t.child(S.collectionId)}let c=[];i.where&&(c=(function(A){const x=AE(A);return x instanceof es&&tE(x)?x.getFilters():[x]})(i.where));let f=[];i.orderBy&&(f=(function(A){return A.map((x=>(function(Y){return new Zc(rl(Y.field),(function(nt){switch(nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(x)))})(i.orderBy));let g=null;i.limit&&(g=(function(A){let x;return x=typeof A=="object"?A.value:A,gh(x)?null:x})(i.limit));let _=null;i.startAt&&(_=(function(A){const x=!!A.before,q=A.values||[];return new Wc(q,x)})(i.startAt));let y=null;return i.endAt&&(y=(function(A){const x=!A.before,q=A.values||[];return new Wc(q,x)})(i.endAt)),ZA(t,o,f,c,g,"F",_,y)}function kw(s,t){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt(28987,{purpose:o})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function AE(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=rl(i.unaryFilter.field);return on.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=rl(i.unaryFilter.field);return on.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=rl(i.unaryFilter.field);return on.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=rl(i.unaryFilter.field);return on.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pt(61313);default:return Pt(60726)}})(s):s.fieldFilter!==void 0?(function(i){return on.create(rl(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pt(58110);default:return Pt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return es.create(i.compositeFilter.filters.map((a=>AE(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pt(1026)}})(i.compositeFilter.op))})(s):Pt(30097,{filter:s})}function Lw(s){return Sw[s]}function Pw(s){return Aw[s]}function jw(s){return ww[s]}function sl(s){return{fieldPath:s.canonicalString()}}function rl(s){return Tn.fromServerFormat(s.fieldPath)}function wE(s){return s instanceof on?(function(i){if(i.op==="=="){if(m_(i.value))return{unaryFilter:{field:sl(i.field),op:"IS_NAN"}};if(d_(i.value))return{unaryFilter:{field:sl(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(m_(i.value))return{unaryFilter:{field:sl(i.field),op:"IS_NOT_NAN"}};if(d_(i.value))return{unaryFilter:{field:sl(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(i.field),op:Pw(i.op),value:i.value}}})(s):s instanceof es?(function(i){const a=i.getFilters().map((o=>wE(o)));return a.length===1?a[0]:{compositeFilter:{op:jw(i.op),filters:a}}})(s):Pt(54877,{filter:s})}function Uw(s){const t=[];return s.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function xE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class gr{constructor(t,i,a,o,c=Bt.min(),f=Bt.min(),g=Sn.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(t){return new gr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class zw{constructor(t){this.yt=t}}function Bw(s){const t=Vw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?im(t,t.limit,"L"):t}class qw{constructor(){this.Cn=new Hw}addToCollectionParentIndex(t,i){return this.Cn.add(i),Z.resolve()}getCollectionParents(t,i){return Z.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return Z.resolve()}deleteFieldIndex(t,i){return Z.resolve()}deleteAllFieldIndexes(t){return Z.resolve()}createTargetIndexes(t,i){return Z.resolve()}getDocumentsMatchingTarget(t,i){return Z.resolve(null)}getIndexType(t,i){return Z.resolve(0)}getFieldIndexes(t,i){return Z.resolve([])}getNextCollectionGroupToUpdate(t){return Z.resolve(null)}getMinOffset(t,i){return Z.resolve(br.min())}getMinOffsetFromCollectionGroup(t,i){return Z.resolve(br.min())}updateCollectionGroup(t,i,a){return Z.resolve()}updateIndexEntries(t,i){return Z.resolve()}}class Hw{constructor(){this.index={}}add(t){const i=t.lastSegment(),a=t.popLast(),o=this.index[i]||new un(Ne.comparator),c=!o.has(a);return this.index[i]=o.add(a),c}has(t){const i=t.lastSegment(),a=t.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(t){return(this.index[t]||new un(Ne.comparator)).toArray()}}const C_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RE=41943040;class Gn{static withCacheSize(t){return new Gn(t,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(RE,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);class _l{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new _l(0)}static cr(){return new _l(-1)}}const I_="LruGarbageCollector",Gw=1048576;function N_([s,t],[i,a]){const o=ne(s,i);return o===0?ne(t,a):o}class Fw{constructor(t){this.Ir=t,this.buffer=new un(N_),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();N_(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class Qw{constructor(t,i,a){this.garbageCollector=t,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Et(I_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Al(i)?Et(I_,"Ignoring IndexedDB error during garbage collection: ",i):await Sl(i)}await this.Vr(3e5)}))}}class $w{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(t,i){if(i===0)return Z.resolve(mh.ce);const a=new Fw(i);return this.mr.forEachTarget(t,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(t,i,a){return this.mr.removeTargets(t,i,a)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(C_)):this.getCacheSize(t).next((a=>a<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C_):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let a,o,c,f,g,_,y;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(t,o)))).next((A=>(a=A,g=Date.now(),this.removeTargets(t,a,i)))).next((A=>(c=A,_=Date.now(),this.removeOrphanedDocuments(t,a)))).next((A=>(y=Date.now(),nl()<=ee.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${A} documents in `+(y-_)+`ms
Total Duration: ${y-S}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function Kw(s,t){return new $w(s,t)}class Yw{constructor(){this.changes=new ma((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,In.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?Z.resolve(a):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Xw{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class Ww{constructor(t,i,a,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(t,i){let a=null;return this.documentOverlayCache.getOverlay(t,i).next((o=>(a=o,this.remoteDocumentCache.getEntry(t,i)))).next((o=>(a!==null&&jo(a.mutation,o,ii.empty(),De.now()),o)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((a=>this.getLocalViewOfDocuments(t,a,ie()).next((()=>a))))}getLocalViewOfDocuments(t,i,a=ie()){const o=aa();return this.populateOverlays(t,o,i).next((()=>this.computeViews(t,i,o,a).next((c=>{let f=Oo();return c.forEach(((g,_)=>{f=f.insert(g,_.overlayedDocument)})),f}))))}getOverlayedDocuments(t,i){const a=aa();return this.populateOverlays(t,a,i).next((()=>this.computeViews(t,i,a,ie())))}populateOverlays(t,i,a){const o=[];return a.forEach((c=>{i.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(t,o).next((c=>{c.forEach(((f,g)=>{i.set(f,g)}))}))}computeViews(t,i,a,o){let c=xs();const f=Po(),g=(function(){return Po()})();return i.forEach(((_,y)=>{const S=a.get(y.key);o.has(y.key)&&(S===void 0||S.mutation instanceof Ir)?c=c.insert(y.key,y):S!==void 0?(f.set(y.key,S.mutation.getFieldMask()),jo(S.mutation,y,S.mutation.getFieldMask(),De.now())):f.set(y.key,ii.empty())})),this.recalculateAndSaveOverlays(t,c).next((_=>(_.forEach(((y,S)=>f.set(y,S))),i.forEach(((y,S)=>g.set(y,new Xw(S,f.get(y)??null)))),g)))}recalculateAndSaveOverlays(t,i){const a=Po();let o=new Ue(((f,g)=>f-g)),c=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((f=>{for(const g of f)g.keys().forEach((_=>{const y=i.get(_);if(y===null)return;let S=a.get(_)||ii.empty();S=g.applyToLocalView(y,S),a.set(_,S);const A=(o.get(g.batchId)||ie()).add(_);o=o.insert(g.batchId,A)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),y=_.key,S=_.value,A=uE();S.forEach((x=>{if(!c.has(x)){const q=gE(i.get(x),a.get(x));q!==null&&A.set(x,q),c=c.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,A))}return Z.waitFor(f)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((a=>this.recalculateAndSaveOverlays(t,a)))}getDocumentsMatchingQuery(t,i,a,o){return(function(f){return Dt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):JA(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,a,o):this.getDocumentsMatchingCollectionQuery(t,i,a,o)}getNextDocuments(t,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,a,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,a.largestBatchId,o-c.size):Z.resolve(aa());let g=Bo,_=c;return f.next((y=>Z.forEach(y,((S,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),c.get(S)?Z.resolve():this.remoteDocumentCache.getEntry(t,S).next((x=>{_=_.insert(S,x)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,_,y,ie()))).next((S=>({batchId:g,changes:oE(S)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Dt(i)).next((a=>{let o=Oo();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(t,i,a,o){const c=i.collectionGroup;let f=Oo();return this.indexManager.getCollectionParents(t,c).next((g=>Z.forEach(g,(_=>{const y=(function(A,x){return new yh(x,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(i,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,a,o).next((S=>{S.forEach(((A,x)=>{f=f.insert(A,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,i,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,a.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,a,c,o)))).next((f=>{c.forEach(((_,y)=>{const S=y.getKey();f.get(S)===null&&(f=f.insert(S,In.newInvalidDocument(S)))}));let g=Oo();return f.forEach(((_,y)=>{const S=c.get(_);S!==void 0&&jo(S.mutation,y,ii.empty(),De.now()),vh(i,y)&&(g=g.insert(_,y))})),g}))}}class Zw{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return Z.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:Yi(o.createTime)}})(i)),Z.resolve()}getNamedQuery(t,i){return Z.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:Bw(o.bundledQuery),readTime:Yi(o.readTime)}})(i)),Z.resolve()}}class Jw{constructor(){this.overlays=new Ue(Dt.comparator),this.qr=new Map}getOverlay(t,i){return Z.resolve(this.overlays.get(i))}getOverlays(t,i){const a=aa();return Z.forEach(i,(o=>this.getOverlay(t,o).next((c=>{c!==null&&a.set(o,c)})))).next((()=>a))}saveOverlays(t,i,a){return a.forEach(((o,c)=>{this.St(t,i,c)})),Z.resolve()}removeOverlaysForBatchId(t,i,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),Z.resolve()}getOverlaysForCollection(t,i,a){const o=aa(),c=i.length+1,f=new Dt(i.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const _=g.getNext().value,y=_.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===c&&_.largestBatchId>a&&o.set(_.getKey(),_)}return Z.resolve(o)}getOverlaysForCollectionGroup(t,i,a,o){let c=new Ue(((y,S)=>y-S));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let S=c.get(y.largestBatchId);S===null&&(S=aa(),c=c.insert(y.largestBatchId,S)),S.set(y.getKey(),y)}}const g=aa(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,S)=>g.set(y,S))),!(g.size()>=o)););return Z.resolve(g)}St(t,i,a){const o=this.overlays.get(a.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new yw(i,a));let c=this.qr.get(i);c===void 0&&(c=ie(),this.qr.set(i,c)),this.qr.set(i,c.add(a.key))}}class t2{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(t){return Z.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Z.resolve()}}class Um{constructor(){this.Qr=new un(fn.$r),this.Ur=new un(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const a=new fn(t,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(t,i){t.forEach((a=>this.addReference(a,i)))}removeReference(t,i){this.Gr(new fn(t,i))}zr(t,i){t.forEach((a=>this.removeReference(a,i)))}jr(t){const i=new Dt(new Ne([])),a=new fn(i,t),o=new fn(i,t+1),c=[];return this.Ur.forEachInRange([a,o],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new Dt(new Ne([])),a=new fn(i,t),o=new fn(i,t+1);let c=ie();return this.Ur.forEachInRange([a,o],(f=>{c=c.add(f.key)})),c}containsKey(t){const i=new fn(t,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&t.isEqual(a.key)}}class fn{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return Dt.comparator(t.key,i.key)||ne(t.Yr,i.Yr)}static Kr(t,i){return ne(t.Yr,i.Yr)||Dt.comparator(t.key,i.key)}}class e2{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new un(fn.$r)}checkEmpty(t){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,a,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new pw(c,i,a,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new fn(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(t,i){return Z.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const a=i+1,o=this.ei(a),c=o<0?0:o;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Im:this.tr-1)}getAllMutationBatches(t){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const a=new fn(i,0),o=new fn(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,o],(f=>{const g=this.Xr(f.Yr);c.push(g)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let a=new un(ne);return i.forEach((o=>{const c=new fn(o,0),f=new fn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(g=>{a=a.add(g.Yr)}))})),Z.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(t,i){const a=i.path,o=a.length+1;let c=a;Dt.isDocumentKey(c)||(c=c.child(""));const f=new fn(new Dt(c),0);let g=new un(ne);return this.Zr.forEachWhile((_=>{const y=_.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(_.Yr)),!0)}),f),Z.resolve(this.ti(g))}ti(t){const i=[];return t.forEach((a=>{const o=this.Xr(a);o!==null&&i.push(o)})),i}removeMutationBatch(t,i){ge(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Z.forEach(i.mutations,(o=>{const c=new fn(o.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=a}))}ir(t){}containsKey(t,i){const a=new fn(i,0),o=this.Zr.firstAfterOrEqual(a);return Z.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,Z.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class n2{constructor(t){this.ri=t,this.docs=(function(){return new Ue(Dt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const a=i.key,o=this.docs.get(a),c=o?o.size:0,f=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const a=this.docs.get(i);return Z.resolve(a?a.document.mutableCopy():In.newInvalidDocument(i))}getEntries(t,i){let a=xs();return i.forEach((o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():In.newInvalidDocument(o))})),Z.resolve(a)}getDocumentsMatchingQuery(t,i,a,o){let c=xs();const f=i.path,g=new Dt(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:y,value:{document:S}}=_.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||NA(IA(S),a)<=0||(o.has(S.key)||vh(i,S))&&(c=c.insert(S.key,S.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(t,i,a,o){Pt(9500)}ii(t,i){return Z.forEach(this.docs,(a=>i(a)))}newChangeBuffer(t){return new i2(this)}getSize(t){return Z.resolve(this.size)}}class i2 extends Yw{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(a)})),Z.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}class s2{constructor(t){this.persistence=t,this.si=new ma((i=>Om(i)),Mm),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.oi=0,this._i=new Um,this.targetCount=0,this.ai=_l.ur()}forEachTarget(t,i){return this.si.forEach(((a,o)=>i(o))),Z.resolve()}getLastRemoteSnapshotVersion(t){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Z.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(t,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),Z.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new _l(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,Z.resolve()}updateTargetData(t,i){return this.Pr(i),Z.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(t,i,a){let o=0;const c=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),o++)})),Z.waitFor(c).next((()=>o))}getTargetCount(t){return Z.resolve(this.targetCount)}getTargetData(t,i){const a=this.si.get(i)||null;return Z.resolve(a)}addMatchingKeys(t,i,a){return this._i.Wr(i,a),Z.resolve()}removeMatchingKeys(t,i,a){this._i.zr(i,a);const o=this.persistence.referenceDelegate,c=[];return o&&i.forEach((f=>{c.push(o.markPotentiallyOrphaned(t,f))})),Z.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),Z.resolve()}getMatchingKeysForTargetId(t,i){const a=this._i.Hr(i);return Z.resolve(a)}containsKey(t,i){return Z.resolve(this._i.containsKey(i))}}class CE{constructor(t,i){this.ui={},this.overlays={},this.ci=new mh(0),this.li=!1,this.li=!0,this.hi=new t2,this.referenceDelegate=t(this),this.Pi=new s2(this),this.indexManager=new qw,this.remoteDocumentCache=(function(o){return new n2(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new zw(i),this.Ii=new Zw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new Jw,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let a=this.ui[t.toKey()];return a||(a=new e2(i,this.referenceDelegate),this.ui[t.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,a){Et("MemoryPersistence","Starting transaction:",t);const o=new r2(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(t,i){return Z.or(Object.values(this.ui).map((a=>()=>a.containsKey(t,i))))}}class r2 extends OA{constructor(t){super(),this.currentSequenceNumber=t}}class zm{constructor(t){this.persistence=t,this.Ri=new Um,this.Vi=null}static mi(t){return new zm(t)}get fi(){if(this.Vi)return this.Vi;throw Pt(60996)}addReference(t,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),Z.resolve()}removeReference(t,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),Z.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),Z.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,i.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(a=>{const o=Dt.fromPath(a);return this.gi(t,o).next((c=>{c||i.removeEntry(o,Bt.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return Z.or([()=>Z.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class nh{constructor(t,i){this.persistence=t,this.pi=new ma((a=>kA(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=Kw(this,i)}static mi(t,i){return new nh(t,i)}Ei(){}di(t){return Z.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((a=>i.next((o=>a+o))))}wr(t){let i=0;return this.pr(t,(a=>{i++})).next((()=>i))}pr(t,i){return Z.forEach(this.pi,((a,o)=>this.br(t,a,o).next((c=>c?Z.resolve():i(o)))))}removeTargets(t,i,a){return this.persistence.getTargetCache().removeTargets(t,i,a)}removeOrphanedDocuments(t,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(t,(f=>this.br(t,f,i).next((g=>{g||(a++,c.removeEntry(f,Bt.min()))})))).next((()=>c.apply(t))).next((()=>a))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),Z.resolve()}removeTarget(t,i){const a=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,i,a){return this.pi.set(a,t.currentSequenceNumber),Z.resolve()}removeReference(t,i,a){return this.pi.set(a,t.currentSequenceNumber),Z.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),Z.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Pc(t.data.value)),i}br(t,i,a){return Z.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.pi.get(i);return Z.resolve(o!==void 0&&o>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Bm{constructor(t,i,a,o){this.targetId=t,this.fromCache=i,this.Es=a,this.ds=o}static As(t,i){let a=ie(),o=ie();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Bm(t,i.fromCache,a,o)}}class a2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class l2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return W1()?8:MA(Nn())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,a,o){const c={result:null};return this.ys(t,i).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,i,o,a).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new a2;return this.Ss(t,i,f).next((g=>{if(c.result=g,this.Vs)return this.bs(t,i,f,g.size)}))})).next((()=>c.result))}bs(t,i,a,o){return a.documentReadCount<this.fs?(nl()<=ee.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",il(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(nl()<=ee.DEBUG&&Et("QueryEngine","Query:",il(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(nl()<=ee.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",il(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ki(i))):Z.resolve())}ys(t,i){if(__(i))return Z.resolve(null);let a=Ki(i);return this.indexManager.getIndexType(t,a).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=im(i,null,"F"),a=Ki(i)),this.indexManager.getDocumentsMatchingTarget(t,a).next((c=>{const f=ie(...c);return this.ps.getDocuments(t,f).next((g=>this.indexManager.getMinOffset(t,a).next((_=>{const y=this.Ds(i,g);return this.Cs(i,y,f,_.readTime)?this.ys(t,im(i,null,"F")):this.vs(t,y,i,_)}))))})))))}ws(t,i,a,o){return __(i)||o.isEqual(Bt.min())?Z.resolve(null):this.ps.getDocuments(t,a).next((c=>{const f=this.Ds(i,c);return this.Cs(i,f,a,o)?Z.resolve(null):(nl()<=ee.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),il(i)),this.vs(t,f,i,CA(o,Bo)).next((g=>g)))}))}Ds(t,i){let a=new un(aE(t));return i.forEach(((o,c)=>{vh(t,c)&&(a=a.add(c))})),a}Cs(t,i,a,o){if(t.limit===null)return!1;if(a.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(t,i,a){return nl()<=ee.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",il(i)),this.ps.getDocumentsMatchingQuery(t,i,br.min(),a)}vs(t,i,a,o){return this.ps.getDocumentsMatchingQuery(t,a,o).next((c=>(i.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const qm="LocalStore",o2=3e8;class u2{constructor(t,i,a,o){this.persistence=t,this.Fs=i,this.serializer=o,this.Ms=new Ue(ne),this.xs=new ma((c=>Om(c)),Mm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(a)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ww(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function c2(s,t,i,a){return new u2(s,t,i,a)}async function IE(s,t){const i=Ht(s);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next((c=>(o=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(a)))).next((c=>{const f=[],g=[];let _=ie();for(const y of o){f.push(y.batchId);for(const S of y.mutations)_=_.add(S.key)}for(const y of c){g.push(y.batchId);for(const S of y.mutations)_=_.add(S.key)}return i.localDocuments.getDocuments(a,_).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:g})))}))}))}function h2(s,t){const i=Ht(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,y,S){const A=y.batch,x=A.keys();let q=Z.resolve();return x.forEach((Y=>{q=q.next((()=>S.getEntry(_,Y))).next((at=>{const nt=y.docVersions.get(Y);ge(nt!==null,48541),at.version.compareTo(nt)<0&&(A.applyToRemoteDocument(at,y),at.isValidDocument()&&(at.setReadTime(y.commitVersion),S.addEntry(at)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(_,A)))})(i,a,t,c).next((()=>c.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let _=ie();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(_=_.add(g.batch.mutations[y].key));return _})(t)))).next((()=>i.localDocuments.getDocuments(a,o)))}))}function NE(s){const t=Ht(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function f2(s,t){const i=Ht(s),a=t.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const g=[];t.targetChanges.forEach(((S,A)=>{const x=o.get(A);if(!x)return;g.push(i.Pi.removeMatchingKeys(c,S.removedDocuments,A).next((()=>i.Pi.addMatchingKeys(c,S.addedDocuments,A))));let q=x.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(A)!==null?q=q.withResumeToken(Sn.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):S.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(S.resumeToken,a)),o=o.insert(A,q),(function(at,nt,ct){return at.resumeToken.approximateByteSize()===0||nt.snapshotVersion.toMicroseconds()-at.snapshotVersion.toMicroseconds()>=o2?!0:ct.addedDocuments.size+ct.modifiedDocuments.size+ct.removedDocuments.size>0})(x,q,S)&&g.push(i.Pi.updateTargetData(c,q))}));let _=xs(),y=ie();if(t.documentUpdates.forEach((S=>{t.resolvedLimboDocuments.has(S)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,S))})),g.push(d2(c,f,t.documentUpdates).next((S=>{_=S.ks,y=S.qs}))),!a.isEqual(Bt.min())){const S=i.Pi.getLastRemoteSnapshotVersion(c).next((A=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));g.push(S)}return Z.waitFor(g).next((()=>f.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,_,y))).next((()=>_))})).then((c=>(i.Ms=o,c)))}function d2(s,t,i){let a=ie(),o=ie();return i.forEach((c=>a=a.add(c))),t.getEntries(s,a).next((c=>{let f=xs();return i.forEach(((g,_)=>{const y=c.get(g);_.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(Bt.min())?(t.removeEntry(g,_.readTime),f=f.insert(g,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(_),f=f.insert(g,_)):Et(qm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",_.version)})),{ks:f,qs:o}}))}function m2(s,t){const i=Ht(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(t===void 0&&(t=Im),i.mutationQueue.getNextMutationBatchAfterBatchId(a,t))))}function g2(s,t){const i=Ht(s);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return i.Pi.getTargetData(a,t).next((c=>c?(o=c,Z.resolve(o)):i.Pi.allocateTargetId(a).next((f=>(o=new gr(t,f,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=i.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(t,a.targetId)),a}))}async function om(s,t,i){const a=Ht(s),o=a.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,(f=>a.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Al(f))throw f;Et(qm,`Failed to update sequence numbers for target ${t}: ${f}`)}a.Ms=a.Ms.remove(t),a.xs.delete(o.target)}function D_(s,t,i){const a=Ht(s);let o=Bt.min(),c=ie();return a.persistence.runTransaction("Execute query","readwrite",(f=>(function(_,y,S){const A=Ht(_),x=A.xs.get(S);return x!==void 0?Z.resolve(A.Ms.get(x)):A.Pi.getTargetData(y,S)})(a,f,Ki(t)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,g.targetId).next((_=>{c=_}))})).next((()=>a.Fs.getDocumentsMatchingQuery(f,t,i?o:Bt.min(),i?c:ie()))).next((g=>(p2(a,ew(t),g),{documents:g,Qs:c})))))}function p2(s,t,i){let a=s.Os.get(t)||Bt.min();i.forEach(((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Os.set(t,a)}class O_{constructor(){this.activeTargetIds=lw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class y2{constructor(){this.Mo=new O_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,a){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,a){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new O_,Promise.resolve()}handleUserChange(t,i,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class _2{Oo(t){}shutdown(){}}const M_="ConnectivityMonitor";class V_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Et(M_,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Et(M_,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Oc=null;function um(){return Oc===null?Oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oc++,"0x"+Oc.toString(16)}const Bd="RestConnection",v2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class E2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Yc?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(t,i,a,o,c){const f=um(),g=this.zo(t,i.toUriEncodedString());Et(Bd,`Sending RPC '${t}' ${f}:`,g,a);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,o,c);const{host:y}=new URL(g),S=El(y);return this.Jo(t,g,_,a,S).then((A=>(Et(Bd,`Received RPC '${t}' ${f}: `,A),A)),(A=>{throw ml(Bd,`RPC '${t}' ${f} failed with error: `,A,"url: ",g,"request:",a),A}))}Ho(t,i,a,o,c,f){return this.Go(t,i,a,o,c)}jo(t,i,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,c)=>t[c]=o)),a&&a.headers.forEach(((o,c)=>t[c]=o))}zo(t,i){const a=v2[t];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}class T2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Rn="WebChannelConnection";class b2 extends E2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,a,o,c){const f=um();return new Promise(((g,_)=>{const y=new Mv;y.setWithCredentials(!0),y.listenOnce(Vv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Lc.NO_ERROR:const A=y.getResponseJson();Et(Rn,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(A)),g(A);break;case Lc.TIMEOUT:Et(Rn,`RPC '${t}' ${f} timed out`),_(new Ct(et.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const x=y.getStatus();if(Et(Rn,`RPC '${t}' ${f} failed with status:`,x,"response text:",y.getResponseText()),x>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const Y=q?.error;if(Y&&Y.status&&Y.message){const at=(function(ct){const rt=ct.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(rt)>=0?rt:et.UNKNOWN})(Y.status);_(new Ct(at,Y.message))}else _(new Ct(et.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new Ct(et.UNAVAILABLE,"Connection failed."));break;default:Pt(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Et(Rn,`RPC '${t}' ${f} completed.`)}}));const S=JSON.stringify(o);Et(Rn,`RPC '${t}' ${f} sending request:`,o),y.send(i,"POST",S,a,15)}))}T_(t,i,a){const o=um(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Pv(),g=Lv(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(_.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const S=c.join("");Et(Rn,`Creating RPC '${t}' stream ${o}: ${S}`,_);const A=f.createWebChannel(S,_);this.I_(A);let x=!1,q=!1;const Y=new T2({Yo:nt=>{q?Et(Rn,`Not sending because RPC '${t}' stream ${o} is closed:`,nt):(x||(Et(Rn,`Opening RPC '${t}' stream ${o} transport.`),A.open(),x=!0),Et(Rn,`RPC '${t}' stream ${o} sending:`,nt),A.send(nt))},Zo:()=>A.close()}),at=(nt,ct,rt)=>{nt.listen(ct,(_t=>{try{rt(_t)}catch(wt){setTimeout((()=>{throw wt}),0)}}))};return at(A,Do.EventType.OPEN,(()=>{q||(Et(Rn,`RPC '${t}' stream ${o} transport opened.`),Y.o_())})),at(A,Do.EventType.CLOSE,(()=>{q||(q=!0,Et(Rn,`RPC '${t}' stream ${o} transport closed`),Y.a_(),this.E_(A))})),at(A,Do.EventType.ERROR,(nt=>{q||(q=!0,ml(Rn,`RPC '${t}' stream ${o} transport errored. Name:`,nt.name,"Message:",nt.message),Y.a_(new Ct(et.UNAVAILABLE,"The operation could not be completed")))})),at(A,Do.EventType.MESSAGE,(nt=>{if(!q){const ct=nt.data[0];ge(!!ct,16349);const rt=ct,_t=rt?.error||rt[0]?.error;if(_t){Et(Rn,`RPC '${t}' stream ${o} received error:`,_t);const wt=_t.status;let Qt=(function(w){const C=sn[w];if(C!==void 0)return yE(C)})(wt),mt=_t.message;Qt===void 0&&(Qt=et.INTERNAL,mt="Unknown error status: "+wt+" with message "+_t.message),q=!0,Y.a_(new Ct(Qt,mt)),A.close()}else Et(Rn,`RPC '${t}' stream ${o} received:`,ct),Y.u_(ct)}})),at(g,kv.STAT_EVENT,(nt=>{nt.stat===Wd.PROXY?Et(Rn,`RPC '${t}' stream ${o} detected buffering proxy`):nt.stat===Wd.NOPROXY&&Et(Rn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function qd(){return typeof document<"u"?document:null}function Sh(s){return new xw(s,!0)}class DE{constructor(t,i,a=1e3,o=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=a,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-a);o>0&&Et("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const k_="PersistentStream";class OE{constructor(t,i,a,o,c,f,g,_){this.Mi=t,this.S_=a,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DE(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===et.RESOURCE_EXHAUSTED?(ws(i.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===i&&this.G_(a,o)}),(a=>{t((()=>{const o=new Ct(et.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(t,i){const a=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Et(k_,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(Et(k_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class S2 extends OE{constructor(t,i,a,o,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=Iw(this.serializer,t),a=(function(c){if(!("targetChange"in c))return Bt.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Bt.min():f.readTime?Yi(f.readTime):Bt.min()})(t);return this.listener.H_(i,a)}Y_(t){const i={};i.database=lm(this.serializer),i.addTarget=(function(c,f){let g;const _=f.target;if(g=nm(_)?{documents:Ow(c,_)}:{query:Mw(c,_).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=EE(c,f.resumeToken);const y=sm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(Bt.min())>0){g.readTime=eh(c,f.snapshotVersion.toTimestamp());const y=sm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,t);const a=kw(this.serializer,t);a&&(i.labels=a),this.q_(i)}Z_(t){const i={};i.database=lm(this.serializer),i.removeTarget=t,this.q_(i)}}class A2 extends OE{constructor(t,i,a,o,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return ge(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ge(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ge(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=Dw(t.writeResults,t.commitTime),a=Yi(t.commitTime);return this.listener.na(a,i)}ra(){const t={};t.database=lm(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((a=>Nw(this.serializer,a)))};this.q_(i)}}class w2{}class x2 extends w2{constructor(t,i,a,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ct(et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,rm(i,a),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ct(et.UNKNOWN,c.toString())}))}Ho(t,i,a,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(t,rm(i,a),o,f,g,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ct(et.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class R2{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(i),this.aa=!1):Et("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ha="RemoteStore";class C2{constructor(t,i,a,o,c){this.localStore=t,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{a.enqueueAndForget((async()=>{ga(this)&&(Et(ha,"Restarting streams for network reachability change."),await(async function(_){const y=Ht(_);y.Ea.add(4),await tu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ah(y)})(this))}))})),this.Ra=new R2(a,o)}}async function Ah(s){if(ga(s))for(const t of s.da)await t(!0)}async function tu(s){for(const t of s.da)await t(!1)}function ME(s,t){const i=Ht(s);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Qm(i)?Fm(i):wl(i).O_()&&Gm(i,t))}function Hm(s,t){const i=Ht(s),a=wl(i);i.Ia.delete(t),a.O_()&&VE(i,t),i.Ia.size===0&&(a.O_()?a.L_():ga(i)&&i.Ra.set("Unknown"))}function Gm(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}wl(s).Y_(t)}function VE(s,t){s.Va.Ue(t),wl(s).Z_(t)}function Fm(s){s.Va=new bw({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),wl(s).start(),s.Ra.ua()}function Qm(s){return ga(s)&&!wl(s).x_()&&s.Ia.size>0}function ga(s){return Ht(s).Ea.size===0}function kE(s){s.Va=void 0}async function I2(s){s.Ra.set("Online")}async function N2(s){s.Ia.forEach(((t,i)=>{Gm(s,t)}))}async function D2(s,t){kE(s),Qm(s)?(s.Ra.ha(t),Fm(s)):s.Ra.set("Unknown")}async function O2(s,t,i){if(s.Ra.set("Online"),t instanceof vE&&t.state===2&&t.cause)try{await(async function(o,c){const f=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(s,t)}catch(a){Et(ha,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await ih(s,a)}else if(t instanceof zc?s.Va.Ze(t):t instanceof _E?s.Va.st(t):s.Va.tt(t),!i.isEqual(Bt.min()))try{const a=await NE(s.localStore);i.compareTo(a)>=0&&await(function(c,f){const g=c.Va.Tt(f);return g.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const S=c.Ia.get(y);S&&c.Ia.set(y,S.withResumeToken(_.resumeToken,f))}})),g.targetMismatches.forEach(((_,y)=>{const S=c.Ia.get(_);if(!S)return;c.Ia.set(_,S.withResumeToken(Sn.EMPTY_BYTE_STRING,S.snapshotVersion)),VE(c,_);const A=new gr(S.target,_,y,S.sequenceNumber);Gm(c,A)})),c.remoteSyncer.applyRemoteEvent(g)})(s,i)}catch(a){Et(ha,"Failed to raise snapshot:",a),await ih(s,a)}}async function ih(s,t,i){if(!Al(t))throw t;s.Ea.add(1),await tu(s),s.Ra.set("Offline"),i||(i=()=>NE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Et(ha,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Ah(s)}))}function LE(s,t){return t().catch((i=>ih(s,i,t)))}async function wh(s){const t=Ht(s),i=xr(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Im;for(;M2(t);)try{const o=await m2(t.localStore,a);if(o===null){t.Ta.length===0&&i.L_();break}a=o.batchId,V2(t,o)}catch(o){await ih(t,o)}PE(t)&&jE(t)}function M2(s){return ga(s)&&s.Ta.length<10}function V2(s,t){s.Ta.push(t);const i=xr(s);i.O_()&&i.X_&&i.ea(t.mutations)}function PE(s){return ga(s)&&!xr(s).x_()&&s.Ta.length>0}function jE(s){xr(s).start()}async function k2(s){xr(s).ra()}async function L2(s){const t=xr(s);for(const i of s.Ta)t.ea(i.mutations)}async function P2(s,t,i){const a=s.Ta.shift(),o=Lm.from(a,t,i);await LE(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await wh(s)}async function j2(s,t){t&&xr(s).X_&&await(async function(a,o){if((function(f){return vw(f)&&f!==et.ABORTED})(o.code)){const c=a.Ta.shift();xr(a).B_(),await LE(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o))),await wh(a)}})(s,t),PE(s)&&jE(s)}async function L_(s,t){const i=Ht(s);i.asyncQueue.verifyOperationInProgress(),Et(ha,"RemoteStore received new credentials");const a=ga(i);i.Ea.add(3),await tu(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await Ah(i)}async function U2(s,t){const i=Ht(s);t?(i.Ea.delete(2),await Ah(i)):t||(i.Ea.add(2),await tu(i),i.Ra.set("Unknown"))}function wl(s){return s.ma||(s.ma=(function(i,a,o){const c=Ht(i);return c.sa(),new S2(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:I2.bind(null,s),t_:N2.bind(null,s),r_:D2.bind(null,s),H_:O2.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Qm(s)?Fm(s):s.Ra.set("Unknown")):(await s.ma.stop(),kE(s))}))),s.ma}function xr(s){return s.fa||(s.fa=(function(i,a,o){const c=Ht(i);return c.sa(),new A2(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:k2.bind(null,s),r_:j2.bind(null,s),ta:L2.bind(null,s),na:P2.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await wh(s)):(await s.fa.stop(),s.Ta.length>0&&(Et(ha,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class $m{constructor(t,i,a,o,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,a,o,c){const f=Date.now()+a,g=new $m(t,i,f,o,c);return g.start(a),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(s,t){if(ws("AsyncQueue",`${t}: ${s}`),Al(s))return new Ct(et.UNAVAILABLE,`${t}: ${s}`);throw s}class ll{static emptySet(t){return new ll(t.comparator)}constructor(t){this.comparator=t?(i,a)=>t(i,a)||Dt.comparator(i.key,a.key):(i,a)=>Dt.comparator(i.key,a.key),this.keyedMap=Oo(),this.sortedSet=new Ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,a)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof ll)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const a=new ll;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=i,a}}class P_{constructor(){this.ga=new Ue(Dt.comparator)}track(t){const i=t.doc.key,a=this.ga.get(i);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(i,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(i):t.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Pt(63341,{Rt:t,pa:a}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,a)=>{t.push(a)})),t}}class vl{constructor(t,i,a,o,c,f,g,_,y){this.query=t,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(t,i,a,o,c){const f=[];return i.forEach((g=>{f.push({type:0,doc:g})})),new vl(t,i,ll.emptySet(i),f,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_h(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,a=t.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}class z2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class B2{constructor(){this.queries=j_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=Ht(i),c=o.queries;o.queries=j_(),c.forEach(((f,g)=>{for(const _ of g.Sa)_.onError(a)}))})(this,new Ct(et.ABORTED,"Firestore shutting down"))}}function j_(){return new ma((s=>rE(s)),_h)}async function q2(s,t){const i=Ht(s);let a=3;const o=t.query;let c=i.queries.get(o);c?!c.ba()&&t.Da()&&(a=2):(c=new z2,a=t.Da()?0:1);try{switch(a){case 0:c.wa=await i.onListen(o,!0);break;case 1:c.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const g=Km(f,`Initialization of query '${il(t.query)}' failed`);return void t.onError(g)}i.queries.set(o,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&Ym(i)}async function H2(s,t){const i=Ht(s),a=t.query;let o=3;const c=i.queries.get(a);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=t.Da()?0:1:!c.ba()&&t.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function G2(s,t){const i=Ht(s);let a=!1;for(const o of t){const c=o.query,f=i.queries.get(c);if(f){for(const g of f.Sa)g.Fa(o)&&(a=!0);f.wa=o}}a&&Ym(i)}function F2(s,t,i){const a=Ht(s),o=a.queries.get(t);if(o)for(const c of o.Sa)c.onError(i);a.queries.delete(t)}function Ym(s){s.Ca.forEach((t=>{t.next()}))}var cm,U_;(U_=cm||(cm={})).Ma="default",U_.Cache="cache";class Q2{constructor(t,i,a){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const o of t.docChanges)o.type!==3&&a.push(o);t=new vl(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=vl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==cm.Cache}}class UE{constructor(t){this.key=t}}class zE{constructor(t){this.key=t}}class $2{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=aE(t),this.tu=new ll(this.eu)}get nu(){return this.Ya}ru(t,i){const a=i?i.iu:new P_,o=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,f=o,g=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((S,A)=>{const x=o.get(S),q=vh(this.query,A)?A:null,Y=!!x&&this.mutatedKeys.has(x.key),at=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let nt=!1;x&&q?x.data.isEqual(q.data)?Y!==at&&(a.track({type:3,doc:q}),nt=!0):this.su(x,q)||(a.track({type:2,doc:q}),nt=!0,(_&&this.eu(q,_)>0||y&&this.eu(q,y)<0)&&(g=!0)):!x&&q?(a.track({type:0,doc:q}),nt=!0):x&&!q&&(a.track({type:1,doc:x}),nt=!0,(_||y)&&(g=!0)),nt&&(q?(f=f.add(q),c=at?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),a.track({type:1,doc:S})}return{tu:f,iu:a,Cs:g,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,a,o){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((S,A)=>(function(q,Y){const at=nt=>{switch(nt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt(20277,{Rt:nt})}};return at(q)-at(Y)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(a),o=o??!1;const g=i&&!o?this._u():[],_=this.Xa.size===0&&this.current&&!o?1:0,y=_!==this.Za;return this.Za=_,f.length!==0||y?{snapshot:new vl(this.query,t.tu,c,f,t.mutatedKeys,_===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ie(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return t.forEach((a=>{this.Xa.has(a)||i.push(new zE(a))})),this.Xa.forEach((a=>{t.has(a)||i.push(new UE(a))})),i}cu(t){this.Ya=t.Qs,this.Xa=ie();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xm="SyncEngine";class K2{constructor(t,i,a){this.query=t,this.targetId=i,this.view=a}}class Y2{constructor(t){this.key=t,this.hu=!1}}class X2{constructor(t,i,a,o,c,f){this.localStore=t,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ma((g=>rE(g)),_h),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(Dt.comparator),this.Au=new Map,this.Ru=new Um,this.Vu={},this.mu=new Map,this.fu=_l.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function W2(s,t,i=!0){const a=QE(s);let o;const c=a.Tu.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await BE(a,t,i,!0),o}async function Z2(s,t){const i=QE(s);await BE(i,t,!0,!1)}async function BE(s,t,i,a){const o=await g2(s.localStore,Ki(t)),c=o.targetId,f=s.sharedClientState.addLocalQueryTarget(c,i);let g;return a&&(g=await J2(s,t,c,f==="current",o.resumeToken)),s.isPrimaryClient&&i&&ME(s.remoteStore,o),g}async function J2(s,t,i,a,o){s.pu=(A,x,q)=>(async function(at,nt,ct,rt){let _t=nt.view.ru(ct);_t.Cs&&(_t=await D_(at.localStore,nt.query,!1).then((({documents:N})=>nt.view.ru(N,_t))));const wt=rt&&rt.targetChanges.get(nt.targetId),Qt=rt&&rt.targetMismatches.get(nt.targetId)!=null,mt=nt.view.applyChanges(_t,at.isPrimaryClient,wt,Qt);return B_(at,nt.targetId,mt.au),mt.snapshot})(s,A,x,q);const c=await D_(s.localStore,t,!0),f=new $2(t,c.Qs),g=f.ru(c.documents),_=Jo.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",o),y=f.applyChanges(g,s.isPrimaryClient,_);B_(s,i,y.au);const S=new K2(t,i,f);return s.Tu.set(t,S),s.Iu.has(i)?s.Iu.get(i).push(t):s.Iu.set(i,[t]),y.snapshot}async function tx(s,t,i){const a=Ht(s),o=a.Tu.get(t),c=a.Iu.get(o.targetId);if(c.length>1)return a.Iu.set(o.targetId,c.filter((f=>!_h(f,t)))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await om(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Hm(a.remoteStore,o.targetId),hm(a,o.targetId)})).catch(Sl)):(hm(a,o.targetId),await om(a.localStore,o.targetId,!0))}async function ex(s,t){const i=Ht(s),a=i.Tu.get(t),o=i.Iu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Hm(i.remoteStore,a.targetId))}async function nx(s,t,i){const a=ux(s);try{const o=await(function(f,g){const _=Ht(f),y=De.now(),S=g.reduce(((q,Y)=>q.add(Y.key)),ie());let A,x;return _.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let Y=xs(),at=ie();return _.Ns.getEntries(q,S).next((nt=>{Y=nt,Y.forEach(((ct,rt)=>{rt.isValidDocument()||(at=at.add(ct))}))})).next((()=>_.localDocuments.getOverlayedDocuments(q,Y))).next((nt=>{A=nt;const ct=[];for(const rt of g){const _t=mw(rt,A.get(rt.key).overlayedDocument);_t!=null&&ct.push(new Ir(rt.key,_t,Wv(_t.value.mapValue),Ri.exists(!0)))}return _.mutationQueue.addMutationBatch(q,y,ct,g)})).next((nt=>{x=nt;const ct=nt.applyToLocalDocumentSet(A,at);return _.documentOverlayCache.saveOverlays(q,nt.batchId,ct)}))})).then((()=>({batchId:x.batchId,changes:oE(A)})))})(a.localStore,t);a.sharedClientState.addPendingMutation(o.batchId),(function(f,g,_){let y=f.Vu[f.currentUser.toKey()];y||(y=new Ue(ne)),y=y.insert(g,_),f.Vu[f.currentUser.toKey()]=y})(a,o.batchId,i),await eu(a,o.changes),await wh(a.remoteStore)}catch(o){const c=Km(o,"Failed to persist write");i.reject(c)}}async function qE(s,t){const i=Ht(s);try{const a=await f2(i.localStore,t);t.targetChanges.forEach(((o,c)=>{const f=i.Au.get(c);f&&(ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?ge(f.hu,14607):o.removedDocuments.size>0&&(ge(f.hu,42227),f.hu=!1))})),await eu(i,a,t)}catch(a){await Sl(a)}}function z_(s,t,i){const a=Ht(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.Tu.forEach(((c,f)=>{const g=f.view.va(t);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const _=Ht(f);_.onlineState=g;let y=!1;_.queries.forEach(((S,A)=>{for(const x of A.Sa)x.va(g)&&(y=!0)})),y&&Ym(_)})(a.eventManager,t),o.length&&a.Pu.H_(o),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function ix(s,t,i){const a=Ht(s);a.sharedClientState.updateQueryState(t,"rejected",i);const o=a.Au.get(t),c=o&&o.key;if(c){let f=new Ue(Dt.comparator);f=f.insert(c,In.newNoDocument(c,Bt.min()));const g=ie().add(c),_=new bh(Bt.min(),new Map,new Ue(ne),f,g);await qE(a,_),a.du=a.du.remove(c),a.Au.delete(t),Wm(a)}else await om(a.localStore,t,!1).then((()=>hm(a,t,i))).catch(Sl)}async function sx(s,t){const i=Ht(s),a=t.batch.batchId;try{const o=await h2(i.localStore,t);GE(i,a,null),HE(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await eu(i,o)}catch(o){await Sl(o)}}async function rx(s,t,i){const a=Ht(s);try{const o=await(function(f,g){const _=Ht(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let S;return _.mutationQueue.lookupMutationBatch(y,g).next((A=>(ge(A!==null,37113),S=A.keys(),_.mutationQueue.removeMutationBatch(y,A)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,S,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,S))).next((()=>_.localDocuments.getDocuments(y,S)))}))})(a.localStore,t);GE(a,t,i),HE(a,t),a.sharedClientState.updateMutationState(t,"rejected",i),await eu(a,o)}catch(o){await Sl(o)}}function HE(s,t){(s.mu.get(t)||[]).forEach((i=>{i.resolve()})),s.mu.delete(t)}function GE(s,t,i){const a=Ht(s);let o=a.Vu[a.currentUser.toKey()];if(o){const c=o.get(t);c&&(i?c.reject(i):c.resolve(),o=o.remove(t)),a.Vu[a.currentUser.toKey()]=o}}function hm(s,t,i=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.Iu.get(t))s.Tu.delete(a),i&&s.Pu.yu(a,i);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((a=>{s.Ru.containsKey(a)||FE(s,a)}))}function FE(s,t){s.Eu.delete(t.path.canonicalString());const i=s.du.get(t);i!==null&&(Hm(s.remoteStore,i),s.du=s.du.remove(t),s.Au.delete(i),Wm(s))}function B_(s,t,i){for(const a of i)a instanceof UE?(s.Ru.addReference(a.key,t),ax(s,a)):a instanceof zE?(Et(Xm,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,t),s.Ru.containsKey(a.key)||FE(s,a.key)):Pt(19791,{wu:a})}function ax(s,t){const i=t.key,a=i.path.canonicalString();s.du.get(i)||s.Eu.has(a)||(Et(Xm,"New document in limbo: "+i),s.Eu.add(a),Wm(s))}function Wm(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const i=new Dt(Ne.fromString(t)),a=s.fu.next();s.Au.set(a,new Y2(i)),s.du=s.du.insert(i,a),ME(s.remoteStore,new gr(Ki(sE(i.path)),a,"TargetPurposeLimboResolution",mh.ce))}}async function eu(s,t,i){const a=Ht(s),o=[],c=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,_)=>{f.push(a.pu(_,t,i).then((y=>{if((y||i)&&a.isPrimaryClient){const S=y?!y.fromCache:i?.targetChanges.get(_.targetId)?.current;a.sharedClientState.updateQueryState(_.targetId,S?"current":"not-current")}if(y){o.push(y);const S=Bm.As(_.targetId,y);c.push(S)}})))})),await Promise.all(f),a.Pu.H_(o),await(async function(_,y){const S=Ht(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>Z.forEach(y,(x=>Z.forEach(x.Es,(q=>S.persistence.referenceDelegate.addReference(A,x.targetId,q))).next((()=>Z.forEach(x.ds,(q=>S.persistence.referenceDelegate.removeReference(A,x.targetId,q)))))))))}catch(A){if(!Al(A))throw A;Et(qm,"Failed to update sequence numbers: "+A)}for(const A of y){const x=A.targetId;if(!A.fromCache){const q=S.Ms.get(x),Y=q.snapshotVersion,at=q.withLastLimboFreeSnapshotVersion(Y);S.Ms=S.Ms.insert(x,at)}}})(a.localStore,c))}async function lx(s,t){const i=Ht(s);if(!i.currentUser.isEqual(t)){Et(Xm,"User change. New user:",t.toKey());const a=await IE(i.localStore,t);i.currentUser=t,(function(c,f){c.mu.forEach((g=>{g.forEach((_=>{_.reject(new Ct(et.CANCELLED,f))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await eu(i,a.Ls)}}function ox(s,t){const i=Ht(s),a=i.Au.get(t);if(a&&a.hu)return ie().add(a.key);{let o=ie();const c=i.Iu.get(t);if(!c)return o;for(const f of c){const g=i.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function QE(s){const t=Ht(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=qE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ox.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ix.bind(null,t),t.Pu.H_=G2.bind(null,t.eventManager),t.Pu.yu=F2.bind(null,t.eventManager),t}function ux(s){const t=Ht(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rx.bind(null,t),t}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return c2(this.persistence,new l2,t.initialUser,this.serializer)}Cu(t){return new CE(zm.mi,this.serializer)}Du(t){return new y2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class cx extends sh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){ge(this.persistence.referenceDelegate instanceof nh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new Qw(a,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new CE((a=>nh.mi(a,i)),this.serializer)}}class fm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>z_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=lx.bind(null,this.syncEngine),await U2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new B2})()}createDatastore(t){const i=Sh(t.databaseInfo.databaseId),a=(function(c){return new b2(c)})(t.databaseInfo);return(function(c,f,g,_){return new x2(c,f,g,_)})(t.authCredentials,t.appCheckCredentials,a,i)}createRemoteStore(t){return(function(a,o,c,f,g){return new C2(a,o,c,f,g)})(this.localStore,this.datastore,t.asyncQueue,(i=>z_(this.syncEngine,i,0)),(function(){return V_.v()?new V_:new _2})())}createSyncEngine(t,i){return(function(o,c,f,g,_,y,S){const A=new X2(o,c,f,g,_,y);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Ht(i);Et(ha,"RemoteStore shutting down."),a.Ea.add(5),await tu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fm.provider={build:()=>new fm};class hx{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ws("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}const Rr="FirestoreClient";class fx{constructor(t,i,a,o,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=Cn.UNAUTHENTICATED,this.clientId=Rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async f=>{Et(Rr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(a,(f=>(Et(Rr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Km(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}async function Hd(s,t){s.asyncQueue.verifyOperationInProgress(),Et(Rr,"Initializing OfflineComponentProvider");const i=s.configuration;await t.initialize(i);let a=i.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await IE(t.localStore,o),a=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function q_(s,t){s.asyncQueue.verifyOperationInProgress();const i=await dx(s);Et(Rr,"Initializing OnlineComponentProvider"),await t.initialize(i,s.configuration),s.setCredentialChangeListener((a=>L_(t.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>L_(t.remoteStore,o))),s._onlineComponents=t}async function dx(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Et(Rr,"Using user provided OfflineComponentProvider");try{await Hd(s,s._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(o){return o.name==="FirebaseError"?o.code===et.FAILED_PRECONDITION||o.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;ml("Error using user provided cache. Falling back to memory cache: "+i),await Hd(s,new sh)}}else Et(Rr,"Using default OfflineComponentProvider"),await Hd(s,new cx(void 0));return s._offlineComponents}async function $E(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Et(Rr,"Using user provided OnlineComponentProvider"),await q_(s,s._uninitializedComponentsProvider._online)):(Et(Rr,"Using default OnlineComponentProvider"),await q_(s,new fm))),s._onlineComponents}function mx(s){return $E(s).then((t=>t.syncEngine))}async function gx(s){const t=await $E(s),i=t.eventManager;return i.onListen=W2.bind(null,t.syncEngine),i.onUnlisten=tx.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=Z2.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=ex.bind(null,t.syncEngine),i}function px(s,t,i={}){const a=new Er;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,g,_,y){const S=new hx({next:x=>{S.Nu(),f.enqueueAndForget((()=>H2(c,A))),x.fromCache&&_.source==="server"?y.reject(new Ct(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),A=new Q2(g,S,{includeMetadataChanges:!0,qa:!0});return q2(c,A)})(await gx(s),s.asyncQueue,t,i,a))),a.promise}function KE(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const H_=new Map;const YE="firestore.googleapis.com",G_=!0;class F_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YE,this.ssl=G_}else this.host=t.host,this.ssl=t.ssl??G_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=RE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Gw)throw new Ct(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}RA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KE(t.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ct(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class xh{constructor(t,i,a,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ct(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new yA;switch(a.type){case"firstParty":return new TA(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ct(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=H_.get(i);a&&(Et("ComponentProvider","Removing Datastore"),H_.delete(i),a.terminate())})(this),Promise.resolve()}}function yx(s,t,i,a={}){s=ca(s,xh);const o=El(t),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},g=`${t}:${i}`;o&&(Av(`https://${g}`),wv("Firestore",!0)),c.host!==YE&&c.host!==g&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...c,host:g,ssl:o,emulatorOptions:a};if(!la(_,f)&&(s._setSettings(_),a.mockUserToken)){let y,S;if(typeof a.mockUserToken=="string")y=a.mockUserToken,S=Cn.MOCK_USER;else{y=q1(a.mockUserToken,s._app?.options.projectId);const A=a.mockUserToken.sub||a.mockUserToken.user_id;if(!A)throw new Ct(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Cn(A)}s._authCredentials=new _A(new Uv(y,S))}}class Rh{constructor(t,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Rh(this.firestore,t,this._query)}}class dn{constructor(t,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new dn(this.firestore,t,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,a){if(Wo(i,dn._jsonSchema))return new dn(t,a||null,new Dt(Ne.fromString(i.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:rn("string",dn._jsonSchemaVersion),referencePath:rn("string")};class Tr extends Rh{constructor(t,i,a){super(t,i,sE(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new dn(this.firestore,null,new Dt(t))}withConverter(t){return new Tr(this.firestore,t,this._path)}}function Q_(s,t,...i){if(s=bn(s),zv("collection","path",t),s instanceof xh){const a=Ne.fromString(t,...i);return r_(a),new Tr(s,null,a)}{if(!(s instanceof dn||s instanceof Tr))throw new Ct(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ne.fromString(t,...i));return r_(a),new Tr(s.firestore,null,a)}}function dm(s,t,...i){if(s=bn(s),arguments.length===1&&(t=Rm.newId()),zv("doc","path",t),s instanceof xh){const a=Ne.fromString(t,...i);return s_(a),new dn(s,null,new Dt(a))}{if(!(s instanceof dn||s instanceof Tr))throw new Ct(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Ne.fromString(t,...i));return s_(a),new dn(s.firestore,s instanceof Tr?s.converter:null,new Dt(a))}}const $_="AsyncQueue";class K_{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DE(this,"async_queue_retry"),this._c=()=>{const a=qd();a&&Et($_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const i=qd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=qd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Al(t))throw t;Et($_,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((a=>{throw this.nc=a,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",Y_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(t,i,a){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const o=$m.createAndSchedule(this,t,i,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Pt(47125,{Pc:Y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Y_(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class nu extends xh{constructor(t,i,a,o){super(t,i,a,o),this.type="firestore",this._queue=new K_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new K_(t),this._firestoreClient=void 0,await t}}}function _x(s,t){const i=typeof s=="object"?s:Iv(),a=typeof s=="string"?s:Yc,o=wm(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=z1("firestore");c&&yx(o,...c)}return o}function XE(s){if(s._terminated)throw new Ct(et.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||vx(s),s._firestoreClient}function vx(s){const t=s._freezeSettings(),i=(function(o,c,f,g){return new jA(o,c,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,KE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new fx(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}class yi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yi(Sn.fromBase64String(t))}catch(i){throw new Ct(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new yi(Sn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Wo(t,yi._jsonSchema))return yi.fromBase64String(t.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:rn("string",yi._jsonSchemaVersion),bytes:rn("string")};class Ch{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new Ct(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Zm{constructor(t){this._methodName=t}}class Xi{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Ct(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Ct(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ne(this._lat,t._lat)||ne(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(t){if(Wo(t,Xi._jsonSchema))return new Xi(t.latitude,t.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:rn("string",Xi._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};class Wi{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Wo(t,Wi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Wi(t.vectorValues);throw new Ct(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:rn("string",Wi._jsonSchemaVersion),vectorValues:rn("object")};const Ex=/^__.*__$/;class Tx{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return this.fieldMask!==null?new Ir(t,this.data,this.fieldMask,i,this.fieldTransforms):new Zo(t,this.data,i,this.fieldTransforms)}}class WE{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return new Ir(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function ZE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt(40011,{Ac:s})}}class Jm{constructor(t,i,a,o,c,f){this.settings=t,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Jm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),a=this.Vc({path:i,fc:!1});return a.gc(t),a}yc(t){const i=this.path?.child(t),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return rh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(ZE(this.Ac)&&Ex.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class bx{constructor(t,i,a){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=a||Sh(t)}Cc(t,i,a,o=!1){return new Jm({Ac:t,methodName:i,Dc:a,path:Tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JE(s){const t=s._freezeSettings(),i=Sh(s._databaseId);return new bx(s._databaseId,!!t.ignoreUndefinedProperties,i)}function Sx(s,t,i,a,o,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,t,i,o);tg("Data must be an object, but it was:",f,a);const g=tT(a,f);let _,y;if(c.merge)_=new ii(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const A of c.mergeFields){const x=mm(t,A,i);if(!f.contains(x))throw new Ct(et.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);nT(S,x)||S.push(x)}_=new ii(S),y=f.fieldTransforms.filter((A=>_.covers(A.field)))}else _=null,y=f.fieldTransforms;return new Tx(new Fn(g),_,y)}class Ih extends Zm{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ih}}function Ax(s,t,i,a){const o=s.Cc(1,t,i);tg("Data must be an object, but it was:",o,a);const c=[],f=Fn.empty();Cr(a,((_,y)=>{const S=eg(t,_,i);y=bn(y);const A=o.yc(S);if(y instanceof Ih)c.push(S);else{const x=Nh(y,A);x!=null&&(c.push(S),f.set(S,x))}}));const g=new ii(c);return new WE(f,g,o.fieldTransforms)}function wx(s,t,i,a,o,c){const f=s.Cc(1,t,i),g=[mm(t,a,i)],_=[o];if(c.length%2!=0)throw new Ct(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)g.push(mm(t,c[x])),_.push(c[x+1]);const y=[],S=Fn.empty();for(let x=g.length-1;x>=0;--x)if(!nT(y,g[x])){const q=g[x];let Y=_[x];Y=bn(Y);const at=f.yc(q);if(Y instanceof Ih)y.push(q);else{const nt=Nh(Y,at);nt!=null&&(y.push(q),S.set(q,nt))}}const A=new ii(y);return new WE(S,A,f.fieldTransforms)}function Nh(s,t){if(eT(s=bn(s)))return tg("Unsupported field value:",t,s),tT(s,t);if(s instanceof Zm)return(function(a,o){if(!ZE(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(a,o){const c=[];let f=0;for(const g of a){let _=Nh(g,o.wc(f));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),f++}return{arrayValue:{values:c}}})(s,t)}return(function(a,o){if((a=bn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return ow(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=De.fromDate(a);return{timestampValue:eh(o.serializer,c)}}if(a instanceof De){const c=new De(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:eh(o.serializer,c)}}if(a instanceof Xi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof yi)return{bytesValue:EE(o.serializer,a._byteString)};if(a instanceof dn){const c=o.databaseId,f=a.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:jm(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Wi)return(function(f,g){return{mapValue:{fields:{[Yv]:{stringValue:Xv},[Xc]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Vm(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Cm(a)}`)})(s,t)}function tT(s,t){const i={};return Hv(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cr(s,((a,o)=>{const c=Nh(o,t.mc(a));c!=null&&(i[a]=c)})),{mapValue:{fields:i}}}function eT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof De||s instanceof Xi||s instanceof yi||s instanceof dn||s instanceof Zm||s instanceof Wi)}function tg(s,t,i){if(!eT(i)||!Bv(i)){const a=Cm(i);throw a==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+a)}}function mm(s,t,i){if((t=bn(t))instanceof Ch)return t._internalPath;if(typeof t=="string")return eg(s,t);throw rh("Field path arguments must be of type string or ",s,!1,void 0,i)}const xx=new RegExp("[~\\*/\\[\\]]");function eg(s,t,i){if(t.search(xx)>=0)throw rh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Ch(...t.split("."))._internalPath}catch{throw rh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function rh(s,t,i,a,o){const c=a&&!a.isEmpty(),f=o!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||f)&&(_+=" (found",c&&(_+=` in field ${a}`),f&&(_+=` in document ${o}`),_+=")"),new Ct(et.INVALID_ARGUMENT,g+s+_)}function nT(s,t){return s.some((i=>i.isEqual(t)))}class iT{constructor(t,i,a,o,c){this._firestore=t,this._userDataWriter=i,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Rx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(sT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Rx extends iT{data(){return super.data()}}function sT(s,t){return typeof t=="string"?eg(s,t):t instanceof Ch?t._internalPath:t._delegate._internalPath}function Cx(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ct(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ix{convertValue(t,i="none"){switch(wr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Pt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const a={};return Cr(t,((o,c)=>{a[o]=this.convertValue(c,i)})),a}convertVectorValue(t){const i=t.fields?.[Xc].arrayValue?.values?.map((a=>Ye(a.doubleValue)));return new Wi(i)}convertGeoPoint(t){return new Xi(Ye(t.latitude),Ye(t.longitude))}convertArray(t,i){return(t.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const a=ph(t);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(qo(t));default:return null}}convertTimestamp(t){const i=Sr(t);return new De(i.seconds,i.nanos)}convertDocumentKey(t,i){const a=Ne.fromString(t);ge(xE(a),9688,{name:t});const o=new Ho(a.get(1),a.get(3)),c=new Dt(a.popFirst(5));return o.isEqual(i)||ws(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}function Nx(s,t,i){let a;return a=s?s.toFirestore(t):t,a}class Mc{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ol extends iT{constructor(t,i,a,o,c,f){super(t,i,a,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const a=this._document.data.field(sT("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=ol._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",ol._jsonSchema={type:rn("string",ol._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class Bc extends ol{data(t={}){return super.data(t)}}class ul{constructor(t,i,a,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new Mc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((a=>{t.call(i,new Bc(this._firestore,this._userDataWriter,a.key,a,new Mc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Ct(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const _=new Bc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Mc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const _=new Bc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Mc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,S=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),S=f.indexOf(g.doc.key)),{type:Dx(g.type),doc:_,oldIndex:y,newIndex:S}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ul._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Rm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Dx(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt(61501,{type:s})}}ul._jsonSchemaVersion="firestore/querySnapshot/1.0",ul._jsonSchema={type:rn("string",ul._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};class Ox extends Ix{constructor(t){super(),this.firestore=t}convertBytes(t){return new yi(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new dn(this.firestore,null,i)}}function Mx(s){s=ca(s,Rh);const t=ca(s.firestore,nu),i=XE(t),a=new Ox(t);return Cx(s._query),px(i,s._query).then((o=>new ul(t,a,s,o)))}function Vx(s,t,i,...a){s=ca(s,dn);const o=ca(s.firestore,nu),c=JE(o);let f;return f=typeof(t=bn(t))=="string"||t instanceof Ch?wx(c,"updateDoc",s._key,t,i,a):Ax(c,"updateDoc",s._key,t),ng(o,[f.toMutation(s._key,Ri.exists(!0))])}function kx(s){return ng(ca(s.firestore,nu),[new km(s._key,Ri.none())])}function Lx(s,t){const i=ca(s.firestore,nu),a=dm(s),o=Nx(s.converter,t);return ng(i,[Sx(JE(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Ri.exists(!1))]).then((()=>a))}function ng(s,t){return(function(a,o){const c=new Er;return a.asyncQueue.enqueueAndForget((async()=>nx(await mx(a),o,c))),c.promise})(XE(s),t)}(function(t,i=!0){(function(o){bl=o})(Tl),dl(new oa("firestore",((a,{instanceIdentifier:o,options:c})=>{const f=a.getProvider("app").getImmediate(),g=new nu(new vA(a.getProvider("auth-internal")),new bA(f,a.getProvider("app-check-internal")),(function(y,S){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ct(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(y.options.projectId,S)})(f,o),f);return c={useFetchStreams:i,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),_r(t_,e_,t),_r(t_,e_,"esm2020")})();function rT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Px=rT,aT=new Yo("auth","Firebase",rT());const ah=new Sm("@firebase/auth");function jx(s,...t){ah.logLevel<=ee.WARN&&ah.warn(`Auth (${Tl}): ${s}`,...t)}function qc(s,...t){ah.logLevel<=ee.ERROR&&ah.error(`Auth (${Tl}): ${s}`,...t)}function Ci(s,...t){throw ig(s,...t)}function Zi(s,...t){return ig(s,...t)}function lT(s,t,i){const a={...Px(),[t]:i};return new Yo("auth","Firebase",a).create(t,{appName:s.name})}function Ss(s){return lT(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ig(s,...t){if(typeof s!="string"){const i=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(i,...a)}return aT.create(s,...t)}function Lt(s,t,...i){if(!s)throw ig(t,...i)}function Ts(s){const t="INTERNAL ASSERTION FAILED: "+s;throw qc(t),new Error(t)}function Rs(s,t){s||Ts(t)}function gm(){return typeof self<"u"&&self.location?.href||""}function Ux(){return X_()==="http:"||X_()==="https:"}function X_(){return typeof self<"u"&&self.location?.protocol||null}function zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ux()||K1()||"connection"in navigator)?navigator.onLine:!0}function Bx(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class iu{constructor(t,i){this.shortDelay=t,this.longDelay=i,Rs(i>t,"Short delay should be less than long delay!"),this.isMobile=F1()||Y1()}get(){return zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sg(s,t){Rs(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class oT{static initialize(t,i,a){this.fetchImpl=t,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Hx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gx=new iu(3e4,6e4);function Nr(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Dr(s,t,i,a,o={}){return uT(s,o,async()=>{let c={},f={};a&&(t==="GET"?f=a:c={body:JSON.stringify(a)});const g=Xo({key:s.config.apiKey,...f}).slice(1),_=await s._getAdditionalHeaders();_["Content-Type"]="application/json",s.languageCode&&(_["X-Firebase-Locale"]=s.languageCode);const y={method:t,headers:_,...c};return $1()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&El(s.emulatorConfig.host)&&(y.credentials="include"),oT.fetch()(await cT(s,s.config.apiHost,i,g),y)})}async function uT(s,t,i){s._canInitEmulator=!1;const a={...qx,...t};try{const o=new Qx(s),c=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Vc(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const g=c.ok?f.errorMessage:f.error.message,[_,y]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(s,"credential-already-in-use",f);if(_==="EMAIL_EXISTS")throw Vc(s,"email-already-in-use",f);if(_==="USER_DISABLED")throw Vc(s,"user-disabled",f);const S=a[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw lT(s,S,y);Ci(s,S)}}catch(o){if(o instanceof Cs)throw o;Ci(s,"network-request-failed",{message:String(o)})}}async function su(s,t,i,a,o={}){const c=await Dr(s,t,i,a,o);return"mfaPendingCredential"in c&&Ci(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function cT(s,t,i,a){const o=`${t}${i}?${a}`,c=s,f=c.config.emulator?sg(s.config,o):`${s.config.apiScheme}://${o}`;return Hx.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function Fx(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(Zi(this.auth,"network-request-failed")),Gx.get())})}}function Vc(s,t,i){const a={appName:s.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const o=Zi(s,t,a);return o.customData._tokenResponse=i,o}function W_(s){return s!==void 0&&s.enterprise!==void 0}class $x{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return Fx(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kx(s,t){return Dr(s,"GET","/v2/recaptchaConfig",Nr(s,t))}async function Yx(s,t){return Dr(s,"POST","/v1/accounts:delete",t)}async function lh(s,t){return Dr(s,"POST","/v1/accounts:lookup",t)}function Uo(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Xx(s,t=!1){const i=bn(s),a=await i.getIdToken(t),o=rg(a);Lt(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:a,authTime:Uo(Gd(o.auth_time)),issuedAtTime:Uo(Gd(o.iat)),expirationTime:Uo(Gd(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Gd(s){return Number(s)*1e3}function rg(s){const[t,i,a]=s.split(".");if(t===void 0||i===void 0||a===void 0)return qc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ev(i);return o?JSON.parse(o):(qc("Failed to decode base64 JWT payload"),null)}catch(o){return qc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Z_(s){const t=rg(s);return Lt(t,"internal-error"),Lt(typeof t.exp<"u","internal-error"),Lt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function $o(s,t,i=!1){if(i)return t;try{return await t}catch(a){throw a instanceof Cs&&Wx(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function Wx({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class Zx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class pm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uo(this.lastLoginAt),this.creationTime=Uo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oh(s){const t=s.auth,i=await s.getIdToken(),a=await $o(s,lh(t,{idToken:i}));Lt(a?.users.length,t,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?hT(o.providerUserInfo):[],f=tR(s.providerData,c),g=s.isAnonymous,_=!(s.email&&o.passwordHash)&&!f?.length,y=g?_:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new pm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,S)}async function Jx(s){const t=bn(s);await oh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tR(s,t){return[...s.filter(a=>!t.some(o=>o.providerId===a.providerId)),...t]}function hT(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function eR(s,t){const i=await uT(s,{},async()=>{const a=Xo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,f=await cT(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:a};return s.emulatorConfig&&El(s.emulatorConfig.host)&&(_.credentials="include"),oT.fetch()(f,_)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function nR(s,t){return Dr(s,"POST","/v2/accounts:revokeToken",Nr(s,t))}class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Lt(t.idToken,"internal-error"),Lt(typeof t.idToken<"u","internal-error"),Lt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Z_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Lt(t.length!==0,"internal-error");const i=Z_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Lt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:a,refreshToken:o,expiresIn:c}=await eR(t,i);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(t,i,a){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,i){const{refreshToken:a,accessToken:o,expirationTime:c}=i,f=new cl;return a&&(Lt(typeof a=="string","internal-error",{appName:t}),f.refreshToken=a),o&&(Lt(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),c&&(Lt(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}function ur(s,t){Lt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class xi{constructor({uid:t,auth:i,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new Zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const i=await $o(this,this.stsTokenManager.getToken(this.auth,t));return Lt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return Xx(this,t)}reload(){return Jx(this)}_assign(t){this!==t&&(Lt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new xi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),i&&await oh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Ss(this.auth));const t=await this.getIdToken();return await $o(this,Yx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const a=i.displayName??void 0,o=i.email??void 0,c=i.phoneNumber??void 0,f=i.photoURL??void 0,g=i.tenantId??void 0,_=i._redirectEventId??void 0,y=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:A,emailVerified:x,isAnonymous:q,providerData:Y,stsTokenManager:at}=i;Lt(A&&at,t,"internal-error");const nt=cl.fromJSON(this.name,at);Lt(typeof A=="string",t,"internal-error"),ur(a,t.name),ur(o,t.name),Lt(typeof x=="boolean",t,"internal-error"),Lt(typeof q=="boolean",t,"internal-error"),ur(c,t.name),ur(f,t.name),ur(g,t.name),ur(_,t.name),ur(y,t.name),ur(S,t.name);const ct=new xi({uid:A,auth:t,email:o,emailVerified:x,displayName:a,isAnonymous:q,photoURL:f,phoneNumber:c,tenantId:g,stsTokenManager:nt,createdAt:y,lastLoginAt:S});return Y&&Array.isArray(Y)&&(ct.providerData=Y.map(rt=>({...rt}))),_&&(ct._redirectEventId=_),ct}static async _fromIdTokenResponse(t,i,a=!1){const o=new cl;o.updateFromServerResponse(i);const c=new xi({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:a});return await oh(c),c}static async _fromGetAccountInfoResponse(t,i,a){const o=i.users[0];Lt(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?hT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,g=new cl;g.updateFromIdToken(a);const _=new xi({uid:o.localId,auth:t,stsTokenManager:g,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new pm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(_,y),_}}const J_=new Map;function bs(s){Rs(s instanceof Function,"Expected a class definition");let t=J_.get(s);return t?(Rs(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,J_.set(s,t),t)}class fT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}fT.type="NONE";const tv=fT;function Hc(s,t,i){return`firebase:${s}:${t}:${i}`}class hl{constructor(t,i,a){this.persistence=t,this.auth=i,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=Hc(this.userKey,o.apiKey,c),this.fullPersistenceKey=Hc("persistence",o.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await lh(this.auth,{idToken:t}).catch(()=>{});return i?xi._fromGetAccountInfoResponse(this.auth,i,t):null}return xi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,a="authUser"){if(!i.length)return new hl(bs(tv),t,a);const o=(await Promise.all(i.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||bs(tv);const f=Hc(a,t.config.apiKey,t.name);let g=null;for(const y of i)try{const S=await y._get(f);if(S){let A;if(typeof S=="string"){const x=await lh(t,{idToken:S}).catch(()=>{});if(!x)break;A=await xi._fromGetAccountInfoResponse(t,x,S)}else A=xi._fromJSON(t,S);y!==c&&(g=A),c=y;break}}catch{}const _=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new hl(c,t,a):(c=_[0],g&&await c._set(f,g.toJSON()),await Promise.all(i.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new hl(c,t,a))}}function ev(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_T(t))return"Blackberry";if(vT(t))return"Webos";if(mT(t))return"Safari";if((t.includes("chrome/")||gT(t))&&!t.includes("edge/"))return"Chrome";if(yT(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(i);if(a?.length===2)return a[1]}return"Other"}function dT(s=Nn()){return/firefox\//i.test(s)}function mT(s=Nn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gT(s=Nn()){return/crios\//i.test(s)}function pT(s=Nn()){return/iemobile/i.test(s)}function yT(s=Nn()){return/android/i.test(s)}function _T(s=Nn()){return/blackberry/i.test(s)}function vT(s=Nn()){return/webos/i.test(s)}function ag(s=Nn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function iR(s=Nn()){return ag(s)&&!!window.navigator?.standalone}function sR(){return X1()&&document.documentMode===10}function ET(s=Nn()){return ag(s)||yT(s)||vT(s)||_T(s)||/windows phone/i.test(s)||pT(s)}function TT(s,t=[]){let i;switch(s){case"Browser":i=ev(Nn());break;case"Worker":i=`${ev(Nn())}-${s}`;break;default:i=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Tl}/${a}`}class rR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const a=c=>new Promise((f,g)=>{try{const _=t(c);f(_)}catch(_){g(_)}});a.onAbort=i,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const a of this.queue)await a(t),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function aR(s,t={}){return Dr(s,"GET","/v2/passwordPolicy",Nr(s,t))}const lR=6;class oR{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??lR,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=t.length>=a),o&&(i.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let o=0;o<t.length;o++)a=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,i,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}class uR{constructor(t,i,a,o){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new rR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=bs(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await hl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await lh(this,{idToken:t}),a=await xi._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(pi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===f)&&g?.user&&(a=g.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await oh(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Bx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(pi(this.app))return Promise.reject(Ss(this));const i=t?bn(t):null;return i&&Lt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Lt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return pi(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await aR(this),i=new oR(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Yo("auth","Firebase",t())}onAuthStateChanged(t,i,a){return this.registerStateListener(this.authStateSubscription,t,i,a)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,a){return this.registerStateListener(this.idTokenSubscription,t,i,a)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await nR(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const a=await this.getOrInitRedirectPersistenceManager(i);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&bs(t)||this._popupRedirectResolver;Lt(i,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[bs(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,a,o){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Lt(g,this,"internal-error"),g.then(()=>{f||c(this.currentUser)}),typeof i=="function"){const _=t.addObserver(i,a,o);return()=>{f=!0,_()}}else{const _=t.addObserver(i);return()=>{f=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=TT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&jx(`Error while retrieving App Check token: ${t.error}`),t?.token}}function pa(s){return bn(s)}class nv{constructor(t){this.auth=t,this.observer=null,this.addObserver=sS(i=>this.observer=i)}get next(){return Lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cR(s){Dh=s}function bT(s){return Dh.loadJS(s)}function hR(){return Dh.recaptchaEnterpriseScript}function fR(){return Dh.gapiScript}function dR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class mR{constructor(){this.enterprise=new gR}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class gR{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const pR="recaptcha-enterprise",ST="NO_RECAPTCHA";class yR{constructor(t){this.type=pR,this.auth=pa(t)}async verify(t="verify",i=!1){async function a(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,g)=>{Kx(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new $x(_);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(_=>{g(_)})})}function o(c,f,g){const _=window.grecaptcha;W_(_)?_.enterprise.ready(()=>{_.enterprise.execute(c,{action:t}).then(y=>{f(y)}).catch(()=>{f(ST)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mR().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{a(this.auth).then(g=>{if(!i&&W_(window.grecaptcha))o(g,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let _=hR();_.length!==0&&(_+=g),bT(_).then(()=>{o(g,c,f)}).catch(y=>{f(y)})}}).catch(g=>{f(g)})})}}async function iv(s,t,i,a=!1,o=!1){const c=new yR(s);let f;if(o)f=ST;else try{f=await c.verify(i)}catch{f=await c.verify(i,!0)}const g={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const _=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const _=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function ym(s,t,i,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await iv(s,t,i,i==="getOobCode");return a(s,c)}else return a(s,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await iv(s,t,i,i==="getOobCode");return a(s,f)}else return Promise.reject(c)})}function _R(s,t){const i=wm(s,"auth");if(i.isInitialized()){const o=i.getImmediate(),c=i.getOptions();if(la(c,t??{}))return o;Ci(o,"already-initialized")}return i.initialize({options:t})}function vR(s,t){const i=t?.persistence||[],a=(Array.isArray(i)?i:[i]).map(bs);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t?.popupRedirectResolver)}function ER(s,t,i){const a=pa(s);Lt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const o=!1,c=AT(t),{host:f,port:g}=TR(t),_=g===null?"":`:${g}`,y={url:`${c}//${f}${_}/`},S=Object.freeze({host:f,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Lt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Lt(la(y,a.config.emulator)&&la(S,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=S,a.settings.appVerificationDisabledForTesting=!0,El(f)?(Av(`${c}//${f}${_}`),wv("Auth",!0)):bR()}function AT(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function TR(s){const t=AT(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:sv(a.substr(c.length+1))}}else{const[c,f]=a.split(":");return{host:c,port:sv(f)}}}function sv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function bR(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class lg{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Ts("not implemented")}_getIdTokenResponse(t){return Ts("not implemented")}_linkToIdToken(t,i){return Ts("not implemented")}_getReauthenticationResolver(t){return Ts("not implemented")}}async function SR(s,t){return Dr(s,"POST","/v1/accounts:signUp",t)}async function AR(s,t){return su(s,"POST","/v1/accounts:signInWithPassword",Nr(s,t))}async function wR(s,t){return su(s,"POST","/v1/accounts:signInWithEmailLink",Nr(s,t))}async function xR(s,t){return su(s,"POST","/v1/accounts:signInWithEmailLink",Nr(s,t))}class Ko extends lg{constructor(t,i,a,o=null){super("password",a),this._email=t,this._password=i,this._tenantId=o}static _fromEmailAndPassword(t,i){return new Ko(t,i,"password")}static _fromEmailAndCode(t,i,a=null){return new Ko(t,i,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(t,i,"signInWithPassword",AR);case"emailLink":return wR(t,{email:this._email,oobCode:this._password});default:Ci(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const a={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(t,a,"signUpPassword",SR);case"emailLink":return xR(t,{idToken:i,email:this._email,oobCode:this._password});default:Ci(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function fl(s,t){return su(s,"POST","/v1/accounts:signInWithIdp",Nr(s,t))}const RR="http://localhost";class fa extends lg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new fa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Ci("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:o,...c}=i;if(!a||!o)return null;const f=new fa(a,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return fl(t,i)}_linkToIdToken(t,i){const a=this.buildRequest();return a.idToken=i,fl(t,a)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,fl(t,i)}buildRequest(){const t={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Xo(i)}return t}}function CR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IR(s){const t=Io(No(s)).link,i=t?Io(No(t)).deep_link_id:null,a=Io(No(s)).deep_link_id;return(a?Io(No(a)).link:null)||a||i||t||s}class og{constructor(t){const i=Io(No(t)),a=i.apiKey??null,o=i.oobCode??null,c=CR(i.mode??null);Lt(a&&o&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=o,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=IR(t);try{return new og(i)}catch{return null}}}class xl{constructor(){this.providerId=xl.PROVIDER_ID}static credential(t,i){return Ko._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const a=og.parseLink(i);return Lt(a,"argument-error"),Ko._fromEmailAndCode(t,a.code,a.tenantId)}}xl.PROVIDER_ID="password";xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class ru extends wT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class hr extends ru{constructor(){super("facebook.com")}static credential(t){return fa._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hr.credentialFromTaggedObject(t)}static credentialFromError(t){return hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hr.credential(t.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";class fr extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return fa._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return fr.credentialFromTaggedObject(t)}static credentialFromError(t){return fr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:a}=t;if(!i&&!a)return null;try{return fr.credential(i,a)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";class dr extends ru{constructor(){super("github.com")}static credential(t){return fa._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return dr.credentialFromTaggedObject(t)}static credentialFromError(t){return dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return dr.credential(t.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";class mr extends ru{constructor(){super("twitter.com")}static credential(t,i){return fa._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return mr.credentialFromTaggedObject(t)}static credentialFromError(t){return mr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=t;if(!i||!a)return null;try{return mr.credential(i,a)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";async function NR(s,t){return su(s,"POST","/v1/accounts:signUp",Nr(s,t))}class da{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,a,o=!1){const c=await xi._fromIdTokenResponse(t,a,o),f=rv(a);return new da({user:c,providerId:f,_tokenResponse:a,operationType:i})}static async _forOperation(t,i,a){await t._updateTokensIfNecessary(a,!0);const o=rv(a);return new da({user:t,providerId:o,_tokenResponse:a,operationType:i})}}function rv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class uh extends Cs{constructor(t,i,a,o){super(i.code,i.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,uh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,i,a,o){return new uh(t,i,a,o)}}function xT(s,t,i,a){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?uh._fromErrorAndOperation(s,c,t,a):c})}async function DR(s,t,i=!1){const a=await $o(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return da._forOperation(s,"link",a)}async function OR(s,t,i=!1){const{auth:a}=s;if(pi(a.app))return Promise.reject(Ss(a));const o="reauthenticate";try{const c=await $o(s,xT(a,o,t,s),i);Lt(c.idToken,a,"internal-error");const f=rg(c.idToken);Lt(f,a,"internal-error");const{sub:g}=f;return Lt(s.uid===g,a,"user-mismatch"),da._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ci(a,"user-mismatch"),c}}async function RT(s,t,i=!1){if(pi(s.app))return Promise.reject(Ss(s));const a="signIn",o=await xT(s,a,t),c=await da._fromIdTokenResponse(s,a,o);return i||await s._updateCurrentUser(c.user),c}async function MR(s,t){return RT(pa(s),t)}async function CT(s){const t=pa(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function VR(s,t,i){if(pi(s.app))return Promise.reject(Ss(s));const a=pa(s),f=await ym(a,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NR).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&CT(s),_}),g=await da._fromIdTokenResponse(a,"signIn",f);return await a._updateCurrentUser(g.user),g}function kR(s,t,i){return pi(s.app)?Promise.reject(Ss(s)):MR(bn(s),xl.credential(t,i)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&CT(s),a})}function LR(s,t,i,a){return bn(s).onIdTokenChanged(t,i,a)}function PR(s,t,i){return bn(s).beforeAuthStateChanged(t,i)}function jR(s,t,i,a){return bn(s).onAuthStateChanged(t,i,a)}function UR(s){return bn(s).signOut()}const ch="__sak";class IT{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const zR=1e3,BR=10;class NT extends IT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ET(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),o=this.localCache[i];a!==o&&t(i,o,a)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,g,_)=>{this.notifyListeners(f,_)});return}const a=t.key;i?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(a);!i&&this.localCache[a]===f||this.notifyListeners(a,f)},c=this.storage.getItem(a);sR()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,BR):o()}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const o of Array.from(a))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:a}),!0)})},zR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}NT.type="LOCAL";const qR=NT;class DT extends IT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}DT.type="SESSION";const OT=DT;function HR(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class Oh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const a=new Oh(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:a,eventType:o,data:c}=i.data,f=this.handlersMap[o];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(f).map(async y=>y(i.origin,c)),_=await HR(g);i.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:_})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];function ug(s="",t=10){let i="";for(let a=0;a<t;a++)i+=Math.floor(Math.random()*10);return s+i}class GR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((g,_)=>{const y=ug("",20);o.port1.start();const S=setTimeout(()=>{_(new Error("unsupported_event"))},a);f={messageChannel:o,onMessage(A){const x=A;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(x.data.response);break;default:clearTimeout(S),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:i},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Ji(){return window}function FR(s){Ji().location.href=s}function MT(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function QR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $R(){return navigator?.serviceWorker?.controller||null}function KR(){return MT()?self:null}const VT="firebaseLocalStorageDb",YR=1,hh="firebaseLocalStorage",kT="fbase_key";class au{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Mh(s,t){return s.transaction([hh],t?"readwrite":"readonly").objectStore(hh)}function XR(){const s=indexedDB.deleteDatabase(VT);return new au(s).toPromise()}function _m(){const s=indexedDB.open(VT,YR);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(hh,{keyPath:kT})}catch(o){i(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(hh)?t(a):(a.close(),await XR(),t(await _m()))})})}async function av(s,t,i){const a=Mh(s,!0).put({[kT]:t,value:i});return new au(a).toPromise()}async function WR(s,t){const i=Mh(s,!1).get(t),a=await new au(i).toPromise();return a===void 0?null:a.value}function lv(s,t){const i=Mh(s,!0).delete(t);return new au(i).toPromise()}const ZR=800,JR=3;class LT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(t){let i=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(i++>JR)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(KR()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QR(),!this.activeServiceWorker)return;this.sender=new GR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$R()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await _m();return await av(t,ch,"1"),await lv(t,ch),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>av(a,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(a=>WR(a,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const c=Mh(o,!1).getAll();return new au(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(t.length!==0)for(const{fbase_key:o,value:c}of t)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const o of Array.from(a))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LT.type="LOCAL";const tC=LT;new iu(3e4,6e4);function eC(s,t){return t?bs(t):(Lt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class cg extends lg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fl(t,this._buildIdpRequest())}_linkToIdToken(t,i){return fl(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return fl(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function nC(s){return RT(s.auth,new cg(s),s.bypassAuthState)}function iC(s){const{auth:t,user:i}=s;return Lt(i,t,"internal-error"),OR(i,new cg(s),s.bypassAuthState)}async function sC(s){const{auth:t,user:i}=s;return Lt(i,t,"internal-error"),DR(i,new cg(s),s.bypassAuthState)}class PT{constructor(t,i,a,o,c=!1){this.auth=t,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:a,postBody:o,tenantId:c,error:f,type:g}=t;if(f){this.reject(f);return}const _={auth:this.auth,requestUri:i,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return nC;case"linkViaPopup":case"linkViaRedirect":return sC;case"reauthViaPopup":case"reauthViaRedirect":return iC;default:Ci(this.auth,"internal-error")}}resolve(t){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rC=new iu(2e3,1e4);class al extends PT{constructor(t,i,a,o,c){super(t,i,o,c),this.provider=a,this.authWindow=null,this.pollId=null,al.currentPopupAction&&al.currentPopupAction.cancel(),al.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Lt(t,this.auth,"internal-error"),t}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const t=ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,al.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,rC.get())};t()}}al.currentPopupAction=null;const aC="pendingRedirect",Gc=new Map;class lC extends PT{constructor(t,i,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let t=Gc.get(this.auth._key());if(!t){try{const a=await oC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(i){t=()=>Promise.reject(i)}Gc.set(this.auth._key(),t)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oC(s,t){const i=hC(t),a=cC(s);if(!await a._isAvailable())return!1;const o=await a._get(i)==="true";return await a._remove(i),o}function uC(s,t){Gc.set(s._key(),t)}function cC(s){return bs(s._redirectPersistence)}function hC(s){return Hc(aC,s.config.apiKey,s.name)}async function fC(s,t,i=!1){if(pi(s.app))return Promise.reject(Ss(s));const a=pa(s),o=eC(a,t),f=await new lC(a,o,i).execute();return f&&!i&&(delete f.user._redirectEventId,await a._persistUserIfCurrent(f.user),await a._setRedirectUser(null,t)),f}const dC=600*1e3;class mC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(i=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!gC(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!jT(t)){const a=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Zi(this.auth,a))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const a=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=dC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ov(t))}saveEventToCache(t){this.cachedEventUids.add(ov(t)),this.lastProcessedEventTime=Date.now()}}function ov(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function jT({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function gC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jT(s);default:return!1}}async function pC(s,t={}){return Dr(s,"GET","/v1/projects",t)}const yC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_C=/^https?/;async function vC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await pC(s);for(const i of t)try{if(EC(i))return}catch{}Ci(s,"unauthorized-domain")}function EC(s){const t=gm(),{protocol:i,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&a===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===a}if(!_C.test(i))return!1;if(yC.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const TC=new iu(3e4,6e4);function uv(){const s=Ji().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function bC(s){return new Promise((t,i)=>{function a(){uv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{uv(),i(Zi(s,"network-request-failed"))},timeout:TC.get()})}if(Ji().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Ji().gapi?.load)a();else{const o=dR("iframefcb");return Ji()[o]=()=>{gapi.load?a():i(Zi(s,"network-request-failed"))},bT(`${fR()}?onload=${o}`).catch(c=>i(c))}}).catch(t=>{throw Fc=null,t})}let Fc=null;function SC(s){return Fc=Fc||bC(s),Fc}const AC=new iu(5e3,15e3),wC="__/auth/iframe",xC="emulator/auth/iframe",RC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IC(s){const t=s.config;Lt(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?sg(t,xC):`https://${s.config.authDomain}/${wC}`,a={apiKey:t.apiKey,appName:s.name,v:Tl},o=CC.get(s.config.apiHost);o&&(a.eid=o);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${i}?${Xo(a).slice(1)}`}async function NC(s){const t=await SC(s),i=Ji().gapi;return Lt(i,s,"internal-error"),t.open({where:document.body,url:IC(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RC,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const f=Zi(s,"network-request-failed"),g=Ji().setTimeout(()=>{c(f)},AC.get());function _(){Ji().clearTimeout(g),o(a)}a.ping(_).then(_,()=>{c(f)})}))}const DC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OC=500,MC=600,VC="_blank",kC="http://localhost";class cv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LC(s,t,i,a=OC,o=MC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const _={...DC,width:a.toString(),height:o.toString(),top:c,left:f},y=Nn().toLowerCase();i&&(g=gT(y)?VC:i),dT(y)&&(t=t||kC,_.scrollbars="yes");const S=Object.entries(_).reduce((x,[q,Y])=>`${x}${q}=${Y},`,"");if(iR(y)&&g!=="_self")return PC(t||"",g),new cv(null);const A=window.open(t||"",g,S);Lt(A,s,"popup-blocked");try{A.focus()}catch{}return new cv(A)}function PC(s,t){const i=document.createElement("a");i.href=s,i.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}const jC="__/auth/handler",UC="emulator/auth/handler",zC=encodeURIComponent("fac");async function hv(s,t,i,a,o,c){Lt(s.config.authDomain,s,"auth-domain-config-required"),Lt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:a,v:Tl,eventId:o};if(t instanceof wT){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",iS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[S,A]of Object.entries({}))f[S]=A}if(t instanceof ru){const S=t.getScopes().filter(A=>A!=="");S.length>0&&(f.scopes=S.join(","))}s.tenantId&&(f.tid=s.tenantId);const g=f;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const _=await s._getAppCheckToken(),y=_?`#${zC}=${encodeURIComponent(_)}`:"";return`${BC(s)}?${Xo(g).slice(1)}${y}`}function BC({config:s}){return s.emulator?sg(s,UC):`https://${s.authDomain}/${jC}`}const Fd="webStorageSupport";class qC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OT,this._completeRedirectFn=fC,this._overrideRedirectResult=uC}async _openPopup(t,i,a,o){Rs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await hv(t,i,a,gm(),o);return LC(t,c,ug())}async _openRedirect(t,i,a,o){await this._originValidation(t);const c=await hv(t,i,a,gm(),o);return FR(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:o,promise:c}=this.eventManagers[i];return o?Promise.resolve(o):(Rs(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(t);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(t){const i=await NC(t),a=new mC(t);return i.register("authEvent",o=>(Lt(o?.authEvent,t,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=i,a}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Fd,{type:Fd},o=>{const c=o?.[0]?.[Fd];c!==void 0&&i(!!c),Ci(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=vC(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return ET()||mT()||ag()}}const HC=qC;var fv="@firebase/auth",dv="1.11.1";class GC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(a=>{t(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function FC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QC(s){dl(new oa("auth",(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=a.options;Lt(f&&!f.includes(":"),"invalid-api-key",{appName:a.name});const _={apiKey:f,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TT(s)},y=new uR(a,o,c,_);return vR(y,i),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,a)=>{t.getProvider("auth-internal").initialize()})),dl(new oa("auth-internal",t=>{const i=pa(t.getProvider("auth").getImmediate());return(a=>new GC(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(fv,dv,FC(s)),_r(fv,dv,"esm2020")}const $C=300,KC=Sv("authIdTokenMaxAge")||$C;let mv=null;const YC=s=>async t=>{const i=t&&await t.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>KC)return;const o=i?.token;mv!==o&&(mv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function XC(s=Iv()){const t=wm(s,"auth");if(t.isInitialized())return t.getImmediate();const i=_R(s,{popupRedirectResolver:HC,persistence:[tC,qR,OT]}),a=Sv("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const f=YC(c.toString());PR(i,f,()=>f(i.currentUser)),LR(i,g=>f(g))}}const o=Tv("auth");return o&&ER(i,`http://${o}`),i}function WC(){return document.getElementsByTagName("head")?.[0]??document}cR({loadJS(s){return new Promise((t,i)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=o=>{const c=Zi("internal-error");c.customData=o,i(c)},a.type="text/javascript",a.charset="UTF-8",WC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QC("Browser");const ZC={apiKey:"AIzaSyCSmJMPQVPFC6NBofoYoJZ-HH3q-Ix3cO4",authDomain:"citytraffic-e7196.firebaseapp.com",projectId:"citytraffic-e7196",storageBucket:"citytraffic-e7196.firebasestorage.app",messagingSenderId:"602906331470",appId:"1:602906331470:web:e0ec5f47a3c07260b7b61f"},UT=Cv(ZC),kc=_x(UT),fh=XC(UT),JC=1216,tI=768,gv=JC,pv=tI,vm={dark:{bgApp:"bg-slate-950",textMain:"text-slate-200",textDim:"text-slate-400",panelBg:"bg-slate-900",panelBorder:"border-slate-800",gridBg:"bg-slate-100/50",gridPattern:"radial-gradient(#cbd5e1 1px, transparent 1px)",sidebarBg:"bg-slate-900/95"},light:{bgApp:"bg-slate-100",textMain:"text-slate-800",textDim:"text-slate-500",panelBg:"bg-white",panelBorder:"border-slate-200",gridBg:"bg-white/80",gridPattern:"radial-gradient(#94a3b8 1px, transparent 1px)",sidebarBg:"bg-white/95"}},zT=[{type:"select",label:"Select",emoji:"",color:"from-blue-500 to-cyan-400"},{type:"road_menu",label:"Roads",emoji:"",color:"from-slate-500 to-slate-400"},{type:"decoration_menu",label:"Decor",emoji:"",color:"from-green-500 to-emerald-400"},{type:"random_menu",label:"Randomize",emoji:"",color:"from-violet-500 to-fuchsia-400"},{type:"car",label:"Car",emoji:"",color:"from-red-500 to-orange-400"},{type:"traffic_light",label:"Signal",emoji:"",color:"from-yellow-400 to-orange-500"},{type:"eraser",label:"Eraser",emoji:"",color:"from-pink-500 to-rose-400"}],BT=[{type:"road_straight_vertical",label:"Vertical",emoji:"",color:"from-gray-500 to-gray-400"},{type:"road_straight_horizontal",label:"Horizontal",emoji:"",color:"from-gray-500 to-gray-400"},{type:"road_intersection",label:"Intersect",emoji:"",color:"from-gray-600 to-gray-500"},{type:"road_multilane_vertical",label:"Multi-Lane Vert",emoji:"",color:"from-slate-600 to-slate-500"},{type:"road_multilane_horizontal",label:"Multi-Lane Horz",emoji:"",color:"from-slate-600 to-slate-500"},{type:"road_divider_vertical",label:"Divider Vert",emoji:"",color:"from-yellow-600 to-yellow-500"},{type:"road_divider_horizontal",label:"Divider Horz",emoji:"",color:"from-yellow-600 to-yellow-500"}],qT=[{type:"building",label:"Building",emoji:"",color:"from-indigo-500 to-purple-500"},{type:"tree",label:"Tree",emoji:"",color:"from-green-500 to-emerald-400"}],eI=[{type:"populate_cars",label:"Populate Now",emoji:"",color:"from-violet-500 to-indigo-500"},{type:"toggle_autospawn",label:"Auto Spawn",emoji:"",color:"from-fuchsia-500 to-pink-500"}],nI=s=>{let t=0;return s==="right"&&(t=90),s==="down"&&(t=180),s==="left"&&(t=270),E.jsxs("g",{transform:`translate(50,50) rotate(${t}) translate(-25,-30)`,children:[E.jsx("rect",{x:"2",y:"4",width:"50",height:"60",rx:"8",fill:"rgba(0,0,0,0.2)"}),E.jsx("rect",{x:"-4",y:"8",width:"8",height:"12",rx:"2",fill:"#333"}),E.jsx("rect",{x:"46",y:"8",width:"8",height:"12",rx:"2",fill:"#333"}),E.jsx("rect",{x:"-4",y:"40",width:"8",height:"12",rx:"2",fill:"#333"}),E.jsx("rect",{x:"46",y:"40",width:"8",height:"12",rx:"2",fill:"#333"}),E.jsx("rect",{x:"0",y:"0",width:"50",height:"60",rx:"8",fill:"#EF4444",stroke:"#991B1B",strokeWidth:"2"}),E.jsx("rect",{x:"5",y:"8",width:"40",height:"10",rx:"2",fill:"#93C5FD"}),E.jsx("rect",{x:"5",y:"42",width:"40",height:"8",rx:"2",fill:"#93C5FD"}),E.jsx("rect",{x:"6",y:"20",width:"38",height:"20",rx:"1",fill:"#F87171",opacity:"0.5"})]})},iI=s=>{const t={green:"#22c55e",yellow:"#eab308",red:"#ef4444",off:"#374151"},i=s||"green";return E.jsxs("g",{transform:"translate(55, 20) scale(0.35)",children:[E.jsx("line",{x1:"25",y1:"0",x2:"25",y2:"-15",stroke:"#374151",strokeWidth:"6"}),E.jsx("rect",{x:"0",y:"0",width:"50",height:"130",rx:"10",fill:"#1f2937",stroke:"#4b5563",strokeWidth:"4",className:"shadow-sm"}),E.jsx("circle",{cx:"25",cy:"25",r:"15",fill:i==="red"?t.red:t.off}),E.jsx("circle",{cx:"25",cy:"65",r:"15",fill:i==="yellow"?t.yellow:t.off}),E.jsx("circle",{cx:"25",cy:"105",r:"15",fill:i==="green"?t.green:t.off})]})},sI=s=>{let t={x1:10,y1:90,x2:90,y2:90};return s==="top"?t={x1:10,y1:10,x2:90,y2:10}:s==="bottom"?t={x1:10,y1:90,x2:90,y2:90}:s==="left"?t={x1:10,y1:10,x2:10,y2:90}:s==="right"&&(t={x1:90,y1:10,x2:90,y2:90}),E.jsx("g",{children:E.jsx("line",{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stroke:"white",strokeWidth:"6",opacity:"0.6",strokeDasharray:"10,5"})})},rI=()=>E.jsxs("g",{transform:"translate(50, 85)",children:[E.jsx("ellipse",{cx:"0",cy:"0",rx:"25",ry:"10",fill:"rgba(0,0,0,0.2)"}),E.jsx("rect",{x:"-6",y:"-30",width:"12",height:"30",fill:"#78350f"}),E.jsxs("g",{transform:"translate(0, -35)",children:[E.jsx("circle",{cx:"0",cy:"0",r:"25",fill:"#15803d"}),E.jsx("circle",{cx:"-12",cy:"-10",r:"20",fill:"#16a34a"}),E.jsx("circle",{cx:"12",cy:"-10",r:"20",fill:"#16a34a"}),E.jsx("circle",{cx:"0",cy:"-25",r:"18",fill:"#22c55e"})]})]}),aI=()=>E.jsxs("g",{children:[E.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"4",fill:"rgba(0,0,0,0.2)"}),E.jsx("rect",{x:"10",y:"5",width:"80",height:"85",rx:"4",fill:"#64748b",stroke:"#334155",strokeWidth:"3"}),E.jsx("rect",{x:"15",y:"10",width:"70",height:"70",fill:"#f1f5f9"}),E.jsx("rect",{x:"20",y:"15",width:"25",height:"25",fill:"#93c5fd"}),E.jsx("rect",{x:"55",y:"15",width:"25",height:"25",fill:"#93c5fd"}),E.jsx("rect",{x:"20",y:"50",width:"25",height:"25",fill:"#93c5fd"}),E.jsx("rect",{x:"55",y:"50",width:"25",height:"25",fill:"#93c5fd"})]}),HT=s=>{if(Array.isArray(s))return E.jsx(E.Fragment,{children:s.map((a,o)=>E.jsx(cr.Fragment,{children:HT(a)},o))});let t=null,i=0;if(!s||typeof s!="string")return null;if(s==="up"||s==="down"||s==="left"||s==="right")s==="right"?i=90:s==="down"?i=180:s==="left"&&(i=270),t=E.jsxs(E.Fragment,{children:[E.jsx("path",{d:"M0 -15 L10 5 L-10 5 Z",fill:"white"}),E.jsx("rect",{x:"-4",y:"5",width:"8",height:"15",fill:"white"})]});else if(s.startsWith("turn_")){const a=s.split("_"),o=a[1],c=a[2];let f="",g="";o==="up"&&c==="right"?(f="M 0 35 Q 0 0 35 0",g="M 35 0 L 25 -5 L 25 5 Z",i=0):o==="left"&&c==="up"?(f="M -35 0 Q 0 0 0 -35",g="M 0 -35 L -5 -25 L 5 -25 Z",i=0):o==="down"&&c==="left"?(f="M 0 -35 Q 0 0 -35 0",g="M -35 0 L -25 -5 L -25 5 Z",i=0):o==="right"&&c==="down"?(f="M 35 0 Q 0 0 0 35",g="M 0 35 L -5 25 L 5 25 Z",i=0):o==="up"&&c==="left"?(f="M 0 35 Q 0 0 -35 0",g="M -35 0 L -25 -5 L -25 5 Z",i=0):o==="left"&&c==="down"?(f="M -35 0 Q 0 0 0 35",g="M 0 35 L -5 25 L 5 25 Z",i=0):o==="down"&&c==="right"?(f="M 0 -35 Q 0 0 35 0",g="M 35 0 L 25 -5 L 25 5 Z",i=0):o==="right"&&c==="up"&&(f="M 35 0 Q 0 0 0 -35",g="M 0 -35 L -5 -25 L 5 -25 Z",i=0),t=E.jsxs(E.Fragment,{children:[E.jsx("path",{d:f,fill:"none",stroke:"white",strokeWidth:"8",strokeLinecap:"round"}),E.jsx("path",{d:g,fill:"white"})]})}return E.jsx("g",{transform:`translate(50,50) rotate(${i})`,opacity:"0.9",style:{pointerEvents:"none"},children:t})},lI=(s,t)=>{const i=s?.type,a=s?.hasCar,o=s?.flowDirection,c=s?.stopMarker,f=[];if(i){if(i==="tree")f.push(E.jsx(cr.Fragment,{children:rI()},"tree"));else if(i==="building")f.push(E.jsx(cr.Fragment,{children:aI()},"building"));else if(!i.startsWith("road_")&&i!=="traffic_light"){const g=zT.find(_=>_.type===i)||BT.find(_=>_.type===i)||qT.find(_=>_.type===i);g&&f.push(E.jsx("foreignObject",{x:"0",y:"0",width:"100",height:"100",children:E.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl drop-shadow-md",children:g.emoji})},"base"))}else if(i.startsWith("road_")||i==="traffic_light"){const g="#334155",S=i==="traffic_light"?"road_intersection":i;if(S==="road_divider_vertical"){const A=s.lanePosition||0;f.push(E.jsx("line",{x1:50,y1:-1,x2:50,y2:101,stroke:g,strokeWidth:80},"bg-road"));const x=A===0?100:0;f.push(E.jsx("line",{x1:x,y1:0,x2:x,y2:100,stroke:"#FACC15",strokeWidth:"6"},"divider-line"))}else if(S==="road_divider_horizontal"){const A=s.lanePosition||0;f.push(E.jsx("line",{x1:-1,y1:50,x2:101,y2:50,stroke:g,strokeWidth:80},"bg-road"));const x=A===0?100:0;f.push(E.jsx("line",{x1:0,y1:x,x2:100,y2:x,stroke:"#FACC15",strokeWidth:"6"},"divider-line"))}else if(S==="road_multilane_vertical"){const A=s.lanePosition||0,x=s.laneCount||2;f.push(E.jsx("line",{x1:50,y1:-1,x2:50,y2:101,stroke:g,strokeWidth:80},"bg-road")),A>0&&f.push(E.jsx("line",{x1:0,y1:0,x2:0,y2:100,stroke:"white",strokeWidth:"6",strokeDasharray:"12,12"},"dl1")),A<x-1&&f.push(E.jsx("line",{x1:100,y1:0,x2:100,y2:100,stroke:"white",strokeWidth:"6",strokeDasharray:"12,12"},"dl2"))}else if(S==="road_multilane_horizontal"){const A=s.lanePosition||0,x=s.laneCount||2;f.push(E.jsx("line",{x1:-1,y1:50,x2:101,y2:50,stroke:g,strokeWidth:80},"bg-road")),A>0&&f.push(E.jsx("line",{x1:0,y1:0,x2:100,y2:0,stroke:"white",strokeWidth:"6",strokeDasharray:"12,12"},"dt1")),A<x-1&&f.push(E.jsx("line",{x1:0,y1:100,x2:100,y2:100,stroke:"white",strokeWidth:"6",strokeDasharray:"12,12"},"dt2"))}else if(S==="road_intersection"){const{up:A,down:x,left:q,right:Y}=t;A&&f.push(E.jsx("line",{x1:50,y1:50,x2:50,y2:-1,stroke:g,strokeWidth:80},"up")),x&&f.push(E.jsx("line",{x1:50,y1:50,x2:50,y2:101,stroke:g,strokeWidth:80},"down")),q&&f.push(E.jsx("line",{x1:50,y1:50,x2:-1,y2:50,stroke:g,strokeWidth:80},"left")),Y&&f.push(E.jsx("line",{x1:50,y1:50,x2:101,y2:50,stroke:g,strokeWidth:80},"right")),A&&Y&&f.push(E.jsx("rect",{x:50,y:0,width:50,height:50,fill:g},"corn-tr")),Y&&x&&f.push(E.jsx("rect",{x:50,y:50,width:50,height:50,fill:g},"corn-br")),x&&q&&f.push(E.jsx("rect",{x:0,y:50,width:50,height:50,fill:g},"corn-bl")),q&&A&&f.push(E.jsx("rect",{x:0,y:0,width:50,height:50,fill:g},"corn-tl")),A||x||q||Y?f.push(E.jsx("rect",{x:50-80/2,y:50-80/2,width:80,height:80,fill:g},"center")):f.push(E.jsx("circle",{cx:50,cy:50,r:80/2,fill:g},"dot"))}else S==="road_straight_vertical"?f.push(E.jsx("line",{x1:50,y1:-1,x2:50,y2:101,stroke:g,strokeWidth:80},"vertical")):S==="road_straight_horizontal"&&f.push(E.jsx("line",{x1:-1,y1:50,x2:101,y2:50,stroke:g,strokeWidth:80},"horizontal"));o&&f.push(E.jsx(cr.Fragment,{children:HT(o)},"flow"))}}return(s?.hasTrafficLight||s?.type==="traffic_light")&&f.push(E.jsx(cr.Fragment,{children:iI(s.lightState||s.state)},"traffic_light_overlay")),c&&f.push(E.jsx(cr.Fragment,{children:sI(c.side)},"stop_marker")),a&&f.push(E.jsx(cr.Fragment,{children:nI(a)},"car")),E.jsx("svg",{className:"w-full h-full",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:f})},oI=cr.memo(({cellData:s,row:t,col:i,onDrop:a,onPaint:o,onRightClick:c,cellWidth:f,cellHeight:g,neighborInfo:_,isSelected:y})=>{const S=Y=>{Y.preventDefault(),a(t,i,Y.dataTransfer.getData("itemType"))},A=Y=>{Y.button===0&&o(t,i)},x=Y=>{Y.buttons===1&&o(t,i)},q=Y=>{Y.preventDefault(),c(t,i)};return E.jsx("div",{style:{position:"absolute",left:`${i*f}px`,top:`${t*g}px`,width:`${f}px`,height:`${g}px`},onDragOver:Y=>Y.preventDefault(),onDrop:S,onMouseDown:A,onMouseEnter:x,onContextMenu:q,className:`flex items-center justify-center cursor-pointer transition-colors duration-75 ${y?"ring-2 ring-yellow-400 bg-white/10 z-10":"hover:bg-white/5"}`,children:lI(s,_)})}),uI=({grid:s,rows:t,cols:i,onDrop:a,onPaint:o,setIsMouseDown:c,onRightClick:f,selectedCell:g,theme:_="dark"})=>{if(!s)return E.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"Loading Grid..."});const y=gv/i,S=pv/t,A=vm?.[_]||vm.dark,x=A.gridBg||"bg-slate-100/50",q=A.gridPattern||"radial-gradient(#cbd5e1 1px, transparent 1px)",Y=(ct,rt)=>ct>=0&&ct<t&&rt>=0&&rt<i&&s[ct]&&s[ct][rt]&&(s[ct][rt].type==="road_straight_vertical"||s[ct][rt].type==="road_multilane_vertical"||s[ct][rt].type==="road_divider_vertical"),at=(ct,rt)=>ct>=0&&ct<t&&rt>=0&&rt<i&&s[ct]&&s[ct][rt]&&(s[ct][rt].type==="road_straight_horizontal"||s[ct][rt].type==="road_multilane_horizontal"||s[ct][rt].type==="road_divider_horizontal"),nt=(ct,rt)=>ct>=0&&ct<t&&rt>=0&&rt<i&&s[ct]&&s[ct][rt]&&s[ct][rt].type==="road_intersection";return E.jsx("div",{onMouseDown:()=>c(!0),onMouseUp:()=>c(!1),onMouseLeave:()=>c(!1),className:`relative shadow-2xl rounded-sm overflow-hidden flex-shrink-0 transition-colors duration-300 ${x}`,style:{userSelect:"none",width:`${gv}px`,height:`${pv}px`,backgroundImage:q,backgroundSize:`${y}px ${S}px`},children:s.flatMap((ct,rt)=>ct.map((_t,wt)=>{const Qt=_t?.type||null;let mt={up:!1,down:!1,left:!1,right:!1};return Qt==="road_intersection"?mt={up:Y(rt-1,wt)||nt(rt-1,wt),down:Y(rt+1,wt)||nt(rt+1,wt),left:at(rt,wt-1)||nt(rt,wt-1),right:at(rt,wt+1)||nt(rt,wt+1)}:Qt&&Qt.includes("vertical")?mt={up:Y(rt-1,wt)||nt(rt-1,wt),down:Y(rt+1,wt)||nt(rt+1,wt),left:!1,right:!1}:Qt&&Qt.includes("horizontal")&&(mt={up:!1,down:!1,left:at(rt,wt-1)||nt(rt,wt-1),right:at(rt,wt+1)||nt(rt,wt+1)}),E.jsx(oI,{cellData:_t,neighborInfo:mt,row:rt,col:wt,onDrop:a,onPaint:o,onRightClick:f,cellWidth:y,cellHeight:S,isSelected:g&&g.row===rt&&g.col===wt},`${rt}-${wt}`)}))})},cI=({item:s,isSelected:t,onClick:i,theme:a="dark"})=>{const o=f=>{f.dataTransfer.setData("itemType",s.type)},c=a==="dark";return E.jsxs("div",{draggable:!0,onDragStart:o,onClick:i,className:`relative group aspect-square rounded-2xl flex flex-col items-center justify-center cursor-pointer transition-all duration-300 transform hover:-translate-y-1 border ${t?c?"bg-slate-700 ring-2 ring-blue-500 shadow-lg shadow-blue-500/20 border-transparent":"bg-blue-50 ring-2 ring-blue-500 shadow-lg shadow-blue-500/20 border-transparent":c?"bg-slate-800 hover:bg-slate-700 border-slate-700":"bg-white hover:bg-slate-50 border-slate-200 shadow-sm"}`,children:[E.jsx("div",{className:`absolute inset-2 rounded-xl opacity-20 bg-gradient-to-br ${s.color}`}),E.jsx("span",{className:"text-3xl z-10 drop-shadow-sm filter",children:s.emoji}),E.jsx("span",{className:`text-[10px] font-medium mt-2 z-10 uppercase tracking-wide transition-colors ${t?c?"text-white":"text-blue-700":c?"text-slate-400 group-hover:text-slate-200":"text-slate-500 group-hover:text-slate-700"}`,children:s.label})]})},hI=()=>{const[s,t]=zt.useState(!1),[i,a]=zt.useState(""),[o,c]=zt.useState(""),[f,g]=zt.useState(null),_=async y=>{y.preventDefault(),g(null);try{s?await VR(fh,i,o):await kR(fh,i,o)}catch(S){console.error(S),S.code==="auth/invalid-credential"?g("Invalid email or password."):S.code==="auth/email-already-in-use"?g("Email already in use."):S.code==="auth/weak-password"?g("Password should be at least 6 characters."):g("Authentication failed. Try again.")}};return E.jsx("div",{className:"flex h-screen w-screen bg-slate-950 items-center justify-center font-sans",children:E.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-2xl shadow-2xl max-w-md w-full text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-xl mx-auto flex items-center justify-center text-4xl shadow-lg shadow-blue-500/20 mb-6",children:""}),E.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["CityBuilder",E.jsx("span",{className:"text-blue-400 font-light",children:"Pro"})]}),E.jsx("p",{className:"text-slate-400 mb-8",children:s?"Create an account to save cities.":"Sign in to load your layouts."}),f&&E.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 text-sm p-3 rounded-lg mb-4",children:f}),E.jsxs("form",{onSubmit:_,className:"space-y-4 text-left",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase ml-1",children:"Email"}),E.jsx("input",{type:"email",value:i,onChange:y=>a(y.target.value),placeholder:"name@example.com",className:"w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase ml-1",children:"Password"}),E.jsx("input",{type:"password",value:o,onChange:y=>c(y.target.value),placeholder:"",className:"w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all",required:!0})]}),E.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-900/20 mt-2",children:s?"Sign Up":"Sign In"})]}),E.jsx("div",{className:"mt-6 pt-6 border-t border-slate-800",children:E.jsxs("p",{className:"text-slate-400 text-sm",children:[s?"Already have an account?":"Don't have an account?",E.jsx("button",{onClick:()=>{t(!s),g(null)},className:"ml-2 text-blue-400 hover:text-blue-300 font-medium transition-colors",children:s?"Log In":"Register"})]})})]})})},fI=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),E.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),E.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),hg=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),dI=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M3 7v6h6"}),E.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),mI=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M21 7v6h-6"}),E.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]}),GT=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("polyline",{points:"3 6 5 6 21 6"}),E.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Em=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),E.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),E.jsx("polyline",{points:"7 3 7 8 15 8"})]}),Tm=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:E.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),gI=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),E.jsx("polyline",{points:"12 19 5 12 12 5"})]}),pI=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),E.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),yI=({user:s,onClose:t,theme:i="dark",setTheme:a,gridMultiplier:o=1,onResizeGrid:c})=>{const[f,g]=zt.useState("profile"),[_,y]=zt.useState(""),[S,A]=zt.useState(""),[x,q]=zt.useState(!1),[Y,at]=zt.useState({type:null,message:null});zt.useEffect(()=>{at({type:null,message:null}),y(""),A("")},[f]);const nt=async _t=>{_t.preventDefault()},ct=async()=>{},rt=async()=>{try{await UR(fh),t()}catch(_t){console.error("Error signing out:",_t)}};return E.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:E.jsxs("div",{className:`border rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col max-h-[90vh] transition-colors duration-300 ${i==="light"?"bg-white border-slate-200":"bg-slate-900 border-slate-700"}`,children:[E.jsxs("div",{className:`p-4 border-b flex justify-between items-center transition-colors duration-300 ${i==="light"?"border-slate-100 bg-slate-50":"border-slate-800 bg-slate-800/50"}`,children:[E.jsxs("h2",{className:`text-lg font-bold flex items-center gap-2 ${i==="light"?"text-slate-900":"text-white"}`,children:[E.jsx("div",{className:"p-1.5 bg-blue-500/20 rounded-lg text-blue-500",children:E.jsx(pI,{})}),"Settings & Account"]}),E.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-colors duration-200 ${i==="light"?"bg-slate-200 text-slate-700 hover:bg-slate-300 hover:text-slate-900":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:E.jsx(hg,{})})]}),E.jsx("div",{className:`flex border-b transition-colors duration-300 ${i==="light"?"border-slate-100":"border-slate-800"}`,children:["profile","settings","security"].map(_t=>E.jsxs("button",{onClick:()=>g(_t),className:`flex-1 py-3 text-sm font-medium transition-colors relative capitalize ${f===_t?"text-blue-500 bg-blue-500/5":i==="light"?"bg-slate-50 text-slate-600 hover:bg-slate-100 hover:text-slate-900":"text-slate-400 hover:text-slate-200 hover:bg-slate-800/50"}`,children:[_t,f===_t&&E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500"})]},_t))}),E.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar min-h-[300px]",children:[Y.message&&E.jsxs("div",{className:`mb-6 p-3 rounded-lg border text-xs font-medium flex items-center gap-2 ${Y.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":"bg-red-500/10 border-red-500/20 text-red-500"}`,children:[E.jsx("span",{children:Y.type==="success"?"":""}),Y.message]}),f==="profile"&&E.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[E.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border transition-colors duration-300 ${i==="light"?"bg-slate-50 border-slate-200":"bg-slate-800 border-slate-700"}`,children:[E.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-xl font-bold text-white shadow-lg",children:s.email?s.email[0].toUpperCase():"U"}),E.jsxs("div",{className:"min-w-0",children:[E.jsx("div",{className:`font-bold truncate text-sm ${i==="light"?"text-slate-900":"text-white"}`,children:s.email}),E.jsxs("div",{className:`text-[10px] font-mono truncate max-w-[200px] mt-0.5 ${i==="light"?"text-slate-500":"text-slate-400"}`,children:["ID: ",s.uid]})]})]}),E.jsxs("div",{className:`p-5 rounded-xl border transition-colors duration-300 ${i==="light"?"bg-white border-slate-200 shadow-sm":"bg-slate-800 border-slate-700"}`,children:[E.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[E.jsx("div",{className:`p-2 rounded text-lg ${i==="light"?"bg-slate-100":"bg-slate-950"}`,children:""}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-bold text-sm ${i==="light"?"text-slate-900":"text-white"}`,children:"Update Email"}),E.jsx("p",{className:`text-[10px] ${i==="light"?"text-slate-500":"text-slate-400"}`,children:"Confirmation required."})]})]}),E.jsxs("form",{onSubmit:nt,className:"space-y-3",children:[E.jsx("input",{type:"email",value:_,onChange:_t=>y(_t.target.value),placeholder:"New Email Address",className:`w-full border rounded-lg p-2.5 text-sm placeholder-slate-500 focus:ring-1 focus:ring-blue-500 outline-none ${i==="light"?"bg-slate-50 border-slate-200 text-slate-900":"bg-slate-950 border-slate-700 text-white"}`}),E.jsx("input",{type:"password",value:S,onChange:_t=>A(_t.target.value),placeholder:"Current Password",className:`w-full border rounded-lg p-2.5 text-sm placeholder-slate-500 focus:ring-1 focus:ring-blue-500 outline-none ${i==="light"?"bg-slate-50 border-slate-200 text-slate-900":"bg-slate-950 border-slate-700 text-white"}`}),E.jsx("button",{type:"submit",disabled:x,className:"w-full py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 text-white rounded-lg font-bold text-xs shadow-lg shadow-blue-500/20",children:x?"Sending...":"Send Verification Link"})]})]}),E.jsx("div",{className:`pt-2 border-t ${i==="light"?"border-slate-200":"border-slate-800"}`,children:E.jsx("button",{onClick:rt,className:"w-full py-3 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2",children:"Sign Out"})})]}),f==="settings"&&E.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[E.jsxs("div",{className:`p-5 rounded-xl border transition-colors duration-300 ${i==="light"?"bg-white border-slate-200 shadow-sm":"bg-slate-800 border-slate-700"}`,children:[E.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[E.jsx("div",{className:`p-2 rounded text-lg ${i==="light"?"bg-slate-100":"bg-slate-950"}`,children:""}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-bold text-sm ${i==="light"?"text-slate-900":"text-white"}`,children:"Visual Theme"}),E.jsx("p",{className:`text-[10px] ${i==="light"?"text-slate-500":"text-slate-400"}`,children:"Toggle between light and dark mode."})]})]}),E.jsxs("div",{className:`flex gap-2 p-1 rounded-lg ${i==="light"?"bg-slate-100":"bg-slate-950"}`,children:[E.jsx("button",{onClick:()=>a&&a("light"),className:`flex-1 py-2 rounded-md text-xs font-bold transition-all ${i==="light"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-500"}`,children:" Light"}),E.jsx("button",{onClick:()=>a&&a("dark"),className:`flex-1 py-2 rounded-md text-xs font-bold transition-all ${i==="dark"?"bg-slate-700 text-blue-400 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:" Dark"})]})]}),E.jsxs("div",{className:`p-5 rounded-xl border transition-colors duration-300 ${i==="light"?"bg-white border-slate-200 shadow-sm":"bg-slate-800 border-slate-700"}`,children:[E.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[E.jsx("div",{className:`p-2 rounded text-lg ${i==="light"?"bg-slate-100":"bg-slate-950"}`,children:""}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-bold text-sm ${i==="light"?"text-slate-900":"text-white"}`,children:"Grid Size"}),E.jsxs("p",{className:`text-[10px] ${i==="light"?"text-slate-500":"text-slate-400"}`,children:["Change the number of tiles (Resolution).",E.jsx("br",{}),E.jsx("span",{className:"text-orange-500",children:"Note: Reducing size crops the grid."})]})]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("span",{className:`text-xs font-mono ${i==="light"?"text-slate-500":"text-slate-400"}`,children:"Small"}),E.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.25",value:o,onChange:_t=>c&&c(parseFloat(_t.target.value)),className:`flex-1 h-1 rounded-lg appearance-none cursor-pointer accent-blue-500 ${i==="light"?"bg-slate-300":"bg-slate-600"}`}),E.jsx("span",{className:`text-xs font-mono ${i==="light"?"text-slate-500":"text-slate-400"}`,children:"Large"})]}),E.jsxs("div",{className:`text-center mt-2 text-xs font-mono font-bold ${i==="light"?"text-blue-600":"text-blue-400"}`,children:[Math.round(16*o)," x"," ",Math.round(25*o)," Tiles"]})]})]}),f==="security"&&E.jsx("div",{className:"space-y-6 animate-fadeIn",children:E.jsxs("div",{className:`p-5 rounded-xl border transition-colors duration-300 ${i==="light"?"bg-white border-slate-200 shadow-sm":"bg-slate-800 border-slate-700"}`,children:[E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:`p-2 rounded text-lg ${i==="light"?"bg-slate-100":"bg-slate-950"}`,children:""}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-bold text-sm ${i==="light"?"text-slate-900":"text-white"}`,children:"Reset Password"}),E.jsxs("p",{className:`text-[10px] mt-1 ${i==="light"?"text-slate-500":"text-slate-400"}`,children:["Link sent to ",s.email]})]})]}),E.jsx("button",{onClick:ct,disabled:x,className:`mt-4 w-full py-2 border rounded-lg font-medium text-xs transition-all ${i==="light"?"bg-slate-50 hover:bg-slate-100 text-slate-700 border-slate-300":"bg-slate-700 hover:bg-slate-600 text-white border-slate-600"}`,children:x?"Sending...":"Send Password Reset Email"})]})})]})]})})},yv=({mode:s,onClose:t,grid:i,rows:a,cols:o,onLoadLayout:c,currentLayoutId:f,setCurrentLayoutId:g,user:_,theme:y="dark"})=>{const[S,A]=zt.useState(""),[x,q]=zt.useState([]),[Y,at]=zt.useState(!1),[nt,ct]=zt.useState(null);zt.useEffect(()=>{s==="load"&&rt()},[s]);const rt=async()=>{at(!0);try{const mt=Q_(kc,"users",_.uid,"layouts"),N=await Mx(mt);q(N.docs.map(w=>({id:w.id,...w.data()})))}catch(mt){console.error(mt),ct("Error connecting to Firebase.")}at(!1)},_t=async()=>{if(S.trim())try{const mt=Q_(kc,"users",_.uid,"layouts");await Lx(mt,{name:S,rows:a,cols:o,grid_data:JSON.stringify(i),created_at:new Date().toISOString()}),t(),alert("Saved as new layout!")}catch(mt){console.error(mt),ct("Error saving to Firebase.")}},wt=async()=>{if(f)try{const mt=dm(kc,"users",_.uid,"layouts",f);await Vx(mt,{rows:a,cols:o,grid_data:JSON.stringify(i),updated_at:new Date().toISOString()}),t(),alert("Layout overwritten successfully!")}catch(mt){console.error(mt),ct("Overwrite failed.")}},Qt=async mt=>{if(confirm("Delete this layout?"))try{await kx(dm(kc,"users",_.uid,"layouts",mt)),q(N=>N.filter(w=>w.id!==mt)),mt===f&&g(null)}catch(N){console.error(N),ct("Delete failed.")}};return E.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:E.jsxs("div",{className:`border rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col max-h-[80vh] transition-colors duration-300 ${y==="light"?"bg-white border-slate-200":"bg-slate-900 border-slate-700"}`,children:[E.jsxs("div",{className:`p-4 border-b flex justify-between items-center transition-colors duration-300 ${y==="light"?"border-slate-100 bg-slate-50":"border-slate-800 bg-slate-800/50"}`,children:[E.jsx("h2",{className:`text-lg font-bold flex items-center gap-2 ${y==="light"?"text-slate-900":"text-white"}`,children:s==="save"?E.jsxs(E.Fragment,{children:[E.jsx(Em,{})," Save Layout"]}):E.jsxs(E.Fragment,{children:[E.jsx(Tm,{})," Load Layout"]})}),E.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-colors duration-200 ${y==="light"?"bg-slate-200 text-slate-700 hover:bg-slate-300 hover:text-slate-900":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:E.jsx(hg,{})})]}),E.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[nt&&E.jsx("div",{className:"mb-4 p-2 bg-red-900/30 border border-red-500/30 text-red-300 rounded text-sm text-center",children:nt}),s==="save"?E.jsxs("div",{className:"space-y-6",children:[f&&E.jsxs("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[E.jsx("div",{className:"text-xs font-bold text-emerald-500 uppercase mb-2",children:"Current Layout Loaded"}),E.jsxs("button",{onClick:wt,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-bold transition-all shadow-lg shadow-emerald-900/20 flex justify-center items-center gap-2",children:[E.jsx(Em,{})," Overwrite Save"]})]}),f&&E.jsxs("div",{className:`flex items-center gap-2 text-xs uppercase font-bold ${y==="light"?"text-slate-500":"text-slate-400"}`,children:[E.jsx("div",{className:`h-px flex-1 ${y==="light"?"bg-slate-200":"bg-slate-700"}`}),"OR",E.jsx("div",{className:`h-px flex-1 ${y==="light"?"bg-slate-200":"bg-slate-700"}`})]}),E.jsxs("div",{children:[E.jsx("label",{className:`block text-xs font-bold uppercase mb-1 ${y==="light"?"text-slate-500":"text-slate-400"}`,children:f?"Save as New Layout":"Layout Name"}),E.jsx("input",{type:"text",value:S,onChange:mt=>A(mt.target.value),placeholder:"My New City",className:`w-full border rounded-lg p-3 focus:ring-2 focus:ring-blue-500 outline-none mb-3 ${y==="light"?"bg-slate-50 border-slate-200 text-slate-900":"bg-slate-800 border-slate-700 text-white"}`,autoFocus:!f}),E.jsx("button",{onClick:_t,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold transition-all shadow-lg shadow-blue-500/20",children:f?"Save Copy":"Save Layout"})]})]}):E.jsx("div",{className:"space-y-3",children:Y?E.jsx("div",{className:`text-center py-4 ${y==="light"?"text-slate-500":"text-slate-400"}`,children:"Loading..."}):x.length===0?E.jsx("div",{className:`text-center py-4 ${y==="light"?"text-slate-500":"text-slate-400"}`,children:"No saved layouts found."}):x.map(mt=>E.jsxs("div",{className:`group flex justify-between items-center p-3 rounded-lg border transition-all ${f===mt.id?"bg-blue-500/10 border-blue-500/50":y==="light"?"bg-white border-slate-200 hover:border-blue-500/50 hover:bg-slate-50":"bg-slate-800 border-slate-700 hover:border-blue-500/50 hover:bg-slate-750"}`,children:[E.jsxs("div",{className:"min-w-0",children:[E.jsxs("div",{className:`font-bold truncate ${y==="light"?"text-slate-900":"text-white"}`,children:[mt.name,f===mt.id&&E.jsx("span",{className:"ml-2 text-[10px] text-blue-500 uppercase tracking-wider",children:"(Active)"})]}),E.jsxs("div",{className:`text-[10px] ${y==="light"?"text-slate-500":"text-slate-400"}`,children:[mt.created_at?new Date(mt.created_at).toLocaleDateString():"Unknown Date"," "," ",mt.rows,"x",mt.cols]})]}),E.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[E.jsx("button",{onClick:()=>{c(mt.grid_data,mt.rows,mt.cols,mt.id),t()},className:"p-2 bg-blue-500/10 text-blue-500 hover:bg-blue-600 hover:text-white rounded transition-colors",title:"Load",children:E.jsx(Tm,{})}),E.jsx("button",{onClick:()=>Qt(mt.id),className:"p-2 bg-red-500/10 text-red-500 hover:bg-red-600 hover:text-white rounded transition-colors",title:"Delete",children:E.jsx(GT,{})})]})]},mt.id))})]})]})})},Co=(s,t)=>Array.from({length:s},()=>Array(t).fill(null));function _I(){const[s,t]=zt.useState(null),[i,a]=zt.useState(!0),[o,c]=zt.useState(16),[f,g]=zt.useState(25),[_,y]=zt.useState(1),[S,A]=zt.useState([Co(16,25)]),[x,q]=zt.useState(0),[Y,at]=zt.useState("select"),[nt,ct]=zt.useState(!1),[rt,_t]=zt.useState("main"),[wt,Qt]=zt.useState(!1),[mt,N]=zt.useState(null),[w,C]=zt.useState(!0),[D,O]=zt.useState(null),[L,R]=zt.useState(null),[ue,ze]=zt.useState(2),[F,ot]=zt.useState(null),[xt,Xt]=zt.useState(null),[se,V]=zt.useState(!1),[$,dt]=zt.useState(5),[J,jt]=zt.useState("dark"),Vt=zt.useRef(0),$t=zt.useRef({history:[Co(16,25)],step:0}),Le=zt.useRef(0),gt=vm?.[J]||{bgApp:"bg-slate-950",textMain:"text-slate-200",textDim:"text-slate-400",panelBg:"bg-slate-900",panelBorder:"border-slate-800",sidebarBg:"bg-slate-900/95"},mn=S&&S[x]?S[x]:Co(o,f);zt.useEffect(()=>{const P=jR(fh,tt=>{t(tt),a(!1)});return()=>P()},[]),zt.useEffect(()=>{wt||($t.current={history:S,step:x},Le.current=x)},[S,x,wt]);const Vn=(P,tt,lt)=>tt<0||tt>=P.length||lt<0||lt>=P[0].length?null:P[tt][lt];zt.useEffect(()=>{Xt(null)},[Y]);const Is=P=>{const pt=Math.round(16*P),Nt=Math.round(25*P);if(pt===o&&Nt===f)return;wt&&Qt(!1);const At=mn,it=Co(pt,Nt);for(let ht=0;ht<Math.min(o,pt);ht++)for(let X=0;X<Math.min(f,Nt);X++)At[ht][X]&&(it[ht][X]={...At[ht][X]});c(pt),g(Nt),y(P),A([it]),q(0),N(null)},Ns=()=>{A(P=>{const lt=P[x].map(Nt=>Nt.map(At=>At?{...At}:null));for(let Nt=0;Nt<o;Nt++)for(let At=0;At<f;At++){const it=lt[Nt][At];if(it&&it.type.startsWith("road")&&!it.hasCar&&Math.random()<.2){let ht="right";it.flowDirection&&!it.flowDirection.startsWith("turn")?ht=it.flowDirection:it.type.includes("vertical")?ht=Math.random()>.5?"up":"down":it.type.includes("horizontal")&&(ht=Math.random()>.5?"left":"right"),it.hasCar=ht,it.carConfig={speed:1,turnBias:"none"}}}const pt=[...P.slice(0,x+1),lt];return $t.current={history:pt,step:x+1},pt}),q(P=>P+1)};zt.useEffect(()=>{if(!wt)return;const P=100,tt=500,lt=setInterval(()=>{Vt.current+=1;const{history:pt,step:Nt}=$t.current,At=pt[Nt];if(!At){Qt(!1);return}const it=At.map(ft=>ft.map(Tt=>Tt?{...Tt}:null)),ht=new Set,X=(ft,Tt)=>{if(!ft||ft.hasCar||ft.type==="traffic_light"||!ft.type.startsWith("road"))return!1;const st=ft.flowDirection;if(st){if(Array.isArray(st))return st.includes(Tt);if(typeof st=="string")if(st.startsWith("turn_")){const Ut=st.split("_")[1];return Tt===Ut}else return st===Tt}return!0};for(let ft=0;ft<o;ft++)for(let Tt=0;Tt<f;Tt++){const st=it[ft][Tt];if(st&&st.isSpawner&&!st.hasCar){if(st.maxSpawnTick!==void 0&&st.maxSpawnTick!==null&&Vt.current>st.maxSpawnTick)continue;const Ut=st.spawnInterval||20,vt=st.lastSpawnTick||0;if(Vt.current-vt>=Ut){let St="right";const kt=st.flowDirection;kt?Array.isArray(kt)&&kt.length>0?St=kt[Math.floor(Math.random()*kt.length)]:typeof kt=="string"&&!kt.startsWith("turn")&&(St=kt):st.type.includes("vertical")?St="down":st.type.includes("horizontal")&&(St="right");const fe=st.spawnerTurnBiases||["none"],Oe=fe[Math.floor(Math.random()*fe.length)];st.hasCar=St,st.carConfig={speed:1,turnBias:Oe},st.movementProgress=Math.random()*200,st.lastSpawnTick=Vt.current}}}const xe=Math.max(3,33-$*3);if(se&&Vt.current%xe===0){let ft=0;const Tt=Math.max(3,Math.floor($/2)+3);for(;ft<Tt;){const st=Math.floor(Math.random()*o),Ut=Math.floor(Math.random()*f),vt=it[st][Ut];if(vt&&vt.type.startsWith("road")&&!vt.hasCar){let St="right";const kt=vt.flowDirection;kt?Array.isArray(kt)&&kt.length>0?St=kt[0]:typeof kt=="string"&&!kt.startsWith("turn")&&(St=kt):vt.type.includes("vertical")?St=Math.random()>.5?"up":"down":vt.type.includes("horizontal")&&(St=Math.random()>.5?"left":"right"),vt.hasCar=St,vt.carConfig={speed:1,turnBias:"none"},vt.movementProgress=Math.random()*400;break}ft++}}if(Vt.current%5===0)for(let ft=0;ft<o;ft++)for(let Tt=0;Tt<f;Tt++){let st=it[ft][Tt];if(st&&(st.type==="traffic_light"||st.hasTrafficLight)){const Ut=st.lightConfig||st.config||{green:10,yellow:4,red:10};!st.lightConfig&&!st.config&&(st.lightConfig=Ut);const vt=st.lightState||st.state||"green";!st.lightState&&!st.state&&(st.lightState=vt);let St=st.lightTimer!==void 0?st.lightTimer:st.timer||0;St+=1;const kt=Ut[vt];if(St>=kt){St=0;let fe=vt;vt==="green"?fe="yellow":vt==="yellow"?fe="red":vt==="red"&&(fe="green"),st.lightState=fe,st.state=fe}st.lightTimer=St,st.timer=St}}for(let ft=0;ft<o;ft++)for(let Tt=0;Tt<f;Tt++){let st=it[ft][Tt];if(!st||!st.hasCar||ht.has(`${ft},${Tt}`))continue;st.movementProgress===void 0&&(st.movementProgress=0);const Ut=st.carConfig?.speed||1;if(st.movementProgress+=Ut*P,st.movementProgress<tt)continue;let vt=st.hasCar;const St=st.flowDirection,kt=st.flowPriority;if(St)Array.isArray(St)?St.includes(vt)||St.length>0&&(vt=St[0]):St==="left"&&vt==="right"?vt="left":St==="right"&&vt==="left"?vt="right":St==="up"&&vt==="down"?vt="up":St==="down"&&vt==="up"&&(vt="down");else if(kt){let ve=ft,Me=Tt;kt==="up"&&ve--,kt==="down"&&ve++,kt==="left"&&Me--,kt==="right"&&Me++,(ve<0||ve>=o||Me<0||Me>=f||X(Vn(it,ve,Me),kt))&&(vt=kt)}let fe=ft,Oe=Tt,Qn=vt,Ln=!1,an=!1;const An=st.type==="traffic_light"||st.type==="road_intersection"||st.type&&st.type.includes("intersection");if(!An&&st.stopMarker){const ve=Vn(it,st.stopMarker.r,st.stopMarker.c);ve&&(ve.lightState||ve.state||"green")!=="green"&&(an=!0)}if(an)it[ft][Tt]={...st,movementProgress:tt};else{const ve=[],Me=Ot=>{let de=ft,Ee=Tt;return Ot==="up"&&de--,Ot==="down"&&de++,Ot==="left"&&Ee--,Ot==="right"&&Ee++,{nr:de,nc:Ee}},Re=Ot=>{const de=st.flowDirection;if(de){if(Array.isArray(de)){if(!de.includes(Ot))return!1}else if(de!==Ot&&!de.startsWith("turn_"))return!1}const{nr:Ee,nc:wn}=Me(Ot);if(Ee<0||Ee>=o||wn<0||wn>=f)return!0;const je=Vn(it,Ee,wn);if(!je||!X(je,Ot))return!1;const me=je.type||"",qe=me.includes("vertical"),Dn=me.includes("horizontal"),$n=me.includes("intersection");return!((Ot==="left"||Ot==="right")&&qe&&!$n||(Ot==="up"||Ot==="down")&&Dn&&!$n)};if(Re(vt)&&ve.push(vt),vt==="up"||vt==="down"?(Re("left")&&ve.push("left"),Re("right")&&ve.push("right")):(Re("up")&&ve.push("up"),Re("down")&&ve.push("down")),st.flowDirection&&typeof st.flowDirection=="string"&&st.flowDirection.startsWith("turn_")){const Ot=st.flowDirection.split("_")[2];Re(Ot)&&(ve.length=0,ve.push(Ot))}if(ve.length>0){let Ot=null;const Ee=(st.carConfig||{}).turnBias||"none";if(Ee!=="none"){const me=((qe,Dn)=>{const $n=["up","right","down","left"],Vr=$n.indexOf(qe);return Vr===-1?null:Dn==="left"?$n[(Vr+3)%4]:Dn==="right"?$n[(Vr+1)%4]:null})(vt,Ee);me&&ve.includes(me)&&(Ot=me)}!Ot&&ve.includes(vt)&&(Ot=vt),Ot||(Ot=ve[Math.floor(Math.random()*ve.length)]),Qn=Ot;const{nr:wn,nc:Fe}=Me(Qn);fe=wn,Oe=Fe,Ln=!0}else Ln=!1,it[ft][Tt]={...st,hasCar:vt,movementProgress:tt};if(Ln){let Ot=st.carConfig?{...st.carConfig}:{};if(An&&Ot.turnBias&&Ot.turnBias!=="none"&&Qn!==vt&&(Ot.turnBias="none"),st.type?it[ft][Tt]={...st,hasCar:!1,carConfig:void 0,movementProgress:0}:it[ft][Tt]=null,it[fe]&&it[fe][Oe]!==void 0){const de=it[fe][Oe],Ee=de?{...de}:{type:"road_straight_horizontal"};Ee.hasCar=Qn,Ee.carConfig=Ot,Ee.movementProgress=0,it[fe][Oe]=Ee,ht.add(`${fe},${Oe}`)}}}}let yt=[...pt.slice(0,Nt+1),it];yt.length>500?(yt=yt.slice(yt.length-500),$t.current={history:yt,step:499},A(yt),q(499)):($t.current={history:yt,step:Nt+1},A(yt),q(Nt+1))},P);return()=>clearInterval(lt)},[wt,o,f,se,$]);const kn=zt.useCallback((P,tt,lt)=>{wt&&Qt(!1);const pt=Le.current;Le.current=pt+1,A(Nt=>{const At=Math.min(pt,Nt.length-1),ht=Nt[At].map(yt=>yt.map(ft=>ft?{...ft}:null));let X=ht[P][tt]||{type:null,hasCar:!1};if(Y==="select"&&lt!=="eraser")return Nt;if(lt==="eraser")X.hasCar?(X.hasCar=!1,X.carConfig=void 0,ht[P][tt]=X):X.stopMarker?(delete X.stopMarker,ht[P][tt]=X):X.hasTrafficLight?(X.hasTrafficLight=!1,X.lightState=void 0,X.lightConfig=void 0,X.lightTimer=void 0,ht[P][tt]=X):X.type==="traffic_light"?(X.type="road_intersection",X.hasTrafficLight=!1,ht[P][tt]=X):(X=null,ht[P][tt]=null);else if(lt==="car"){if(X.type&&X.type.startsWith("road")){let yt="right";const ft=X.flowDirection;ft?Array.isArray(ft)&&ft.length>0?yt=ft[0]:typeof ft=="string"&&!ft.startsWith("turn")&&(yt=ft):X.type.includes("vertical")?yt="down":X.type.includes("horizontal")&&(yt="right"),X.hasCar=yt,X.carConfig={speed:1,turnBias:"none"},ht[P][tt]=X}}else if(lt==="traffic_light")if(!xt)X.type&&X.type.startsWith("road")?(X.hasTrafficLight=!0,X.lightState="green",X.lightTimer=0,X.lightConfig={green:10,yellow:4,red:10}):(X.type="road_intersection",X.hasTrafficLight=!0,X.lightState="green",X.lightTimer=0,X.lightConfig={green:10,yellow:4,red:10}),ht[P][tt]=X,Xt({row:P,col:tt});else{if(X.type&&X.type.startsWith("road")){const yt=xt.row-P,ft=xt.col-tt;let Tt="bottom";yt<0?Tt="top":yt>0?Tt="bottom":ft<0?Tt="left":ft>0&&(Tt="right"),X.stopMarker={r:xt.row,c:xt.col,side:Tt},ht[P][tt]=X}Xt(null)}else if(lt==="road_divider_vertical"){if(X.type=lt,X.lanePosition=0,ht[P][tt]=X,tt+1<f){const yt=ht[P][tt+1]||{type:null,hasCar:!1};yt.type||(yt.type="road_divider_vertical",yt.lanePosition=1,ht[P][tt+1]=yt)}}else if(lt==="road_divider_horizontal"){if(X.type=lt,X.lanePosition=0,ht[P][tt]=X,P+1<o){const yt=ht[P+1][tt]||{type:null,hasCar:!1};yt.type||(yt.type="road_divider_horizontal",yt.lanePosition=1,ht[P+1][tt]=yt)}}else if(lt==="road_multilane_vertical"){const yt=ue;for(let ft=0;ft<yt;ft++)if(tt+ft<f){const Tt=ht[P][tt+ft]||{type:null,hasCar:!1};if(Tt.type&&Tt.type.includes("divider"))continue;Tt.type=lt,Tt.laneCount=yt,Tt.lanePosition=ft,ht[P][tt+ft]=Tt}}else if(lt==="road_multilane_horizontal"){const yt=ue;for(let ft=0;ft<yt;ft++)if(P+ft<o){const Tt=ht[P+ft][tt]||{type:null,hasCar:!1};if(Tt.type&&Tt.type.includes("divider"))continue;Tt.type=lt,Tt.laneCount=yt,Tt.lanePosition=ft,ht[P+ft][tt]=Tt}}else X.type=lt,ht[P][tt]=X;const xe=[...Nt.slice(0,At+1),ht];return $t.current={history:xe,step:At+1},xe}),q(Nt=>Nt+1)},[x,Y,wt,o,f,ue,xt]),Ii=(P,tt,lt,pt)=>{A(Nt=>{const it=Nt[x].map(ht=>ht.map(X=>X?{...X}:null));return it[P][tt]&&(it[P][tt][lt]=pt,lt==="isSpawner"&&pt===!0&&(it[P][tt].lastSpawnTick=Vt.current,it[P][tt].spawnInterval||(it[P][tt].spawnInterval=20),it[P][tt].spawnerTurnBiases||(it[P][tt].spawnerTurnBiases=["none"]))),[...Nt.slice(0,x+1),it]}),q(Nt=>Nt+1)},ns=(P,tt,lt,pt)=>{A(Nt=>{const it=Nt[x].map(ht=>ht.map(X=>X?{...X}:null));if(it[P][tt]&&(it[P][tt].type==="traffic_light"||it[P][tt].hasTrafficLight)){const ht=it[P][tt].lightConfig||it[P][tt].config||{green:10,yellow:4,red:10};it[P][tt].lightConfig={...ht,[lt]:parseInt(pt)},it[P][tt].config=it[P][tt].lightConfig}return[...Nt.slice(0,x+1),it]}),q(Nt=>Nt+1)},Or=(P,tt,lt)=>{A(pt=>{const At=pt[x].map(ht=>ht.map(X=>X?{...X}:null)),it=At[P][tt];return it&&(it.type==="traffic_light"||it.hasTrafficLight)&&(it.lightState=lt,it.state=lt,it.lightTimer=0,it.timer=0),[...pt.slice(0,x+1),At]}),q(pt=>pt+1)},Ds=(P,tt,lt)=>{A(pt=>{const At=pt[x].map(ht=>ht.map(X=>X?{...X}:null)),it=At[P][tt];if(it&&it.type.startsWith("road")){if(lt===null)it.flowDirection=null;else{let ht=[];Array.isArray(it.flowDirection)?ht=[...it.flowDirection]:it.flowDirection&&typeof it.flowDirection=="string"&&(ht=[it.flowDirection]),ht.includes(lt)?ht=ht.filter(X=>X!==lt):ht.push(lt),it.flowDirection=ht.length>0?ht:null}it.flowPriority=null}return[...pt.slice(0,x+1),At]}),q(pt=>pt+1)},Pe=(P,tt,lt)=>{A(pt=>{const At=pt[x].map(ht=>ht.map(X=>X?{...X}:null)),it=At[P][tt];if(it&&it.type.includes("multilane")){const ht=it.laneCount||2,X=it.lanePosition||0,xe=Math.max(2,Math.min(6,ht+lt));if(xe===ht)return pt;let yt=P,ft=tt;const Tt=it.type.includes("vertical");Tt?ft=tt-X:yt=P-X;for(let st=0;st<Math.max(ht,xe);st++){const Ut=Tt?yt:yt+st,vt=Tt?ft+st:ft;if(Ut>=0&&Ut<o&&vt>=0&&vt<f){if(At[Ut][vt]&&At[Ut][vt].type&&At[Ut][vt].type.includes("divider"))continue;if(st<xe){const St=At[Ut][vt]||{type:null,hasCar:!1};St.type=it.type,St.laneCount=xe,St.lanePosition=st,!St.flowDirection&&it.flowDirection&&(St.flowDirection=it.flowDirection),At[Ut][vt]=St}else At[Ut][vt]&&At[Ut][vt].type===it.type&&At[Ut][vt].lanePosition===st&&(At[Ut][vt]=null)}}}return[...pt.slice(0,x+1),At]}),q(pt=>pt+1)},Be=(P,tt,lt,pt)=>{A(Nt=>{const it=Nt[x].map(ht=>ht.map(X=>X?{...X}:null));return it[P][tt]&&it[P][tt].hasCar&&(it[P][tt].carConfig={...it[P][tt].carConfig,[lt]:pt}),[...Nt.slice(0,x+1),it]}),q(Nt=>Nt+1)},Ni=(P,tt,lt)=>{A(pt=>{const At=pt[x].map(yt=>yt.map(ft=>ft?{...ft}:null)),it=At[P][tt];if(!it||!it.type.startsWith("road"))return pt;let ht=null;typeof lt=="string"?(ht=lt,lt.startsWith("turn_")&&(ht=lt.split("_")[2])):Array.isArray(lt)&&lt.length>0&&(ht=lt[0]);const X=[[P,tt,ht]],xe=new Set;for(;X.length>0;){let[yt,ft,Tt]=X.shift();const st=`${yt},${ft}`;if(xe.has(st))continue;xe.add(st);const Ut=At[yt][ft];if(Ut&&Ut.type.startsWith("road")){if(Ut.type.includes("multilane")){const Me=Ut.laneCount||2,Re=Ut.lanePosition||0,Ot=Ut.type.includes("vertical"),de=Ot?yt:yt-Re,Ee=Ot?ft-Re:ft;for(let wn=0;wn<Me;wn++){if(wn===Re)continue;const Fe=Ot?de:de+wn,je=Ot?Ee+wn:Ee,me=`${Fe},${je}`;!xe.has(me)&&Fe>=0&&Fe<o&&je>=0&&je<f&&At[Fe][je]&&At[Fe][je].type===Ut.type&&X.push([Fe,je,Tt])}}if(Ut.type==="road_intersection"){Ut.flowDirection=null,Ut.flowPriority=null;const Me=[{dr:-1,dc:0,dir:"up"},{dr:1,dc:0,dir:"down"},{dr:0,dc:-1,dir:"left"},{dr:0,dc:1,dir:"right"}];for(const Re of Me){const Ot=yt+Re.dr,de=ft+Re.dc;Ot>=0&&Ot<o&&de>=0&&de<f&&At[Ot][de]&&At[Ot][de].type.startsWith("road")&&X.push([Ot,de,Re.dir])}continue}let vt=Tt,St=lt;const kt=Array.isArray(Tt)&&Tt.length===1?Tt[0]:typeof Tt=="string"?Tt:null,fe=Array.isArray(lt)&&lt.length===1?lt[0]:typeof lt=="string"?lt:null;if(kt&&fe)if(yt!==P||ft!==tt){const Me=Ut.type;if(Me.includes("horizontal")&&(kt==="up"||kt==="down")){const Re=Vn(At,yt,ft-1),Ot=Vn(At,yt,ft+1);Re&&Re.type.startsWith("road")?(vt="left",St=`turn_${kt}_left`):Ot&&Ot.type.startsWith("road")&&(vt="right",St=`turn_${kt}_right`)}else if(Me.includes("vertical")&&(kt==="left"||kt==="right")){const Re=Vn(At,yt-1,ft),Ot=Vn(At,yt+1,ft);Re&&Re.type.startsWith("road")?(vt="up",St=`turn_${kt}_up`):Ot&&Ot.type.startsWith("road")&&(vt="down",St=`turn_${kt}_down`)}else St=kt,vt=kt}else St=lt,fe.startsWith("turn_")&&(vt=fe.split("_")[2]);else Array.isArray(lt)&&(St=lt,lt.length>0&&(vt=lt[0]));let Oe=0,Qn=0;const Ln=Array.isArray(vt)?vt[0]:vt;typeof Ln=="string"&&(Ln==="up"&&(Oe=-1),Ln==="down"&&(Oe=1),Ln==="left"&&(Qn=-1),Ln==="right"&&(Qn=1));const an=yt+Oe,An=ft+Qn,ve=an>=0&&an<o&&An>=0&&An<f&&At[an][An]&&At[an][An].type.startsWith("road");Ut.flowDirection=St,Ut.flowPriority=null,ve&&(Oe!==0||Qn!==0)&&X.push([an,An,vt])}}return[...pt.slice(0,x+1),At]}),q(pt=>pt+1)},Rl=(P,tt)=>{Y==="select"?(O({row:P,col:tt}),w||C(!0)):kn(P,tt,Y)},Mr=(P,tt,lt,pt)=>{const At=(typeof P=="string"?JSON.parse(P):P).map(it=>it.map(ht=>{if(!ht)return null;const X={...ht};return(X.type==="traffic_light"||X.hasTrafficLight)&&(X.lightTimer=0,X.timer=0),X.isSpawner&&(X.lastSpawnTick=0,X.nextSpawnTick=null),X}));Vt.current=0,c(tt),g(lt),y(tt/16),A([At]),q(0),Qt(!1),N(null),R(pt)};let Xe=zT;rt==="road"&&(Xe=BT),rt==="decoration"&&(Xe=qT),rt==="random"&&(Xe=eI);const Yt=D?mn&&mn[D.row]&&mn[D.row][D.col]:null;return i?E.jsx("div",{className:"flex h-screen w-screen bg-slate-950 items-center justify-center font-sans text-slate-400 animate-pulse",children:"Loading Authentication..."}):s?E.jsxs("div",{className:`flex h-screen w-screen font-sans overflow-hidden transition-colors duration-300 ${gt.bgApp} ${gt.textMain}`,children:[F==="save"&&E.jsx(yv,{mode:"save",onClose:()=>ot(null),grid:mn,rows:o,cols:f,onLoadLayout:Mr,currentLayoutId:L,setCurrentLayoutId:R,user:s,theme:J}),F==="load"&&E.jsx(yv,{mode:"load",onClose:()=>ot(null),grid:mn,rows:o,cols:f,onLoadLayout:Mr,currentLayoutId:L,setCurrentLayoutId:R,user:s,theme:J}),F==="profile"&&E.jsx(yI,{user:s,onClose:()=>ot(null),theme:J,setTheme:jt,gridMultiplier:_,onResizeGrid:Is}),xt&&E.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 bg-yellow-500 text-black px-4 py-2 rounded-full font-bold text-sm shadow-lg animate-bounce",children:" Select a road for the Stop Line"}),E.jsx("div",{className:"absolute top-4 left-4 z-50",children:E.jsx("button",{onClick:()=>C(!0),className:`p-2 rounded-lg shadow-lg border hover:opacity-90 transition-all ${w?"opacity-0 pointer-events-none":"opacity-100"} ${J==="light"?"bg-white border-slate-200 text-slate-700":"bg-slate-800 border-slate-700 text-slate-200"}`,children:E.jsx(fI,{})})}),w&&E.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>C(!1)}),E.jsx("div",{className:`flex-shrink-0 h-full backdrop-blur-md shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-in-out border-r flex flex-col ${w?"w-64":"w-0 border-none"} ${gt.sidebarBg} ${gt.panelBorder}`,children:E.jsxs("div",{className:"w-64 h-full flex flex-col",children:[E.jsxs("div",{className:`p-6 border-b flex justify-between items-center ${gt.panelBorder} ${J==="light"?"bg-slate-50":"bg-slate-900"}`,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-8 h-8 rounded bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center text-lg shadow-lg shadow-blue-500/30",children:""}),E.jsxs("h1",{className:`text-xl font-bold tracking-tight ${gt.textMain}`,children:["City",E.jsx("span",{className:"text-blue-500 font-light",children:"Pro"})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>ot("profile"),className:`w-8 h-8 rounded-full border flex items-center justify-center text-xs font-bold overflow-hidden hover:ring-2 hover:ring-blue-500 transition-all ${J==="light"?"bg-slate-200 border-slate-300 text-slate-600":"bg-slate-700 border-slate-600 text-slate-300"}`,title:"User Settings",children:s.photoURL?E.jsx("img",{src:s.photoURL,alt:"User",className:"w-full h-full object-cover"}):s.email?s.email[0].toUpperCase():"U"}),E.jsx("button",{onClick:()=>C(!1),className:`p-1.5 rounded-lg transition-colors border border-transparent ${J==="light"?"bg-slate-100 text-slate-700 hover:text-slate-900 hover:bg-slate-200":"text-slate-400 hover:text-white hover:bg-slate-800"}`,title:"Close Menu",children:E.jsx(hg,{})})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[!D&&Y&&Y.includes("multilane")&&E.jsxs("div",{className:`mb-6 p-4 rounded-xl border-l-4 border-slate-400 shadow-md animate-fadeIn ${gt.panelBg} ${gt.panelBorder} border`,children:[E.jsx("div",{className:"flex justify-between items-center mb-3",children:E.jsx("h2",{className:`text-sm font-bold uppercase tracking-wider ${gt.textMain}`,children:" Tool Settings"})}),E.jsxs("div",{className:"flex justify-between items-center text-xs",children:[E.jsx("span",{className:gt.textDim,children:"Lanes to Place:"}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>ze(Math.max(2,ue-1)),className:`w-6 h-6 rounded flex items-center justify-center transition-colors ${J==="light"?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:"-"}),E.jsx("span",{className:`font-bold ${gt.textMain}`,children:ue}),E.jsx("button",{onClick:()=>ze(Math.min(6,ue+1)),className:`w-6 h-6 rounded flex items-center justify-center transition-colors ${J==="light"?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:"+"})]})]})]}),D&&Yt&&Yt.type&&Yt.type.includes("multilane")&&E.jsxs("div",{className:`mb-6 p-4 rounded-xl border-l-4 border-slate-400 shadow-md animate-fadeIn ${gt.panelBg} ${gt.panelBorder} border`,children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsx("h2",{className:`text-sm font-bold uppercase tracking-wider ${gt.textMain}`,children:" Road Config"}),E.jsx("button",{onClick:()=>O(null),className:`text-xs ${gt.textDim} hover:${gt.textMain}`,children:"Close"})]}),E.jsxs("div",{className:"flex justify-between items-center text-xs",children:[E.jsx("span",{className:gt.textDim,children:"Lanes:"}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>Pe(D.row,D.col,-1),className:`w-6 h-6 rounded flex items-center justify-center transition-colors ${J==="light"?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:"-"}),E.jsx("span",{className:`font-bold ${gt.textMain}`,children:Yt.laneCount||2}),E.jsx("button",{onClick:()=>Pe(D.row,D.col,1),className:`w-6 h-6 rounded flex items-center justify-center transition-colors ${J==="light"?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:"+"})]})]})]}),!D&&se&&E.jsxs("div",{className:`mb-6 p-4 rounded-xl border-l-4 border-fuchsia-500 shadow-md animate-fadeIn ${gt.panelBg} ${gt.panelBorder} border`,children:[E.jsx("div",{className:"flex justify-between items-center mb-3",children:E.jsx("h2",{className:`text-sm font-bold uppercase tracking-wider ${gt.textMain}`,children:" Auto-Spawn Intensity"})}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsxs("div",{className:"flex items-center justify-between w-full gap-2",children:[E.jsx("span",{className:`text-xs min-w-[30px] ${gt.textDim}`,children:"Slow"}),E.jsx("input",{type:"range",min:"1",max:"10",value:$,onChange:P=>dt(parseInt(P.target.value)),className:`w-full flex-1 accent-fuchsia-500 h-1 rounded-lg appearance-none cursor-pointer ${J==="light"?"bg-slate-300":"bg-slate-700"}`}),E.jsx("span",{className:`text-xs min-w-[30px] text-right ${gt.textDim}`,children:"Fast"})]}),E.jsxs("div",{className:"text-center mt-1 text-[10px] text-fuchsia-500 font-mono font-bold",children:["Intensity: ",$]})]})]}),(()=>{let P=null,tt=null,lt=!1;if(Yt){if(Yt.type==="traffic_light"||Yt.hasTrafficLight)P=Yt,tt={r:D.row,c:D.col};else if(Yt.stopMarker){const{r:pt,c:Nt}=Yt.stopMarker,At=mn[pt]&&mn[pt][Nt];At&&(At.type==="traffic_light"||At.hasTrafficLight)&&(P=At,tt={r:pt,c:Nt},lt=!0)}}return P?E.jsxs("div",{className:`mb-6 p-4 rounded-xl border-l-4 border-blue-500 shadow-md animate-fadeIn ${gt.panelBg} ${gt.panelBorder} border`,children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsx("h2",{className:`text-sm font-bold uppercase tracking-wider ${gt.textMain}`,children:lt?" Linked Signal":" Signal Config"}),E.jsx("button",{onClick:()=>O(null),className:`text-xs ${gt.textDim} hover:${gt.textMain}`,children:"Close"})]}),E.jsxs("div",{className:"mb-4 flex items-center justify-between p-2 rounded-lg bg-black/10 border border-black/5",children:[E.jsx("span",{className:`text-xs font-bold ${gt.textDim}`,children:"Current State:"}),E.jsxs("div",{className:"flex items-center",children:[E.jsxs("button",{onClick:()=>{const pt=(P.lightState||P.state)==="green"?"yellow":(P.lightState||P.state)==="yellow"?"red":"green";Or(tt.r,tt.c,pt)},className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide border flex items-center gap-1.5 transition-all hover:brightness-110 active:scale-95 ${(P.lightState||P.state)==="green"?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":(P.lightState||P.state)==="yellow"?"bg-yellow-500/10 text-yellow-500 border-yellow-500/20":"bg-red-500/10 text-red-500 border-red-500/20"}`,children:[E.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${(P.lightState||P.state)==="green"?"bg-emerald-500":(P.lightState||P.state)==="yellow"?"bg-yellow-500":"bg-red-500"}`}),P.lightState||P.state||"GREEN"]}),E.jsxs("div",{className:"ml-4 whitespace-nowrap text-[10px] font-mono font-bold opacity-70 text-slate-400",children:[""," ",P.lightTimer!==void 0?P.lightTimer:P.timer||0,"/",(P.lightConfig||P.config||{green:10,yellow:4,red:10})[P.lightState||P.state||"green"]]})]})]}),E.jsx("div",{className:"space-y-3",children:E.jsx("div",{className:"grid grid-cols-3 gap-2",children:["green","yellow","red"].map(pt=>E.jsxs("div",{children:[E.jsx("label",{className:`text-[10px] text-${pt}-500 block mb-1 capitalize font-bold`,children:pt}),E.jsx("input",{type:"number",min:"1",value:P.lightConfig?.[pt]||P.config?.[pt]||10,onChange:Nt=>ns(tt.r,tt.c,pt,Nt.target.value),className:`w-full border rounded p-1 text-xs text-center ${J==="light"?"bg-slate-50 border-slate-300 text-slate-900":"bg-slate-900 border-slate-600 text-white"}`})]},pt))})})]}):null})(),D&&Yt&&Yt.hasCar&&E.jsxs("div",{className:`mb-6 p-4 rounded-xl border-l-4 border-orange-500 shadow-md animate-fadeIn ${gt.panelBg} ${gt.panelBorder} border`,children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsx("h2",{className:`text-sm font-bold uppercase tracking-wider ${gt.textMain}`,children:" Car Settings"}),E.jsx("button",{onClick:()=>O(null),className:`text-xs ${gt.textDim} hover:${gt.textMain}`,children:"Close"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsxs("div",{className:`flex justify-between text-[10px] mb-1 ${gt.textDim}`,children:[E.jsx("span",{children:"Speed"}),E.jsxs("span",{children:[Yt.carConfig?.speed||1,"x"]})]}),E.jsx("input",{type:"range",min:"1",max:"3",step:"0.5",value:Yt.carConfig?.speed||1,onChange:P=>Be(D.row,D.col,"speed",parseFloat(P.target.value)),className:`w-full accent-orange-500 h-1 rounded-lg appearance-none cursor-pointer ${J==="light"?"bg-slate-300":"bg-slate-700"}`})]}),E.jsxs("div",{children:[E.jsx("label",{className:`text-[10px] block mb-2 ${gt.textDim}`,children:"Turn Priority"}),E.jsx("div",{className:"grid grid-cols-3 gap-2",children:["left","none","right"].map(P=>E.jsx("button",{onClick:()=>Be(D.row,D.col,"turnBias",P),className:`p-2 rounded text-xs border capitalize ${(Yt.carConfig?.turnBias||"none")===P?"bg-orange-600 border-orange-400 text-white":J==="light"?"bg-slate-100 border-slate-300 text-slate-500":"bg-slate-700 border-slate-600 text-slate-400"}`,children:P==="left"?" Left":P==="right"?"Right ":"None"},P))})]})]})]}),D&&Yt&&Yt.type&&Yt.type.startsWith("road")&&E.jsxs("div",{className:`mb-6 p-4 rounded-xl border-l-4 border-emerald-500 shadow-md animate-fadeIn ${gt.panelBg} ${gt.panelBorder} border`,children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsx("h2",{className:`text-sm font-bold uppercase tracking-wider ${gt.textMain}`,children:" Traffic Flow"}),E.jsx("button",{onClick:()=>O(null),className:`text-xs ${gt.textDim} hover:${gt.textMain}`,children:"Close"})]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"grid grid-cols-5 gap-1 mb-2",children:[E.jsx("button",{onClick:()=>Ds(D.row,D.col,null),className:`p-1 rounded text-[10px] border ${Yt.flowDirection?J==="light"?"bg-slate-100 border-slate-300 text-slate-500":"bg-slate-700 border-slate-600 text-slate-300":"bg-emerald-600 text-white border-emerald-500"}`,children:"Any"}),["up","down","left","right"].map(P=>{const tt=Yt.flowDirection,lt=Array.isArray(tt)?tt.includes(P):tt===P;return E.jsx("button",{onClick:()=>Ds(D.row,D.col,P),className:`p-1 rounded text-lg border ${lt?"bg-emerald-600 text-white border-emerald-500":J==="light"?"bg-slate-100 border-slate-300 text-slate-500":"bg-slate-700 border-slate-600 text-slate-300"}`,children:P==="up"?"":P==="down"?"":P==="left"?"":""},P)})]}),E.jsxs("div",{className:`pt-3 border-t mt-1 ${J==="light"?"border-slate-200":"border-slate-700"}`,children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("h3",{className:`text-xs font-bold uppercase tracking-wider ${gt.textMain}`,children:" Car Generator"}),E.jsx("button",{onClick:()=>Ii(D.row,D.col,"isSpawner",!Yt.isSpawner),className:`w-9 h-5 rounded-full transition-colors flex items-center p-1 ${Yt.isSpawner?"bg-emerald-500":"bg-slate-600"}`,children:E.jsx("div",{className:`w-3 h-3 rounded-full bg-white shadow-sm transition-transform duration-200 ${Yt.isSpawner?"translate-x-4":"translate-x-0"}`})})]}),Yt.isSpawner&&E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:`flex justify-between items-center text-xs px-1 ${gt.textDim}`,children:[E.jsx("span",{children:"Frequency:"}),E.jsxs("span",{className:`font-mono font-bold ${J==="light"?"text-slate-800":"text-white"}`,children:[Yt.spawnInterval||20," ticks"]})]}),E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx("span",{className:`text-[10px] ${gt.textDim}`,children:"Fast"}),E.jsx("input",{type:"range",min:"5",max:"50",step:"5",className:`flex-1 min-w-0 h-1.5 rounded-lg appearance-none cursor-pointer accent-emerald-500 ${J==="light"?"bg-slate-300":"bg-slate-700"}`,value:Yt.spawnInterval||20,onChange:P=>Ii(D.row,D.col,"spawnInterval",parseInt(P.target.value))}),E.jsx("span",{className:`text-[10px] ${gt.textDim}`,children:"Slow"})]}),E.jsxs("div",{className:"flex justify-between items-center gap-2 px-1",children:[E.jsx("label",{className:`text-[10px] ${gt.textDim}`,children:"Stop Gen. at Tick:"}),E.jsx("input",{type:"number",min:"0",placeholder:"",className:`w-16 p-1 text-[10px] text-right rounded border outline-none focus:border-emerald-500 transition-colors ${J==="light"?"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400":"bg-slate-800 border-slate-600 text-white placeholder-slate-500"}`,value:Yt.maxSpawnTick!==void 0&&Yt.maxSpawnTick!==null?Yt.maxSpawnTick:"",onChange:P=>{const tt=P.target.value;Ii(D.row,D.col,"maxSpawnTick",tt===""?null:parseInt(tt))}})]}),E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:`text-[10px] ${gt.textDim}`,children:"Random Turn Bias"}),E.jsx("div",{className:"flex gap-1 w-full",children:["left","none","right"].map(P=>{const tt=Yt.spawnerTurnBiases||["none"],lt=tt.includes(P);return E.jsx("button",{onClick:()=>{let pt;lt?(pt=tt.filter(Nt=>Nt!==P),pt.length===0&&(pt=[P])):pt=[...tt,P],Ii(D.row,D.col,"spawnerTurnBiases",pt)},className:`flex-1 py-1.5 px-1 rounded text-[10px] border capitalize transition-all ${lt?"bg-emerald-600 border-emerald-400 text-white font-bold":J==="light"?"bg-slate-100 border-slate-300 text-slate-500":"bg-slate-700 border-slate-600 text-slate-400"}`,children:P==="left"?" Left":P==="right"?"Right ":"Straight"},P)})})]})]})]}),E.jsx("div",{className:`pt-2 border-t mt-2 ${J==="light"?"border-slate-200":"border-slate-700"}`,children:E.jsx("button",{onClick:()=>Ni(D.row,D.col,Yt.flowDirection),className:`w-full py-1.5 text-xs rounded transition-colors ${J==="light"?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:"Apply to Connected"})})]})]}),!D&&E.jsx("div",{className:`mb-6 p-4 border border-dashed rounded-xl text-center ${J==="light"?"border-slate-300":"border-slate-700"}`,children:E.jsxs("p",{className:`text-xs ${gt.textDim}`,children:["Select a Road or Signal with"," ",E.jsx("span",{className:"text-lg",children:""})," to edit."]})}),E.jsxs("div",{className:"mb-8",children:[E.jsx("h2",{className:`text-xs font-bold uppercase tracking-wider mb-3 ml-1 ${gt.textDim}`,children:"Tools & Objects"}),E.jsx("div",{className:"grid grid-cols-2 gap-3",children:Xe.map(P=>E.jsx(cI,{item:P,theme:J,isSelected:Y===P.type||P.type==="toggle_autospawn"&&se,onClick:()=>{P.type==="road_menu"?(_t("road"),at("select")):P.type==="decoration_menu"?(_t("decoration"),at("select")):P.type==="random_menu"?(_t("random"),at("select")):P.type==="populate_cars"?confirm("Randomly place cars on empty roads?")&&Ns():P.type==="toggle_autospawn"?V(!se):at(P.type),["select","populate_cars","toggle_autospawn"].includes(P.type)||O(null)}},P.type))})]})]}),rt!=="main"&&E.jsx("div",{className:`p-4 border-t ${gt.panelBorder} ${J==="light"?"bg-slate-50":"bg-slate-900"}`,children:E.jsxs("button",{onClick:()=>{_t("main"),at("select")},className:`w-full py-2 rounded-lg flex items-center justify-center gap-2 transition-colors border ${J==="light"?"bg-white border-slate-200 hover:bg-slate-50 text-slate-600":"bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300"}`,children:[E.jsx(gI,{}),E.jsx("span",{className:"text-sm font-medium",children:"Back to Menu"})]})})]})}),E.jsxs("div",{className:`flex-1 relative overflow-hidden flex flex-col min-w-0 ${gt.bgApp}`,children:[E.jsxs("div",{className:`absolute bottom-8 right-8 z-50 flex items-center gap-2 p-2 backdrop-blur-md border rounded-2xl shadow-2xl ${J==="light"?"bg-white/90 border-slate-200":"bg-slate-900/90 border-slate-700"}`,children:[E.jsx("button",{onClick:()=>q(P=>Math.max(0,P-1)),disabled:x===0,className:`p-3 rounded-xl transition-colors disabled:opacity-30 ${J==="light"?"text-slate-600 hover:text-slate-900 hover:bg-slate-100":"text-slate-300 hover:text-white hover:bg-slate-700"}`,title:"Undo",children:E.jsx(dI,{})}),E.jsx("button",{onClick:()=>q(P=>Math.min(S.length-1,P+1)),disabled:x===S.length-1,className:`p-3 rounded-xl transition-colors disabled:opacity-30 ${J==="light"?"text-slate-600 hover:text-slate-900 hover:bg-slate-100":"text-slate-300 hover:text-white hover:bg-slate-700"}`,title:"Redo",children:E.jsx(mI,{})}),E.jsx("div",{className:`w-px h-6 mx-1 ${J==="light"?"bg-slate-300":"bg-slate-700"}`}),E.jsx("button",{onClick:()=>ot("save"),className:`p-3 rounded-xl transition-colors ${J==="light"?"bg-emerald-50 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-100":"text-emerald-400 hover:text-emerald-300 hover:bg-emerald-500/20"}`,title:"Save Layout",children:E.jsx(Em,{})}),E.jsx("button",{onClick:()=>ot("load"),className:`p-3 rounded-xl transition-colors ${J==="light"?"bg-blue-50 text-blue-600 hover:text-blue-700 hover:bg-blue-100":"text-blue-400 hover:text-blue-300 hover:bg-blue-500/20"}`,title:"Load Layout",children:E.jsx(Tm,{})}),E.jsx("div",{className:`w-px h-6 mx-1 ${J==="light"?"bg-slate-300":"bg-slate-700"}`}),E.jsx("button",{onClick:()=>{confirm("Clear entire grid? This cannot be undone.")&&(Qt(!1),A(P=>[...P.slice(0,x+1),Co(o,f)]),q(P=>P+1))},className:`p-3 rounded-xl transition-colors ${J==="light"?"bg-red-50 text-red-600 hover:text-red-700 hover:bg-red-100":"text-red-400 hover:text-red-300 hover:bg-red-500/20"}`,title:"Clear Grid",children:E.jsx(GT,{})})]}),E.jsx("div",{className:"absolute top-4 left-0 right-0 z-20 flex justify-center pointer-events-none",children:E.jsxs("div",{className:`flex items-center gap-4 px-6 py-3 backdrop-blur-md rounded-full border shadow-2xl pointer-events-auto ${J==="light"?"bg-white/90 border-slate-200":"bg-slate-900/90 border-slate-700"}`,children:[E.jsx("div",{className:`hidden md:block mr-4 pr-4 border-r text-xs ${J==="light"?"border-slate-300 text-slate-500":"border-slate-700 text-slate-400"}`,children:Y==="select"?"Select Mode (Click objects)":`Painting: ${Y}`}),E.jsx("button",{onClick:()=>{wt||N(x),Qt(!wt)},className:`px-6 py-2 rounded-full font-bold text-white shadow-lg flex items-center gap-2 ${wt?"bg-amber-500":"bg-emerald-500"}`,children:wt?" Pause":" Start"}),E.jsx("button",{onClick:()=>{if(mt!==null){const tt=S[mt].map(lt=>lt.map(pt=>pt?pt.type==="traffic_light"||pt.hasTrafficLight?{...pt,lightTimer:0,timer:0}:{...pt}:null));A(lt=>{const pt=[...lt];return pt[mt]=tt,pt}),q(mt)}Qt(!1)},className:`px-4 py-2 rounded-full text-xs border ${J==="light"?"bg-slate-100 text-slate-600 border-slate-300":"bg-slate-800 text-slate-300 border-slate-600"}`,disabled:mt===null,children:"Reset"})]})}),E.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-auto",children:E.jsx("div",{className:"relative",children:E.jsx(uI,{grid:mn,rows:o,cols:f,onDrop:(P,tt,lt)=>kn(P,tt,lt),onPaint:(P,tt)=>Rl(P,tt),setIsMouseDown:ct,onRightClick:(P,tt)=>kn(P,tt,"eraser"),selectedCell:D,theme:J})})})]})]}):E.jsx(hI,{})}D1.createRoot(document.getElementById("root")).render(E.jsx(zt.StrictMode,{children:E.jsx(_I,{})}));
